(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"4le0":function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return o}));var r=function(){return"undefined"!=typeof window?window:t},o=function(){var t=r();return t&&t.tinymce?t.tinymce:null}}).call(this,n("yLpj"))},"7x9u":function(t,e){!function(){"use strict";var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),e=function(t,e){t.focus(),t.undoManager.transact((function(){t.setContent(e)})),t.selection.setCursorLocation(),t.nodeChanged()},n=function(t){return t.getContent({source_view:!0})},r=function(t){var r=n(t);t.windowManager.open({title:"Source Code",size:"large",body:{type:"panel",items:[{type:"textarea",name:"code"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{code:r},onSubmit:function(n){e(t,n.getData().code),n.close()}})},o={register:function(t){t.addCommand("mceCodeEditor",(function(){r(t)}))}},i={register:function(t){t.ui.registry.addButton("code",{icon:"sourcecode",tooltip:"Source code",onAction:function(){return r(t)}}),t.ui.registry.addMenuItem("code",{icon:"sourcecode",text:"Source code",onAction:function(){return r(t)}})}};t.add("code",(function(t){return o.register(t),i.register(t),{}}))}()},B9FH:function(t,e,n){n("lM69")},Qjfq:function(t,e,n){n("vn/0")},Tqh3:function(t,e,n){n("zdkC")},UYf5:function(t,e,n){"use strict";n.r(e);n("91GP"),n("hHhE"),n("/SS/");var r,o=n("q1tI"),i=(n("8+KV"),n("KKXr"),n("LK8F"),n("rGqo"),n("yt8O"),n("Btvt"),n("RW0V"),n("0l/t"),n("bWfx"),n("17x9")),u=function(){return(u=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},a={onActivate:i.func,onAddUndo:i.func,onBeforeAddUndo:i.func,onBeforeExecCommand:i.func,onBeforeGetContent:i.func,onBeforeRenderUI:i.func,onBeforeSetContent:i.func,onBeforePaste:i.func,onBlur:i.func,onChange:i.func,onClearUndos:i.func,onClick:i.func,onContextMenu:i.func,onCopy:i.func,onCut:i.func,onDblclick:i.func,onDeactivate:i.func,onDirty:i.func,onDrag:i.func,onDragDrop:i.func,onDragEnd:i.func,onDragGesture:i.func,onDragOver:i.func,onDrop:i.func,onExecCommand:i.func,onFocus:i.func,onFocusIn:i.func,onFocusOut:i.func,onGetContent:i.func,onHide:i.func,onInit:i.func,onKeyDown:i.func,onKeyPress:i.func,onKeyUp:i.func,onLoadContent:i.func,onMouseDown:i.func,onMouseEnter:i.func,onMouseLeave:i.func,onMouseMove:i.func,onMouseOut:i.func,onMouseOver:i.func,onMouseUp:i.func,onNodeChange:i.func,onObjectResizeStart:i.func,onObjectResized:i.func,onObjectSelected:i.func,onPaste:i.func,onPostProcess:i.func,onPostRender:i.func,onPreProcess:i.func,onProgressState:i.func,onRedo:i.func,onRemove:i.func,onReset:i.func,onSaveContent:i.func,onSelectionChange:i.func,onSetAttrib:i.func,onSetContent:i.func,onShow:i.func,onSubmit:i.func,onUndo:i.func,onVisualAid:i.func},c=u({apiKey:i.string,id:i.string,inline:i.bool,init:i.object,initialValue:i.string,onEditorChange:i.func,value:i.string,tagName:i.string,cloudChannel:i.string,plugins:i.oneOfType([i.string,i.array]),toolbar:i.oneOfType([i.string,i.array]),disabled:i.bool,textareaName:i.string},a),l=function(t){return"function"==typeof t},f=function(t){return t in a},s=function(t,e,n){(function(t){return Object.keys(t).filter(f).filter((function(e){return l(t[e])})).map((function(e){return{handler:t[e],eventName:e.substring(2)}}))})(e).forEach((function(e){var r=n[e.eventName];l(r)&&t.off(e.eventName,r);var o=function(n){return e.handler(n,t)};n[e.eventName]=o,t.on(e.eventName,o)}))},d=0,m=function(t){var e=(new Date).getTime();return t+"_"+Math.floor(1e9*Math.random())+ ++d+String(e)},p=function(t){return null!==t&&"textarea"===t.tagName.toLowerCase()},g=function(t){return void 0===t||""===t?[]:Array.isArray(t)?t:t.split(" ")},h=function(t,e){return g(t).concat(g(e))},v=n("4le0"),b=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),y=function(){return(y=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},w={listeners:[],scriptId:m("tiny-script"),scriptLoaded:!1},x=function(t){function e(e){var n=t.call(this,e)||this;return n.initialise=function(){var t=y({},n.props.init,{target:n.elementRef.current,readonly:n.props.disabled,inline:n.inline,plugins:h(n.props.init&&n.props.init.plugins,n.props.plugins),toolbar:n.props.toolbar||n.props.init&&n.props.init.toolbar,setup:function(t){n.editor=t,t.on("init",(function(e){n.initEditor(e,t)})),n.props.init&&"function"==typeof n.props.init.setup&&n.props.init.setup(t)}});p(n.elementRef.current)&&(n.elementRef.current.style.visibility=""),Object(v.a)().init(t)},n.id=n.props.id||m("tiny-react"),n.elementRef=o.createRef(),n.inline=n.props.inline?n.props.inline:n.props.init&&n.props.init.inline,n.boundHandlers={},n}return b(e,t),e.prototype.componentDidUpdate=function(t){this.editor&&this.editor.initialized&&(s(this.editor,this.props,this.boundHandlers),this.currentContent=this.currentContent||this.editor.getContent(),"string"==typeof this.props.value&&this.props.value!==t.value&&this.props.value!==this.currentContent&&this.editor.setContent(this.props.value),"boolean"==typeof this.props.disabled&&this.props.disabled!==t.disabled&&this.editor.setMode(this.props.disabled?"readonly":"design"))},e.prototype.componentDidMount=function(){if(null!==Object(v.a)())this.initialise();else if(this.elementRef.current&&this.elementRef.current.ownerDocument){var t=this.elementRef.current.ownerDocument,e=this.props.cloudChannel,n=this.props.apiKey?this.props.apiKey:"no-api-key";!function(t,e,n,r){t.scriptLoaded?r():(t.listeners.push(r),e.getElementById(t.scriptId)||function(t,e,n,r){var o=e.createElement("script");o.referrerPolicy="origin",o.type="application/javascript",o.id=t,o.addEventListener("load",r),o.src=n,e.head&&e.head.appendChild(o)}(t.scriptId,e,n,(function(){t.listeners.forEach((function(t){return t()})),t.scriptLoaded=!0})))}(w,t,"https://cdn.tiny.cloud/1/"+n+"/tinymce/"+e+"/tinymce.min.js",this.initialise)}},e.prototype.componentWillUnmount=function(){null!==Object(v.a)()&&Object(v.a)().remove(this.editor)},e.prototype.render=function(){return this.inline?this.renderInline():this.renderIframe()},e.prototype.initEditor=function(t,e){var n=this,r="string"==typeof this.props.value?this.props.value:"string"==typeof this.props.initialValue?this.props.initialValue:"";e.setContent(r),l(this.props.onEditorChange)&&e.on("change keyup setcontent",(function(t){var r=e.getContent();r!==n.currentContent&&(n.currentContent=r,l(n.props.onEditorChange)&&n.props.onEditorChange(n.currentContent,e))})),l(this.props.onInit)&&this.props.onInit(t,e),s(e,this.props,this.boundHandlers)},e.prototype.renderInline=function(){var t=this.props.tagName,e=void 0===t?"div":t;return o.createElement(e,{ref:this.elementRef,id:this.id})},e.prototype.renderIframe=function(){return o.createElement("textarea",{ref:this.elementRef,style:{visibility:"hidden"},name:this.props.textareaName,id:this.id})},e.propTypes=c,e.defaultProps={cloudChannel:"5"},e}(o.Component);n.d(e,"Editor",(function(){return x}))},ZNhe:function(t,e,n){n("7x9u")},aULF:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return a}));var r=n("q1tI"),o=n.n(r),i=n("IMLY"),u=n("EYWl");function a(){var t=Object(r.useState)(""),e=t[0],a=t[1];return Object(r.useEffect)((function(){if(window){n("B9FH"),n("Qjfq"),n("Tqh3"),n("ZNhe");var t=n("UYf5").Editor;a(o.a.createElement(t,{init:{plugins:"link table image code"}}))}}),[]),o.a.createElement(i.Card,null,o.a.createElement(u.a,{title:"Tiny MCE",keywords:["OAH","application","react"]}),o.a.createElement("header",null,"Tiny MCE"),o.a.createElement(i.CardBody,null,e))}},lM69:function(t,e,n){n("a1Th"),n("h7Nl"),n("LK8F"),n("Zz4T"),n("KKXr"),n("SRfc"),n("2Spj"),n("Tze0"),n("OG14"),n("xfY5"),n("91GP"),n("0l/t"),n("bWfx"),n("pIFo"),n("Vd3H"),n("rGqo"),n("yt8O"),n("Btvt"),n("RW0V"),n("XfO3"),n("HEwt"),n("dZ+Y"),n("V+eJ"),n("f3/d"),n("DW2E"),function(t){"use strict";var e=function t(e){var n=e,r=function(){return n};return{get:r,set:function(t){n=t},clone:function(){return t(r())}}},n=function(){},r=function(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t(e.apply(null,n))}},o=function(t){return function(){return t}},i=function(t){return t};function u(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=e.concat(n);return t.apply(null,o)}}var a=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return!t.apply(null,e)}},c=o(!1),l=o(!0),f=function(){return s},s=function(){var t=function(t){return t.isNone()},e=function(t){return t()},r=function(t){return t},i={fold:function(t,e){return t()},is:c,isSome:c,isNone:l,getOr:r,getOrThunk:e,getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:o(null),getOrUndefined:o(void 0),or:r,orThunk:e,map:f,each:n,bind:f,exists:c,forall:l,filter:f,equals:t,equals_:t,toArray:function(){return[]},toString:o("none()")};return Object.freeze&&Object.freeze(i),i}(),d=function t(e){var n=o(e),r=function(){return u},i=function(t){return t(e)},u={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:l,isNone:c,getOr:n,getOrThunk:n,getOrDie:n,getOrNull:n,getOrUndefined:n,or:r,orThunk:r,map:function(n){return t(n(e))},each:function(t){t(e)},bind:i,exists:i,forall:i,filter:function(t){return t(e)?u:s},toArray:function(){return[e]},toString:function(){return"some("+e+")"},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(c,(function(t){return n(e,t)}))}};return u},m={some:d,none:f,from:function(t){return null==t?s:d(t)}},p=tinymce.util.Tools.resolve("tinymce.PluginManager"),g=function(t){return function(e){return function(t){if(null===t)return"null";var e=typeof t;return"object"===e&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"===e&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":e}(e)===t}},h=g("string"),v=g("array"),b=g("boolean"),y=g("function"),w=g("number"),x=Array.prototype.slice,C=Array.prototype.indexOf,S=Array.prototype.push,T=function(t,e){return n=t,r=e,C.call(n,r)>-1;var n,r},O=function(t,e){for(var n=0,r=t.length;n<r;n++){if(e(t[n],n))return!0}return!1},R=function(t,e){for(var n=t.length,r=new Array(n),o=0;o<n;o++){var i=t[o];r[o]=e(i,o)}return r},D=function(t,e){for(var n=0,r=t.length;n<r;n++){e(t[n],n)}},A=function(t,e){for(var n=[],r=0,o=t.length;r<o;r++){var i=t[r];e(i,r)&&n.push(i)}return n},E=function(t,e,n){return function(t,e){for(var n=t.length-1;n>=0;n--){e(t[n],n)}}(t,(function(t){n=e(n,t)})),n},k=function(t,e,n){return D(t,(function(t){n=e(n,t)})),n},_=function(t,e){for(var n=0,r=t.length;n<r;n++){var o=t[n];if(e(o,n))return m.some(o)}return m.none()},I=function(t,e){for(var n=0,r=t.length;n<r;n++){if(e(t[n],n))return m.some(n)}return m.none()},N=function(t){for(var e=[],n=0,r=t.length;n<r;++n){if(!v(t[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+t);S.apply(e,t[n])}return e},P=function(t,e){var n=R(t,e);return N(n)},B=function(t,e){for(var n=0,r=t.length;n<r;++n){if(!0!==e(t[n],n))return!1}return!0},M=function(t){var e=x.call(t,0);return e.reverse(),e},L=(y(Array.from)&&Array.from,Object.keys),j=Object.hasOwnProperty,U=function(t,e){for(var n=L(t),r=0,o=n.length;r<o;r++){var i=n[r];e(t[i],i)}},W=function(t,e){return F(t,(function(t,n){return{k:n,v:e(t,n)}}))},F=function(t,e){var n={};return U(t,(function(t,r){var o=e(t,r);n[o.k]=o.v})),n},z=function(t,e){return H(t,e)?m.from(t[e]):m.none()},H=function(t,e){return j.call(t,e)},q=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(t.length!==e.length)throw new Error('Wrong number of arguments to struct. Expected "['+t.length+']", got '+e.length+" arguments");var r={};return D(t,(function(t,n){r[t]=o(e[n])})),r}},V=function(t){return t.slice(0).sort()},G=function(t,e){throw new Error("All required keys ("+V(t).join(", ")+") were not specified. Specified keys were: "+V(e).join(", ")+".")},K=function(t){throw new Error("Unsupported keys for object: "+V(t).join(", "))},X=function(t,e){if(!v(e))throw new Error("The "+t+" fields must be an array. Was: "+e+".");D(e,(function(e){if(!h(e))throw new Error("The value "+e+" in the "+t+" fields was not a string.")}))},Y=function(t){var e=V(t);_(e,(function(t,n){return n<e.length-1&&t===e[n+1]})).each((function(t){throw new Error("The field: "+t+" occurs more than once in the combined fields: ["+e.join(", ")+"].")}))},$=function(t,e){var n=t.concat(e);if(0===n.length)throw new Error("You must specify at least one required or optional field.");return X("required",t),X("optional",e),Y(n),function(r){var i=L(r);B(t,(function(t){return T(i,t)}))||G(t,i);var u=A(i,(function(t){return!T(n,t)}));u.length>0&&K(u);var a={};return D(t,(function(t){a[t]=o(r[t])})),D(e,(function(t){a[t]=o(Object.prototype.hasOwnProperty.call(r,t)?m.some(r[t]):m.none())})),a}},J=(t.Node.ATTRIBUTE_NODE,t.Node.CDATA_SECTION_NODE,t.Node.COMMENT_NODE),Z=t.Node.DOCUMENT_NODE,Q=(t.Node.DOCUMENT_TYPE_NODE,t.Node.DOCUMENT_FRAGMENT_NODE,t.Node.ELEMENT_NODE),tt=t.Node.TEXT_NODE,et=(t.Node.PROCESSING_INSTRUCTION_NODE,t.Node.ENTITY_REFERENCE_NODE,t.Node.ENTITY_NODE,t.Node.NOTATION_NODE,void 0!==t.window?t.window:Function("return this;")(),function(t){return t.dom().nodeName.toLowerCase()}),nt=function(t){return t.dom().nodeType},rt=function(t){return function(e){return nt(e)===t}},ot=function(t){return nt(t)===J||"#comment"===et(t)},it=rt(Q),ut=rt(tt),at=function(e,n,r){if(!(h(r)||b(r)||w(r)))throw t.console.error("Invalid call to Attr.set. Key ",n,":: Value ",r,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(n,r+"")},ct=function(t,e,n){at(t.dom(),e,n)},lt=function(t,e){var n=t.dom();U(e,(function(t,e){at(n,e,t)}))},ft=function(t,e){var n=t.dom().getAttribute(e);return null===n?void 0:n},st=function(t,e){var n=t.dom();return!(!n||!n.hasAttribute)&&n.hasAttribute(e)},dt=function(t,e){t.dom().removeAttribute(e)},mt=function(t){return k(t.dom().attributes,(function(t,e){return t[e.name]=e.value,t}),{})},pt=function(t,e,n){return""===e||!(t.length<e.length)&&t.substr(n,n+e.length)===e},gt=function(t,e){return-1!==t.indexOf(e)},ht=function(t,e){return pt(t,e,0)},vt=function(t){return void 0!==t.style&&y(t.style.getPropertyValue)},bt=function(t){var e,n=!1;return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return n||(n=!0,e=t.apply(null,r)),e}},yt=function(t){if(null==t)throw new Error("Node cannot be null or undefined");return{dom:o(t)}},wt={fromHtml:function(e,n){var r=(n||t.document).createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1)throw t.console.error("HTML does not have a single root node",e),new Error("HTML must have a single root node");return yt(r.childNodes[0])},fromTag:function(e,n){var r=(n||t.document).createElement(e);return yt(r)},fromText:function(e,n){var r=(n||t.document).createTextNode(e);return yt(r)},fromDom:yt,fromPoint:function(t,e,n){var r=t.dom();return m.from(r.elementFromPoint(e,n)).map(yt)}},xt=function(t){var e=ut(t)?t.dom().parentNode:t.dom();return null!=e&&e.ownerDocument.body.contains(e)},Ct=bt((function(){return St(wt.fromDom(t.document))})),St=function(t){var e=t.dom().body;if(null==e)throw new Error("Body is not available yet");return wt.fromDom(e)},Tt=function(e,n,r){if(!h(r))throw t.console.error("Invalid call to CSS.set. Property ",n,":: Value ",r,":: Element ",e),new Error("CSS value must be a string: "+r);vt(e)&&e.style.setProperty(n,r)},Ot=function(t,e,n){var r=t.dom();Tt(r,e,n)},Rt=function(t,e){var n=t.dom();U(e,(function(t,e){Tt(n,e,t)}))},Dt=function(e,n){var r=e.dom(),o=t.window.getComputedStyle(r).getPropertyValue(n),i=""!==o||xt(e)?o:At(r,n);return null===i?void 0:i},At=function(t,e){return vt(t)?t.style.getPropertyValue(e):""},Et=function(t,e){var n=t.dom(),r=At(n,e);return m.from(r).filter((function(t){return t.length>0}))},kt=function(t,e){!function(t,e){vt(t)&&t.style.removeProperty(e)}(t.dom(),e),st(t,"style")&&""===ft(t,"style").replace(/^\s+|\s+$/g,"")&&dt(t,"style")},_t=function(t,e,n){return 0!=(t.compareDocumentPosition(e)&n)},It=function(e,n){return _t(e,n,t.Node.DOCUMENT_POSITION_CONTAINED_BY)},Nt=function(){return(Nt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Pt=function(){return Bt(0,0)},Bt=function(t,e){return{major:t,minor:e}},Mt={nu:Bt,detect:function(t,e){var n=String(e).toLowerCase();return 0===t.length?Pt():function(t,e){var n=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(r.test(e))return r}}(t,e);if(!n)return{major:0,minor:0};var r=function(t){return Number(e.replace(n,"$"+t))};return Bt(r(1),r(2))}(t,n)},unknown:Pt},Lt=function(t,e){return function(){return e===t}},jt=function(t){var e=t.current;return{current:e,version:t.version,isEdge:Lt("Edge",e),isChrome:Lt("Chrome",e),isIE:Lt("IE",e),isOpera:Lt("Opera",e),isFirefox:Lt("Firefox",e),isSafari:Lt("Safari",e)}},Ut={unknown:function(){return jt({current:void 0,version:Mt.unknown()})},nu:jt,edge:o("Edge"),chrome:o("Chrome"),ie:o("IE"),opera:o("Opera"),firefox:o("Firefox"),safari:o("Safari")},Wt=function(t,e){return function(){return e===t}},Ft=function(t){var e=t.current;return{current:e,version:t.version,isWindows:Wt("Windows",e),isiOS:Wt("iOS",e),isAndroid:Wt("Android",e),isOSX:Wt("OSX",e),isLinux:Wt("Linux",e),isSolaris:Wt("Solaris",e),isFreeBSD:Wt("FreeBSD",e)}},zt={unknown:function(){return Ft({current:void 0,version:Mt.unknown()})},nu:Ft,windows:o("Windows"),ios:o("iOS"),android:o("Android"),linux:o("Linux"),osx:o("OSX"),solaris:o("Solaris"),freebsd:o("FreeBSD")},Ht=function(t,e){var n=String(e).toLowerCase();return _(t,(function(t){return t.search(n)}))},qt=function(t,e){return Ht(t,e).map((function(t){var n=Mt.detect(t.versionRegexes,e);return{current:t.name,version:n}}))},Vt=function(t,e){return Ht(t,e).map((function(t){var n=Mt.detect(t.versionRegexes,e);return{current:t.name,version:n}}))},Gt=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Kt=function(t){return function(e){return gt(e,t)}},Xt=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(t){return gt(t,"edge/")&&gt(t,"chrome")&&gt(t,"safari")&&gt(t,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Gt],search:function(t){return gt(t,"chrome")&&!gt(t,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(t){return gt(t,"msie")||gt(t,"trident")}},{name:"Opera",versionRegexes:[Gt,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Kt("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Kt("firefox")},{name:"Safari",versionRegexes:[Gt,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(t){return(gt(t,"safari")||gt(t,"mobile/"))&&gt(t,"applewebkit")}}],Yt=[{name:"Windows",search:Kt("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(t){return gt(t,"iphone")||gt(t,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Kt("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:Kt("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Kt("linux"),versionRegexes:[]},{name:"Solaris",search:Kt("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Kt("freebsd"),versionRegexes:[]}],$t={browsers:o(Xt),oses:o(Yt)},Jt=function(t,e){var n=$t.browsers(),r=$t.oses(),i=qt(n,t).fold(Ut.unknown,Ut.nu),u=Vt(r,t).fold(zt.unknown,zt.nu),a=function(t,e,n,r){var i=t.isiOS()&&!0===/ipad/i.test(n),u=t.isiOS()&&!i,a=t.isiOS()||t.isAndroid(),c=a||r("(pointer:coarse)"),l=i||!u&&a&&r("(min-device-width:768px)"),f=u||a&&!l,s=e.isSafari()&&t.isiOS()&&!1===/safari/i.test(n),d=!f&&!l&&!s;return{isiPad:o(i),isiPhone:o(u),isTablet:o(l),isPhone:o(f),isTouch:o(c),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:o(s),isDesktop:o(d)}}(u,i,t,e);return{browser:i,os:u,deviceType:a}},Zt=e(Jt(t.navigator.userAgent,(function(e){return t.window.matchMedia(e).matches}))),Qt=function(){return Zt.get()},te=Q,ee=Z,ne=function(t,e){var n=t.dom();if(n.nodeType!==te)return!1;var r=n;if(void 0!==r.matches)return r.matches(e);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(e);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(e);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")},re=function(t){return t.nodeType!==te&&t.nodeType!==ee||0===t.childElementCount},oe=function(t,e){return t.dom()===e.dom()},ie=Qt().browser.isIE()?function(t,e){return It(t.dom(),e.dom())}:function(t,e){var n=t.dom(),r=e.dom();return n!==r&&n.contains(r)},ue=ne,ae=function(t){return wt.fromDom(t.dom().ownerDocument)},ce=function(t){return m.from(t.dom().parentNode).map(wt.fromDom)},le=function(t,e){for(var n=y(e)?e:c,r=t.dom(),o=[];null!==r.parentNode&&void 0!==r.parentNode;){var i=r.parentNode,u=wt.fromDom(i);if(o.push(u),!0===n(u))break;r=i}return o},fe=function(t){return m.from(t.dom().previousSibling).map(wt.fromDom)},se=function(t){return m.from(t.dom().nextSibling).map(wt.fromDom)},de=function(t){return R(t.dom().childNodes,wt.fromDom)},me=function(t,e){var n=t.dom().childNodes;return m.from(n[e]).map(wt.fromDom)},pe=(q("element","offset"),function(t,e){ce(t).each((function(n){n.dom().insertBefore(e.dom(),t.dom())}))}),ge=function(t,e){se(t).fold((function(){ce(t).each((function(t){ve(t,e)}))}),(function(t){pe(t,e)}))},he=function(t,e){(function(t){return me(t,0)})(t).fold((function(){ve(t,e)}),(function(n){t.dom().insertBefore(e.dom(),n.dom())}))},ve=function(t,e){t.dom().appendChild(e.dom())},be=function(t,e){pe(t,e),ve(e,t)},ye=function(t,e){D(e,(function(n,r){var o=0===r?t:e[r-1];ge(o,n)}))},we=function(t,e){D(e,(function(e){ve(t,e)}))},xe=function(t){t.dom().textContent="",D(de(t),(function(t){Ce(t)}))},Ce=function(t){var e=t.dom();null!==e.parentNode&&e.parentNode.removeChild(e)},Se=function(t){var e,n=de(t);n.length>0&&(e=t,D(n,(function(t){pe(e,t)}))),Ce(t)},Te=(q("width","height"),q("width","height"),q("rows","columns")),Oe=q("row","column"),Re=(q("x","y"),q("element","rowspan","colspan")),De=q("element","rowspan","colspan","isNew"),Ae=q("element","rowspan","colspan","row","column"),Ee=q("element","cells","section"),ke=q("element","isNew"),_e=q("element","cells","section","isNew"),Ie=q("cells","section"),Ne=q("details","section"),Pe=q("startRow","startCol","finishRow","finishCol"),Be=function t(e,n){var r=[];return D(de(e),(function(e){n(e)&&(r=r.concat([e])),r=r.concat(t(e,n))})),r},Me=function(t,e,n){return function(t,e,n){return A(le(t,n),e)}(t,(function(t){return ne(t,e)}),n)},Le=function(t,e){return function(t,e){return A(de(t),e)}(t,(function(t){return ne(t,e)}))},je=function(e,n){return function(e,n){var r=void 0===n?t.document:n.dom();return re(r)?[]:R(r.querySelectorAll(e),wt.fromDom)}(n,e)};function Ue(t,e,n,r,o){return t(n,r)?m.some(n):y(o)&&o(n)?m.none():e(n,r,o)}var We=function(t,e,n){for(var r=t.dom(),i=y(n)?n:o(!1);r.parentNode;){r=r.parentNode;var u=wt.fromDom(r);if(e(u))return m.some(u);if(i(u))break}return m.none()},Fe=function(t,e,n){return We(t,(function(t){return ne(t,e)}),n)},ze=function(t,e){return function(t,e){return _(t.dom().childNodes,(function(t){return e(wt.fromDom(t))})).map(wt.fromDom)}(t,(function(t){return ne(t,e)}))},He=function(e,n){return function(e,n){var r=void 0===n?t.document:n.dom();return re(r)?m.none():m.from(r.querySelector(e)).map(wt.fromDom)}(n,e)},qe=function(t,e,n){return Ue(ne,Fe,t,e,n)},Ve=function t(e,n,r){return P(de(e),(function(e){return ne(e,n)?r(e)?[e]:[]:t(e,n,r)}))},Ge={firstLayer:function(t,e){return Ve(t,e,o(!0))},filterFirstLayer:Ve},Ke=function(t,e,n){if(void 0===n&&(n=c),n(e))return m.none();if(T(t,et(e)))return m.some(e);return Fe(e,t.join(","),(function(t){return ne(t,"table")||n(t)}))},Xe=function(t,e){return ce(e).map((function(e){return Le(e,t)}))},Ye=u(Xe,"th,td"),$e=u(Xe,"tr"),Je=function(t,e){return parseInt(ft(t,e),10)},Ze={cell:function(t,e){return Ke(["td","th"],t,e)},firstCell:function(t){return He(t,"th,td")},cells:function(t){return Ge.firstLayer(t,"th,td")},neighbourCells:Ye,table:function(t,e){return qe(t,"table",e)},row:function(t,e){return Ke(["tr"],t,e)},rows:function(t){return Ge.firstLayer(t,"tr")},notCell:function(t,e){return Ke(["caption","tr","tbody","tfoot","thead"],t,e)},neighbourRows:$e,attr:Je,grid:function(t,e,n){var r=Je(t,e),o=Je(t,n);return Te(r,o)}},Qe=function(t){var e=Ze.rows(t);return R(e,(function(t){var e=t,n=ce(e).map((function(t){var e=et(t);return"tfoot"===e||"thead"===e||"tbody"===e?e:"tbody"})).getOr("tbody"),r=R(Ze.cells(t),(function(t){var e=st(t,"rowspan")?parseInt(ft(t,"rowspan"),10):1,n=st(t,"colspan")?parseInt(ft(t,"colspan"),10):1;return Re(t,e,n)}));return Ee(e,r,n)}))},tn=function(t,e){return R(t,(function(t){var n=R(Ze.cells(t),(function(t){var e=st(t,"rowspan")?parseInt(ft(t,"rowspan"),10):1,n=st(t,"colspan")?parseInt(ft(t,"colspan"),10):1;return Re(t,e,n)}));return Ee(t,n,e.section())}))},en=function(t,e){return t+","+e},nn=function(t,e){var n=P(t.all(),(function(t){return t.cells()}));return A(n,e)},rn={generate:function(t){var e={},n=[],r=t.length,i=0;D(t,(function(t,r){var o=[];D(t.cells(),(function(t){for(var n=0;void 0!==e[en(r,n)];)n++;for(var u=Ae(t.element(),t.rowspan(),t.colspan(),r,n),a=0;a<t.colspan();a++)for(var c=0;c<t.rowspan();c++){var l=n+a,f=en(r+c,l);e[f]=u,i=Math.max(i,l+1)}o.push(u)})),n.push(Ee(t.element(),o,t.section()))}));var u=Te(r,i);return{grid:o(u),access:o(e),all:o(n)}},getAt:function(t,e,n){var r=t.access()[en(e,n)];return void 0!==r?m.some(r):m.none()},findItem:function(t,e,n){var r=nn(t,(function(t){return n(e,t.element())}));return r.length>0?m.some(r[0]):m.none()},filterItems:nn,justCells:function(t){var e=R(t.all(),(function(t){return t.cells()}));return N(e)}},on=q("minRow","minCol","maxRow","maxCol"),un=function(t,e,n){var r=t[n].element(),o=wt.fromTag("td");ve(o,wt.fromTag("br")),(e?ve:he)(r,o)},an=function(t,e){var n=function(t){return ne(t.element(),e)},r=Qe(t),o=rn.generate(r),i=function(t,e){var n=t.grid().columns(),r=t.grid().rows(),o=n,i=0,u=0;return U(t.access(),(function(t){if(e(t)){var n=t.row(),a=n+t.rowspan()-1,c=t.column(),l=c+t.colspan()-1;n<r?r=n:a>i&&(i=a),c<o?o=c:l>u&&(u=l)}})),on(r,o,i,u)}(o,n),u="th:not("+e+"),td:not("+e+")",a=Ge.filterFirstLayer(t,"th,td",(function(t){return ne(t,u)}));return D(a,Ce),function(t,e,n,r){for(var o=e.grid().columns(),i=e.grid().rows(),u=0;u<i;u++)for(var a=!1,c=0;c<o;c++){if(!(u<n.minRow()||u>n.maxRow()||c<n.minCol()||c>n.maxCol()))rn.getAt(e,u,c).filter(r).isNone()?un(t,a,u):a=!0}}(r,o,i,n),function(t,e){var n=A(Ge.firstLayer(t,"tr"),(function(t){return 0===t.dom().childElementCount}));D(n,Ce),e.minCol()!==e.maxCol()&&e.minRow()!==e.maxRow()||D(Ge.firstLayer(t,"th,td"),(function(t){dt(t,"rowspan"),dt(t,"colspan")})),dt(t,"width"),dt(t,"height"),kt(t,"width"),kt(t,"height")}(t,i),t};var cn=function(t,e){var n=function(e){return t(e)?m.from(e.dom().nodeValue):m.none()};return{get:function(r){if(!t(r))throw new Error("Can only get "+e+" value of a "+e+" node");return n(r).getOr("")},getOption:n,set:function(n,r){if(!t(n))throw new Error("Can only set raw "+e+" value of a "+e+" node");n.dom().nodeValue=r}}}(ut,"text"),ln=function(t){return cn.get(t)},fn=function(t){return cn.getOption(t)},sn=function(t,e){cn.set(t,e)},dn=function(t){return"img"===et(t)?1:fn(t).fold((function(){return de(t).length}),(function(t){return t.length}))},mn=["img","br"],pn=function(t){return fn(t).filter((function(t){return 0!==t.trim().length||t.indexOf("Â ")>-1})).isSome()||T(mn,et(t))},gn=function(t){return e=pn,function t(n){for(var r=0;r<n.childNodes.length;r++){var o=wt.fromDom(n.childNodes[r]);if(e(o))return m.some(o);var i=t(n.childNodes[r]);if(i.isSome())return i}return m.none()}(t.dom());var e},hn=function(t){return vn(t,pn)},vn=function(t,e){return function t(n){for(var r=de(n),o=r.length-1;o>=0;o--){var i=r[o];if(e(i))return m.some(i);var u=t(i);if(u.isSome())return u}return m.none()}(t)},bn=function(t,e){return wt.fromDom(t.dom().cloneNode(e))},yn=function(t){return bn(t,!1)},wn=function(t){return bn(t,!0)},xn=function(t,e){var n=function(t,e){var n=wt.fromTag(e),r=mt(t);return lt(n,r),n}(t,e),r=de(wn(t));return we(n,r),n},Cn=function(){var t=wt.fromTag("td");return ve(t,wt.fromTag("br")),t},Sn=function(t,e,n){var r=xn(t,e);return U(n,(function(t,e){null===t?dt(r,e):ct(r,e,t)})),r},Tn=function(t){return t},On=function(t){return function(){return wt.fromTag("tr",t.dom())}},Rn={cellOperations:function(t,e,n){return{row:On(e),cell:function(e){var r,o,i,u,a=ae(e.element()),c=wt.fromTag(et(e.element()),a.dom()),l=n.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),f=l.length>0?function(t,e,n){return gn(t).map((function(r){var o=n.join(","),i=Me(r,o,(function(e){return oe(e,t)}));return E(i,(function(t,e){var n=yn(e);return dt(n,"contenteditable"),ve(t,n),n}),e)})).getOr(e)}(e.element(),c,l):c;return ve(f,wt.fromTag("br")),r=e.element(),o=c,i=r.dom(),u=o.dom(),vt(i)&&vt(u)&&(u.style.cssText=i.style.cssText),kt(c,"height"),1!==e.colspan()&&kt(e.element(),"width"),t(e.element(),c),c},replace:Sn,gap:Cn}},paste:function(t){return{row:On(t),cell:Cn,replace:Tn,gap:Cn}}},Dn=function(t,e){return e.column()>=t.startCol()&&e.column()+e.colspan()-1<=t.finishCol()&&e.row()>=t.startRow()&&e.row()+e.rowspan()-1<=t.finishRow()},An=function(t,e){var n=e.column(),r=e.column()+e.colspan()-1,o=e.row(),i=e.row()+e.rowspan()-1;return n<=t.finishCol()&&r>=t.startCol()&&o<=t.finishRow()&&i>=t.startRow()},En=function(t,e){for(var n=!0,r=u(Dn,e),o=e.startRow();o<=e.finishRow();o++)for(var i=e.startCol();i<=e.finishCol();i++)n=n&&rn.getAt(t,o,i).exists(r);return n?m.some(e):m.none()},kn=function(t,e,n){var r=rn.findItem(t,e,oe),o=rn.findItem(t,n,oe);return r.bind((function(t){return o.map((function(e){return n=t,r=e,Pe(Math.min(n.row(),r.row()),Math.min(n.column(),r.column()),Math.max(n.row()+n.rowspan()-1,r.row()+r.rowspan()-1),Math.max(n.column()+n.colspan()-1,r.column()+r.colspan()-1));var n,r}))}))},_n=kn,In=function(t,e,n){return kn(t,e,n).bind((function(e){return En(t,e)}))},Nn=function(t,e,n,r){return rn.findItem(t,e,oe).bind((function(e){var o=n>0?e.row()+e.rowspan()-1:e.row(),i=r>0?e.column()+e.colspan()-1:e.column();return rn.getAt(t,o+n,i+r).map((function(t){return t.element()}))}))},Pn=function(t,e,n){return _n(t,e,n).map((function(e){var n=rn.filterItems(t,u(An,e));return R(n,(function(t){return t.element()}))}))},Bn=function(t,e){return rn.findItem(t,e,(function(t,e){return ie(e,t)})).map((function(t){return t.element()}))},Mn=function(t){var e=Qe(t);return rn.generate(e)},Ln=function(t,e,n){return Ze.table(t).bind((function(r){var o=Mn(r);return Nn(o,t,e,n)}))},jn=function(t,e,n){var r=Mn(t);return Pn(r,e,n)},Un=function(t,e,n,r,o){var i=Mn(t),u=oe(t,n)?m.some(e):Bn(i,e),a=oe(t,o)?m.some(r):Bn(i,r);return u.bind((function(t){return a.bind((function(e){return Pn(i,t,e)}))}))},Wn=function(t,e,n){var r=Mn(t);return In(r,e,n)},Fn=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"];function zn(){return{up:o({selector:Fe,closest:qe,predicate:We,all:le}),down:o({selector:je,predicate:Be}),styles:o({get:Dt,getRaw:Et,set:Ot,remove:kt}),attrs:o({get:ft,set:ct,remove:dt,copyTo:function(t,e){var n=mt(t);lt(e,n)}}),insert:o({before:pe,after:ge,afterAll:ye,append:ve,appendAll:we,prepend:he,wrap:be}),remove:o({unwrap:Se,remove:Ce}),create:o({nu:wt.fromTag,clone:function(t){return wt.fromDom(t.dom().cloneNode(!1))},text:wt.fromText}),query:o({comparePosition:function(t,e){return t.dom().compareDocumentPosition(e.dom())},prevSibling:fe,nextSibling:se}),property:o({children:de,name:et,parent:ce,document:function(t){return t.dom().ownerDocument},isText:ut,isComment:ot,isElement:it,getText:ln,setText:sn,isBoundary:function(t){return!!it(t)&&("body"===et(t)||T(Fn,et(t)))},isEmptyTag:function(t){return!!it(t)&&T(["br","img","hr","input"],et(t))}}),eq:oe,is:ue}}var Hn=q("left","right"),qn=q("first","second","splits"),Vn=function(t,e,n){var r=t.property().children(e);return I(r,u(t.eq,n)).map((function(t){return{before:o(r.slice(0,t)),after:o(r.slice(t+1))}}))},Gn=function(t,e,n,r){var o=e(t,n);return E(r,(function(n,r){var o=e(t,r);return Kn(t,n,o)}),o)},Kn=function(t,e,n){return e.bind((function(e){return n.filter(u(t.eq,e))}))},Xn=function(t,e){return u(t.eq,e)},Yn=function(t,e,n,r){void 0===r&&(r=c);var i=[e].concat(t.up().all(e)),u=[n].concat(t.up().all(n)),a=function(t){return I(t,r).fold((function(){return t}),(function(e){return t.slice(0,e+1)}))},l=a(i),f=a(u),s=_(l,(function(e){return O(f,Xn(t,e))}));return{firstpath:o(l),secondpath:o(f),shared:o(s)}},$n={sharedOne:function(t,e,n){return n.length>0?function(t,e,n,r){return r(t,e,n[0],n.slice(1))}(t,e,n,Gn):m.none()},subset:function(t,e,n){var r=Yn(t,e,n);return r.shared().bind((function(e){return function(t,e,n,r){var o=t.property().children(e);if(t.eq(e,n[0]))return m.some([n[0]]);if(t.eq(e,r[0]))return m.some([r[0]]);var i=function(n){var r=M(n),i=I(r,Xn(t,e)).getOr(-1),u=i<r.length-1?r[i+1]:r[i];return I(o,Xn(t,u))},u=i(n),a=i(r);return u.bind((function(t){return a.map((function(e){var n=Math.min(t,e),r=Math.max(t,e);return o.slice(n,r+1)}))}))}(t,e,r.firstpath(),r.secondpath())}))},ancestors:Yn,breakToLeft:function(t,e,n){return Vn(t,e,n).map((function(r){var o=t.create().clone(e);return t.insert().appendAll(o,r.before().concat([n])),t.insert().appendAll(e,r.after()),t.insert().before(e,o),Hn(o,e)}))},breakToRight:function(t,e,n){return Vn(t,e,n).map((function(n){var r=t.create().clone(e);return t.insert().appendAll(r,n.after()),t.insert().after(e,r),Hn(e,r)}))},breakPath:function(t,e,n,r){return function e(o,i,u){var a=qn(o,m.none(),u);return n(o)?qn(o,i,u):t.property().parent(o).bind((function(i){return r(t,i,o).map((function(t){var r=[{first:t.left,second:t.right}],o=n(i)?i:t.left();return e(o,m.some(t.right()),u.concat(r))}))})).getOr(a)}(e,m.none(),[])}},Jn=zn(),Zn={sharedOne:function(t,e){return $n.sharedOne(Jn,(function(e,n){return t(n)}),e)},subset:function(t,e){return $n.subset(Jn,t,e)},ancestors:function(t,e,n){return $n.ancestors(Jn,t,e,n)},breakToLeft:function(t,e){return $n.breakToLeft(Jn,t,e)},breakToRight:function(t,e){return $n.breakToRight(Jn,t,e)},breakPath:function(t,e,n){return $n.breakPath(Jn,t,e,(function(t,e,r){return n(e,r)}))}},Qn={create:$(["boxes","start","finish"],[])},tr=function(t){return Fe(t,"table")},er=function(t,e,n){var r=function(t){return function(e){return void 0!==n&&n(e)||oe(e,t)}};return oe(t,e)?m.some(Qn.create({boxes:m.some([t]),start:t,finish:e})):tr(t).bind((function(o){return tr(e).bind((function(i){if(oe(o,i))return m.some(Qn.create({boxes:jn(o,t,e),start:t,finish:e}));if(ie(o,i)){var u=(a=Me(e,"td,th",r(o))).length>0?a[a.length-1]:e;return m.some(Qn.create({boxes:Un(o,t,o,e,i),start:t,finish:u}))}if(ie(i,o)){var a,c=(a=Me(t,"td,th",r(i))).length>0?a[a.length-1]:t;return m.some(Qn.create({boxes:Un(i,t,o,e,i),start:t,finish:c}))}return Zn.ancestors(t,e).shared().bind((function(u){return qe(u,"table",n).bind((function(n){var u=Me(e,"td,th",r(n)),a=u.length>0?u[u.length-1]:e,c=Me(t,"td,th",r(n)),l=c.length>0?c[c.length-1]:t;return m.some(Qn.create({boxes:Un(n,t,o,e,i),start:l,finish:a}))}))}))}))}))},nr={identify:er,retrieve:function(t,e){var n=je(t,e);return n.length>0?m.some(n):m.none()},shiftSelection:function(t,e,n,r,i){return function(t,e){return _(t,(function(t){return ne(t,e)}))}(t,i).bind((function(t){return Ln(t,e,n).bind((function(t){return function(t,e){return Fe(t,"table").bind((function(n){return He(n,e).bind((function(e){return er(e,t).bind((function(t){return t.boxes().map((function(e){return{boxes:o(e),start:o(t.start()),finish:o(t.finish())}}))}))}))}))}(t,r)}))}))},getEdges:function(t,e,n){return He(t,e).bind((function(e){return He(t,n).bind((function(t){return Zn.sharedOne(tr,[e,t]).map((function(n){return{first:o(e),last:o(t),table:o(n)}}))}))}))}},rr=function(t,e){return nr.retrieve(t,e)},or=function(t,e,n){return nr.getEdges(t,e,n).bind((function(e){var n=function(e){return oe(t,e)},r=Fe(e.first(),"thead,tfoot,tbody,table",n),o=Fe(e.last(),"thead,tfoot,tbody,table",n);return r.bind((function(t){return o.bind((function(n){return oe(t,n)?Wn(e.table(),e.first(),e.last()):m.none()}))}))}))},ir="data-mce-selected",ur={selected:o(ir),selectedSelector:o("td[data-mce-selected],th[data-mce-selected]"),attributeSelector:o("[data-mce-selected]"),firstSelected:o("data-mce-first-selected"),firstSelectedSelector:o("td[data-mce-first-selected],th[data-mce-first-selected]"),lastSelected:o("data-mce-last-selected"),lastSelectedSelector:o("td[data-mce-last-selected],th[data-mce-last-selected]")},ar=function(e){if(!v(e))throw new Error("cases must be an array");if(0===e.length)throw new Error("there must be at least one case");var n=[],r={};return D(e,(function(o,i){var u=L(o);if(1!==u.length)throw new Error("one and only one name per case");var a=u[0],c=o[a];if(void 0!==r[a])throw new Error("duplicate key detected:"+a);if("cata"===a)throw new Error("cannot have a case named cata (sorry)");if(!v(c))throw new Error("case arguments must be an array");n.push(a),r[a]=function(){var r=arguments.length;if(r!==c.length)throw new Error("Wrong number of arguments to case "+a+". Expected "+c.length+" ("+c+"), got "+r);for(var o=new Array(r),u=0;u<o.length;u++)o[u]=arguments[u];var l=function(t){var e=L(t);if(n.length!==e.length)throw new Error("Wrong number of arguments to match. Expected: "+n.join(",")+"\nActual: "+e.join(","));if(!B(n,(function(t){return T(e,t)})))throw new Error("Not all branches were specified when using match. Specified: "+e.join(", ")+"\nRequired: "+n.join(", "));return t[a].apply(null,o)};return{fold:function(){if(arguments.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+arguments.length);var t=arguments[i];return t.apply(null,o)},match:l,log:function(e){t.console.log(e,{constructors:n,constructor:a,params:o})}}}})),r},cr=ar([{none:[]},{multiple:["elements"]},{single:["selection"]}]),lr={cata:function(t,e,n,r){return t.fold(e,n,r)},none:cr.none,multiple:cr.multiple,single:cr.single},fr=function(t,e){return lr.cata(e.get(),o([]),i,o([t]))},sr=function(t,e){return lr.cata(e.get(),m.none,(function(e,n){return 0===e.length?m.none():or(t,ur.firstSelectedSelector(),ur.lastSelectedSelector()).bind((function(t){return e.length>1?m.some({bounds:o(t),cells:o(e)}):m.none()}))}),m.none)},dr=function(t,e){var n=fr(t,e);return n.length>0&&B(n,(function(t){return st(t,"rowspan")&&parseInt(ft(t,"rowspan"),10)>1||st(t,"colspan")&&parseInt(ft(t,"colspan"),10)>1}))?m.some(n):m.none()},mr=fr,pr=function(t){return{element:o(t),mergable:m.none,unmergable:m.none,selection:o([t])}},gr=q("element","clipboard","generators"),hr={noMenu:pr,forMenu:function(t,e,n){return{element:o(n),mergable:o(sr(e,t)),unmergable:o(dr(n,t)),selection:o(mr(n,t))}},notCell:function(t){return pr(t)},paste:gr,pasteRows:function(t,e,n,r,i){return{element:o(n),mergable:m.none,unmergable:m.none,selection:o(mr(n,t)),clipboard:o(r),generators:o(i)}}},vr={registerEvents:function(e,r,o,i){e.on("BeforeGetContent",(function(t){!0===t.selection&&lr.cata(r.get(),n,(function(n){t.preventDefault(),function(t){return Ze.table(t[0]).map(wn).map((function(t){return[an(t,ur.attributeSelector())]}))}(n).each((function(n){t.content="text"===t.format?function(t){return R(t,(function(t){return t.dom().innerText})).join("")}(n):function(t,e){return R(e,(function(e){return t.selection.serializer.serialize(e.dom(),{})})).join("")}(e,n)}))}),n)})),e.on("BeforeSetContent",(function(n){!0===n.selection&&!0===n.paste&&m.from(e.dom.getParent(e.selection.getStart(),"th,td")).each((function(r){var u=wt.fromDom(r);Ze.table(u).each((function(r){var a,c,l,f=A((a=n.content,(l=(c||t.document).createElement("div")).innerHTML=a,de(wt.fromDom(l))),(function(t){return"meta"!==et(t)}));if(1===f.length&&"table"===et(f[0])){n.preventDefault();var s=wt.fromDom(e.getDoc()),d=Rn.paste(s),m=hr.paste(u,f[0],d);o.pasteCells(r,m).each((function(t){e.selection.setRng(t),e.focus(),i.clear(r)}))}}))}))}))}};function br(t,e){var n=function(n){var r=e(n);if(r<=0||null===r){var o=Dt(n,t);return parseFloat(o)||0}return r},r=function(t,e){return k(e,(function(e,n){var r=Dt(t,n),o=void 0===r?0:parseInt(r,10);return isNaN(o)?e:e+o}),0)};return{set:function(e,n){if(!w(n)&&!n.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+n);var r=e.dom();vt(r)&&(r.style[t]=n+"px")},get:n,getOuter:n,aggregate:r,max:function(t,e,n){var o=r(t,n);return e>o?e-o:0}}}var yr=br("height",(function(t){var e=t.dom();return xt(t)?e.getBoundingClientRect().height:e.offsetHeight})),wr=function(t){return yr.get(t)},xr=function(t){return yr.getOuter(t)},Cr=br("width",(function(t){return t.dom().offsetWidth})),Sr=function(t){return Cr.get(t)},Tr=function(t){return Cr.getOuter(t)},Or=Qt(),Rr=function(t,e,n){return function(t,e){var n=parseFloat(t);return isNaN(n)?e:n}(Dt(t,e),n)},Dr=function(t){return Or.browser.isIE()||Or.browser.isEdge()?function(t){var e=Rr(t,"padding-top",0),n=Rr(t,"padding-bottom",0),r=Rr(t,"border-top-width",0),o=Rr(t,"border-bottom-width",0),i=t.dom().getBoundingClientRect().height;return"border-box"===Dt(t,"box-sizing")?i:i-e-n-(r+o)}(t):Rr(t,"height",wr(t))},Ar=/(\d+(\.\d+)?)(\w|%)*/,Er=/(\d+(\.\d+)?)%/,kr=/(\d+(\.\d+)?)px|em/,_r=function(t,e){Ot(t,"height",e+"px")},Ir=function(t,e,n,r){var o,i,u=parseInt(t,10);return pt(o=t,i="%",o.length-i.length)&&"table"!==et(e)?function(t,e,n,r){var o=Ze.table(t).map((function(t){var r=n(t);return Math.floor(e/100*r)})).getOr(e);return r(t,o),o}(e,u,n,r):u},Nr=function(t){var e=function(t){return Et(t,"height").getOrThunk((function(){return Dr(t)+"px"}))}(t);return e?Ir(e,t,wr,_r):wr(t)},Pr=function(t,e){return st(t,e)?parseInt(ft(t,e),10):1},Br=function(t){return Et(t,"width").fold((function(){return m.from(ft(t,"width"))}),(function(t){return m.some(t)}))},Mr=function(t,e){return t/e.pixelWidth()*100},Lr={percentageBasedSizeRegex:o(Er),pixelBasedSizeRegex:o(kr),setPixelWidth:function(t,e){Ot(t,"width",e+"px")},setPercentageWidth:function(t,e){Ot(t,"width",e+"%")},setHeight:_r,getPixelWidth:function(t,e){return Br(t).fold((function(){return Sr(t)}),(function(n){return function(t,e,n){var r=kr.exec(e);if(null!==r)return parseInt(r[1],10);var o=Er.exec(e);return null!==o?function(t,e){return t/100*e.pixelWidth()}(parseFloat(o[1]),n):Sr(t)}(t,n,e)}))},getPercentageWidth:function(t,e){return Br(t).fold((function(){var n=Sr(t);return Mr(n,e)}),(function(n){return function(t,e,n){var r=Er.exec(e);if(null!==r)return parseFloat(r[1]);var o=Sr(t);return Mr(o,n)}(t,n,e)}))},getGenericWidth:function(t){return Br(t).bind((function(t){var e=Ar.exec(t);return null!==e?m.some({width:o(parseFloat(e[1])),unit:o(e[3])}):m.none()}))},setGenericWidth:function(t,e,n){Ot(t,"width",e+n)},getHeight:function(t){return function(t,e,n){return n(t)/Pr(t,e)}(t,"rowspan",Nr)},getRawWidth:Br},jr=function(t,e){Lr.getGenericWidth(t).each((function(n){var r=n.width()/2;Lr.setGenericWidth(t,r,n.unit()),Lr.setGenericWidth(e,r,n.unit())}))},Ur=function t(e,n){return{left:o(e),top:o(n),translate:function(r,o){return t(e+r,n+o)}}},Wr=function(t,e){return void 0!==t?t:void 0!==e?e:0},Fr=function(t){var e=t.dom().ownerDocument,n=e.body,r=e.defaultView,o=e.documentElement;if(n===t.dom())return Ur(n.offsetLeft,n.offsetTop);var i=Wr(r.pageYOffset,o.scrollTop),u=Wr(r.pageXOffset,o.scrollLeft),a=Wr(o.clientTop,n.clientTop),c=Wr(o.clientLeft,n.clientLeft);return zr(t).translate(u-c,i-a)},zr=function(t){var e=t.dom(),n=e.ownerDocument.body;return n===e?Ur(n.offsetLeft,n.offsetTop):xt(t)?function(t){var e=t.getBoundingClientRect();return Ur(e.left,e.top)}(e):Ur(0,0)},Hr=q("row","y"),qr=q("col","x"),Vr=function(t){return Fr(t).left()+Tr(t)},Gr=function(t){return Fr(t).left()},Kr=function(t,e){return qr(t,Gr(e))},Xr=function(t,e){return qr(t,Vr(e))},Yr=function(t){return Fr(t).top()},$r=function(t,e){return Hr(t,Yr(e))},Jr=function(t,e){return Hr(t,Yr(e)+xr(e))},Zr=function(t,e,n){if(0===n.length)return[];var r=R(n.slice(1),(function(e,n){return e.map((function(e){return t(n,e)}))})),o=n[n.length-1].map((function(t){return e(n.length-1,t)}));return r.concat([o])},Qr={height:{delta:i,positions:function(t){return Zr($r,Jr,t)},edge:Yr},rtl:{delta:function(t){return-t},edge:Vr,positions:function(t){return Zr(Xr,Kr,t)}},ltr:{delta:i,edge:Gr,positions:function(t){return Zr(Kr,Xr,t)}}},to={ltr:Qr.ltr,rtl:Qr.rtl};function eo(t){var e=function(e){return t(e).isRtl()?to.rtl:to.ltr};return{delta:function(t,n){return e(n).delta(t,n)},edge:function(t){return e(t).edge(t)},positions:function(t,n){return e(n).positions(t,n)}}}var no,ro=function(t){var e=Qe(t);return rn.generate(e).grid()},oo=function(t){for(var e=[],n=function(t){e.push(t)},r=0;r<t.length;r++)t[r].each(n);return e},io=function(t,e){for(var n=0;n<t.length;n++){var r=e(t[n],n);if(r.isSome())return r}return m.none()},uo=function(t,e,n,r){n===r?dt(t,e):ct(t,e,n)},ao=function(t,e){var n=[],r=[],i=function(e,o){e.length>0?function(e,o){var i=ze(t,o).getOrThunk((function(){var e=wt.fromTag(o,ae(t).dom());return ve(t,e),e}));xe(i);var u=R(e,(function(t){t.isNew()&&n.push(t.element());var e=t.element();return xe(e),D(t.cells(),(function(t){t.isNew()&&r.push(t.element()),uo(t.element(),"colspan",t.colspan(),1),uo(t.element(),"rowspan",t.rowspan(),1),ve(e,t.element())})),e}));we(i,u)}(e,o):function(e){ze(t,e).each(Ce)}(o)},u=[],a=[],c=[];return D(e,(function(t){switch(t.section()){case"thead":u.push(t);break;case"tbody":a.push(t);break;case"tfoot":c.push(t)}})),i(u,"thead"),i(a,"tbody"),i(c,"tfoot"),{newRows:o(n),newCells:o(r)}},co=function(t){return R(t,(function(t){var e=yn(t.element());return D(t.cells(),(function(t){var n=wn(t.element());uo(n,"colspan",t.colspan(),1),uo(n,"rowspan",t.rowspan(),1),ve(e,n)})),e}))},lo=function(t,e){var n=ft(t,e);return void 0===n||""===n?[]:n.split(" ")},fo=function(t){return void 0!==t.dom().classList},so=function(t,e){return function(t,e,n){var r=lo(t,e).concat([n]);return ct(t,e,r.join(" ")),!0}(t,"class",e)},mo=function(t,e){return function(t,e,n){var r=A(lo(t,e),(function(t){return t!==n}));return r.length>0?ct(t,e,r.join(" ")):dt(t,e),!1}(t,"class",e)},po=function(t,e){fo(t)?t.dom().classList.add(e):so(t,e)},go=function(t){0===(fo(t)?t.dom().classList:function(t){return lo(t,"class")}(t)).length&&dt(t,"class")},ho=function(t,e){return fo(t)&&t.dom().classList.contains(e)},vo=function(t,e){for(var n=[],r=t;r<e;r++)n.push(r);return n},bo=function(t,e){if(e<0||e>=t.length-1)return m.none();var n=t[e].fold((function(){var n=M(t.slice(0,e));return io(n,(function(t,e){return t.map((function(t){return{value:t,delta:e+1}}))}))}),(function(t){return m.some({value:t,delta:0})})),r=t[e+1].fold((function(){var n=t.slice(e+1);return io(n,(function(t,e){return t.map((function(t){return{value:t,delta:e+1}}))}))}),(function(t){return m.some({value:t,delta:1})}));return n.bind((function(t){return r.map((function(e){var n=e.delta+t.delta;return Math.abs(e.value-t.value)/n}))}))},yo=function(t,e,n){var r=t();return _(r,e).orThunk((function(){return m.from(r[0]).orThunk(n)})).map((function(t){return t.element()}))},wo=function(t){var e=t.grid(),n=vo(0,e.columns()),r=vo(0,e.rows());return R(n,(function(e){return yo((function(){return P(r,(function(n){return rn.getAt(t,n,e).filter((function(t){return t.column()===e})).fold(o([]),(function(t){return[t]}))}))}),(function(t){return 1===t.colspan()}),(function(){return rn.getAt(t,0,e)}))}))},xo=function(t){var e=t.grid(),n=vo(0,e.rows()),r=vo(0,e.columns());return R(n,(function(e){return yo((function(){return P(r,(function(n){return rn.getAt(t,e,n).filter((function(t){return t.row()===e})).fold(o([]),(function(t){return[t]}))}))}),(function(t){return 1===t.rowspan()}),(function(){return rn.getAt(t,e,0)}))}))},Co=function(t){var e=t.replace(/\./g,"-");return{resolve:function(t){return e+"-"+t}}},So=Co("ephox-snooker"),To={resolve:So.resolve},Oo=function(t,e,n,r,o){var i=wt.fromTag("div");return Rt(i,{position:"absolute",left:e-r/2+"px",top:n+"px",height:o+"px",width:r+"px"}),lt(i,{"data-column":t,role:"presentation"}),i},Ro=function(t,e,n,r,o){var i=wt.fromTag("div");return Rt(i,{position:"absolute",left:e+"px",top:n-o/2+"px",height:o+"px",width:r+"px"}),lt(i,{"data-row":t,role:"presentation"}),i},Do=To.resolve("resizer-bar"),Ao=To.resolve("resizer-rows"),Eo=To.resolve("resizer-cols"),ko=function(t){var e=je(t.parent(),"."+Do);D(e,Ce)},_o=function(t,e,n){var r=t.origin();D(e,(function(e,o){e.each((function(e){var o=n(r,e);po(o,Do),ve(t.parent(),o)}))}))},Io=function(t,e,n,r,o,i){var u=Fr(e);!function(t,e,n,r){_o(t,e,(function(t,e){var o=Ro(e.row(),n.left()-t.left(),e.y()-t.top(),r,7);return po(o,Ao),o}))}(t,n.length>0?o.positions(n,e):[],u,Tr(e)),function(t,e,n,r){_o(t,e,(function(t,e){var o=Oo(e.col(),e.x()-t.left(),n.top()-t.top(),7,r);return po(o,Eo),o}))}(t,r.length>0?i.positions(r,e):[],u,xr(e))},No=function(t,e){var n=je(t.parent(),"."+Do);D(n,e)},Po=function(t,e,n,r){ko(t);var o=Qe(e),i=rn.generate(o),u=xo(i),a=wo(i);Io(t,e,u,a,n,r)},Bo=function(t){No(t,(function(t){Ot(t,"display","none")}))},Mo=function(t){No(t,(function(t){Ot(t,"display","block")}))},Lo=ko,jo=function(t){return ho(t,Ao)},Uo=function(t){return ho(t,Eo)},Wo=function(t,e){return Ie(e,t.section())},Fo=function(t,e){return t.cells()[e]},zo={addCell:function(t,e,n){var r=t.cells(),o=r.slice(0,e),i=r.slice(e),u=o.concat([n]).concat(i);return Wo(t,u)},setCells:Wo,mutateCell:function(t,e,n){t.cells()[e]=n},getCell:Fo,getCellElement:function(t,e){return Fo(t,e).element()},mapCells:function(t,e){var n=t.cells(),r=R(n,e);return Ie(r,t.section())},cellLength:function(t){return t.cells().length}},Ho=function(t,e){if(0===t.length)return 0;var n=t[0];return I(t,(function(t){return!e(n.element(),t.element())})).fold((function(){return t.length}),(function(t){return t}))},qo=function(t,e,n,r){var i=function(t,e){return t[e]}(t,e).cells().slice(n),u=Ho(i,r),a=function(t,e){return R(t,(function(t){return zo.getCell(t,e)}))}(t,n).slice(e),c=Ho(a,r);return{colspan:o(u),rowspan:o(c)}},Vo=function(t,e){var n=R(t,(function(t,e){return R(t.cells(),(function(t,e){return!1}))}));return R(t,(function(r,o){var i=P(r.cells(),(function(r,i){if(!1===n[o][i]){var u=qo(t,o,i,e);return function(t,e,r,o){for(var i=t;i<t+r;i++)for(var u=e;u<e+o;u++)n[i][u]=!0}(o,i,u.rowspan(),u.colspan()),[De(r.element(),u.rowspan(),u.colspan(),r.isNew())]}return[]}));return Ne(i,r.section())}))},Go=function(t,e,n){for(var r=[],o=0;o<t.grid().rows();o++){for(var i=[],u=0;u<t.grid().columns();u++){var a=rn.getAt(t,o,u).map((function(t){return ke(t.element(),n)})).getOrThunk((function(){return ke(e.gap(),!0)}));i.push(a)}var c=Ie(i,t.all()[o].section());r.push(c)}return r},Ko=function(t,e){return R(t,(function(t){var n=function(t){return io(t,(function(t){return ce(t.element()).map((function(t){var e=ce(t).isNone();return ke(t,e)}))})).getOrThunk((function(){return ke(e.row(),!0)}))}(t.details());return _e(n.element(),t.details(),t.section(),n.isNew())}))},Xo=function(t,e){var n=Vo(t,oe);return Ko(n,e)},Yo=function(t,e){var n=N(R(t.all(),(function(t){return t.cells()})));return _(n,(function(t){return oe(e,t.element())}))},$o=function(t,e,n,r,i){return function(u,a,c,l,f){var s=Qe(a),d=rn.generate(s);return e(d,c).map((function(e){var n=function(t,e){return Go(t,e,!1)}(d,l),r=t(n,e,oe,i(l)),u=Xo(r.grid(),l);return{grid:o(u),cursor:r.cursor}})).fold((function(){return m.none()}),(function(t){var e=ao(a,t.grid());return n(a,t.grid(),f),r(a),Po(u,a,Qr.height,f),m.some({cursor:t.cursor,newRows:e.newRows,newCells:e.newCells})}))}},Jo=function(t,e){return Ze.cell(e.element()).bind((function(e){return Yo(t,e)}))},Zo=function(t,e){var n=R(e.selection(),(function(e){return Ze.cell(e).bind((function(e){return Yo(t,e)}))})),r=oo(n);return r.length>0?m.some({cells:r,generators:e.generators,clipboard:e.clipboard}):m.none()},Qo=function(t,e){var n=R(e.selection(),(function(e){return Ze.cell(e).bind((function(e){return Yo(t,e)}))})),r=oo(n);return r.length>0?m.some(r):m.none()},ti=function t(e){return{is:function(t){return e===t},isValue:l,isError:c,getOr:o(e),getOrThunk:o(e),getOrDie:o(e),or:function(n){return t(e)},orThunk:function(n){return t(e)},fold:function(t,n){return n(e)},map:function(n){return t(n(e))},mapError:function(n){return t(e)},each:function(t){t(e)},bind:function(t){return t(e)},exists:function(t){return t(e)},forall:function(t){return t(e)},toOption:function(){return m.some(e)}}},ei=function t(e){return{is:c,isValue:c,isError:l,getOr:i,getOrThunk:function(t){return t()},getOrDie:function(){return(t=String(e),function(){throw new Error(t)})();var t},or:function(t){return t},orThunk:function(t){return t()},fold:function(t,n){return t(e)},map:function(n){return t(e)},mapError:function(n){return t(n(e))},each:n,bind:function(n){return t(e)},exists:c,forall:l,toOption:m.none}},ni=ti,ri=ei,oi=function(t,e){return R(t,(function(){return ke(e.cell(),!0)}))},ii=function(t,e,n){return t.concat(function(t,e){for(var n=[],r=0;r<t;r++)n.push(e(r));return n}(e,(function(e){return zo.setCells(t[t.length-1],oi(t[t.length-1].cells(),n))})))},ui=function(t,e,n){return R(t,(function(t){return zo.setCells(t,t.cells().concat(oi(vo(0,e),n)))}))},ai=function(t,e,n){if(t.row()>=e.length||t.column()>zo.cellLength(e[0]))return ri("invalid start address out of table bounds, row: "+t.row()+", column: "+t.column());var r=e.slice(t.row()),i=r[0].cells().slice(t.column()),u=zo.cellLength(n[0]),a=n.length;return ni({rowDelta:o(r.length-a),colDelta:o(i.length-u)})},ci=function(t,e){var n=zo.cellLength(t[0]),r=zo.cellLength(e[0]);return{rowDelta:o(0),colDelta:o(n-r)}},li=function(t,e,n){var r=e.colDelta()<0?ui:i;return(e.rowDelta()<0?ii:i)(r(t,Math.abs(e.colDelta()),n),Math.abs(e.rowDelta()),n)},fi=function(t,e,n,r){if(0===t.length)return t;for(var o=e.startRow();o<=e.finishRow();o++)for(var i=e.startCol();i<=e.finishCol();i++)zo.mutateCell(t[o],i,ke(r(),!1));return t},si=function(t,e,n,r){for(var o=!0,i=0;i<t.length;i++)for(var u=0;u<zo.cellLength(t[0]);u++){var a=n(zo.getCellElement(t[i],u),e);!0===a&&!1===o?zo.mutateCell(t[i],u,ke(r(),!0)):!0===a&&(o=!1)}return t},di=function(t,e,n,r){if(e>0&&e<t.length){var o=function(t,e){return k(t,(function(t,n){return O(t,(function(t){return e(t.element(),n.element())}))?t:t.concat([n])}),[])}(t[e-1].cells(),n);D(o,(function(o){for(var i=m.none(),u=function(e){for(var u=function(u){var a=t[e].cells()[u];n(a.element(),o.element())&&(i.isNone()&&(i=m.some(r())),i.each((function(n){zo.mutateCell(t[e],u,ke(n,!0))})))},a=0;a<zo.cellLength(t[0]);a++)u(a)},a=e;a<t.length;a++)u(a)}))}return t},mi=function(t,e,n,r){var o=u(r,zo.getCell(t[e],n).element()),i=t[e];return t.length>1&&zo.cellLength(i)>1&&(n>0&&o(zo.getCellElement(i,n-1))||n<i.cells().length-1&&o(zo.getCellElement(i,n+1))||e>0&&o(zo.getCellElement(t[e-1],n))||e<t.length-1&&o(zo.getCellElement(t[e+1],n)))},pi=function(t,e,n,r,o){return ai(t,e,n).map((function(i){var u=li(e,i,r);return function(t,e,n,r,o){for(var i=t.row(),u=t.column(),a=i+n.length,c=u+zo.cellLength(n[0]),l=i;l<a;l++)for(var f=u;f<c;f++){mi(e,l,f,o)&&si(e,zo.getCellElement(e[l],f),o,r.cell);var s=zo.getCellElement(n[l-i],f-u),d=r.replace(s);zo.mutateCell(e[l],f,ke(d,!0))}return e}(t,u,n,r,o)}))},gi=function(t,e,n,r,o){di(e,t,o,r.cell);var i=ci(n,e),u=li(n,i,r),a=ci(e,u),c=li(e,a,r);return c.slice(0,t).concat(u).concat(c.slice(t,c.length))},hi=function(t,e,n,r,o){var i=t.slice(0,e),u=t.slice(e),a=zo.mapCells(t[n],(function(n,i){return e>0&&e<t.length&&r(zo.getCellElement(t[e-1],i),zo.getCellElement(t[e],i))?zo.getCell(t[e],i):ke(o(n.element(),r),!0)}));return i.concat([a]).concat(u)},vi=function(t,e,n,r,o){return R(t,(function(t){var i=e>0&&e<zo.cellLength(t)&&r(zo.getCellElement(t,e-1),zo.getCellElement(t,e))?zo.getCell(t,e):ke(o(zo.getCellElement(t,n),r),!0);return zo.addCell(t,e,i)}))},bi=function(t,e,n,r,o){var i=n+1;return R(t,(function(t,u){var a=u===e?ke(o(zo.getCellElement(t,n),r),!0):zo.getCell(t,n);return zo.addCell(t,i,a)}))},yi=function(t,e,n,r,o){var i=e+1,u=t.slice(0,i),a=t.slice(i),c=zo.mapCells(t[e],(function(t,e){return e===n?ke(o(t.element(),r),!0):t}));return u.concat([c]).concat(a)},wi=function(t,e,n){return t.slice(0,e).concat(t.slice(n+1))},xi=function(t,e,n){var r=R(t,(function(t){var r=t.cells().slice(0,e).concat(t.cells().slice(n+1));return Ie(r,t.section())}));return A(r,(function(t){return t.cells().length>0}))},Ci=function(t,e,n,r){return R(t,(function(t){return zo.mapCells(t,(function(t){return function(t){return O(e,(function(e){return n(t.element(),e.element())}))}(t)?ke(r(t.element(),n),!0):t}))}))},Si=function(t,e,n,r){return void 0!==zo.getCellElement(t[e],n)&&e>0&&r(zo.getCellElement(t[e-1],n),zo.getCellElement(t[e],n))},Ti=function(t,e,n){return e>0&&n(zo.getCellElement(t,e-1),zo.getCellElement(t,e))},Oi=function(t,e,n,r){var o=P(t,(function(r,o){return Si(t,o,e,n)||Ti(r,e,n)?[]:[zo.getCell(r,e)]}));return Ci(t,o,n,r)},Ri=function(t,e,n,r){var o=t[e],i=P(o.cells(),(function(r,i){return Si(t,e,i,n)||Ti(o,i,n)?[]:[r]}));return Ci(t,i,n,r)},Di=ar([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}]),Ai=Nt({},Di),Ei=function(t,e,n,r){var i=t.slice(0),u=function(t,e){return 0===t.length?Ai.none():1===t.length?Ai.only(0):0===e?Ai.left(0,1):e===t.length-1?Ai.right(e-1,e):e>0&&e<t.length-1?Ai.middle(e-1,e,e+1):Ai.none()}(t,e),a=function(t){return R(t,o(0))},c=o(a(i)),l=function(t,e){if(n>=0){var o=Math.max(r.minCellWidth(),i[e]-n);return a(i.slice(0,t)).concat([n,o-i[e]]).concat(a(i.slice(e+1)))}var u=Math.max(r.minCellWidth(),i[t]+n),c=i[t]-u;return a(i.slice(0,t)).concat([u-i[t],c]).concat(a(i.slice(e+1)))},f=l;return u.fold(c,(function(t){return r.singleColumnWidth(i[t],n)}),f,(function(t,e,n){return l(e,n)}),(function(t,e){if(n>=0)return a(i.slice(0,e)).concat([n]);var o=Math.max(r.minCellWidth(),i[e]+n);return a(i.slice(0,e)).concat([o-i[e]])}))},ki=function(t,e){return st(t,e)&&parseInt(ft(t,e),10)>1},_i={hasColspan:function(t){return ki(t,"colspan")},hasRowspan:function(t){return ki(t,"rowspan")},minWidth:o(10),minHeight:o(10),getInt:function(t,e){return parseInt(Dt(t,e),10)}},Ii=function(t,e,n){return Et(t,e).fold((function(){return n(t)+"px"}),(function(t){return t}))},Ni=function(t,e){return Ii(t,"width",(function(t){return Lr.getPixelWidth(t,e)}))},Pi=function(t){return Ii(t,"height",Lr.getHeight)},Bi=function(t,e,n,r,o){var i=wo(t),u=R(i,(function(t){return t.map(e.edge)}));return R(i,(function(t,e){return t.filter(a(_i.hasColspan)).fold((function(){var t=bo(u,e);return r(t)}),(function(t){return n(t,o)}))}))},Mi=function(t){return t.map((function(t){return t+"px"})).getOr("")},Li=function(t,e,n,r){var o=xo(t),i=R(o,(function(t){return t.map(e.edge)}));return R(o,(function(t,e){return t.filter(a(_i.hasRowspan)).fold((function(){var t=bo(i,e);return r(t)}),(function(t){return n(t)}))}))},ji={getRawWidths:function(t,e,n){return Bi(t,e,Ni,Mi,n)},getPixelWidths:function(t,e,n){return Bi(t,e,Lr.getPixelWidth,(function(t){return t.getOrThunk(n.minCellWidth)}),n)},getPercentageWidths:function(t,e,n){return Bi(t,e,Lr.getPercentageWidth,(function(t){return t.fold((function(){return n.minCellWidth()}),(function(t){return t/n.pixelWidth()*100}))}),n)},getPixelHeights:function(t,e){return Li(t,e,Lr.getHeight,(function(t){return t.getOrThunk(_i.minHeight)}))},getRawHeights:function(t,e){return Li(t,e,Pi,Mi)}},Ui=function(t,e,n){for(var r=0,o=t;o<e;o++)r+=void 0!==n[o]?n[o]:0;return r},Wi=function(t,e){var n=rn.justCells(t);return R(n,(function(t){var n=Ui(t.column(),t.column()+t.colspan(),e);return{element:t.element,width:o(n),colspan:t.colspan}}))},Fi=function(t,e){var n=rn.justCells(t);return R(n,(function(t){var n=Ui(t.row(),t.row()+t.rowspan(),e);return{element:t.element,height:o(n),rowspan:t.rowspan}}))},zi=function(t,e){return R(t.all(),(function(t,n){return{element:t.element,height:o(e[n])}}))},Hi=function(t){var e=i;return{width:o(t),pixelWidth:o(t),getWidths:ji.getPixelWidths,getCellDelta:e,singleColumnWidth:function(t,e){return[Math.max(_i.minWidth(),t+e)-t]},minCellWidth:_i.minWidth,setElementWidth:Lr.setPixelWidth,setTableWidth:function(t,e,n){var r=E(e,(function(t,e){return t+e}),0);Lr.setPixelWidth(t,r)}}},qi=function(t,e){var n=Lr.percentageBasedSizeRegex().exec(e);if(null!==n)return function(t,e){var n=parseFloat(t),r=Sr(e);return{width:o(n),pixelWidth:o(r),getWidths:ji.getPercentageWidths,getCellDelta:function(t){return t/r*100},singleColumnWidth:function(t,e){return[100-t]},minCellWidth:function(){return _i.minWidth()/r*100},setElementWidth:Lr.setPercentageWidth,setTableWidth:function(t,e,r){var o=r/100*n;Lr.setPercentageWidth(t,n+o)}}}(n[1],t);var r=Lr.pixelBasedSizeRegex().exec(e);if(null!==r){var i=parseInt(r[1],10);return Hi(i)}var u=Sr(t);return Hi(u)},Vi=function(t){return Lr.getRawWidth(t).fold((function(){var e=Sr(t);return Hi(e)}),(function(e){return qi(t,e)}))},Gi=function(t){return rn.generate(t)},Ki=function(t){var e=Qe(t);return Gi(e)},Xi=function(t,e,n,r){var o=Vi(t),i=o.getCellDelta(e),u=Ki(t),a=o.getWidths(u,r,o),c=Ei(a,n,i,o),l=R(c,(function(t,e){return t+a[e]})),f=Wi(u,l);D(f,(function(t){o.setElementWidth(t.element(),t.width())})),n===u.grid().columns()-1&&o.setTableWidth(t,l,i)},Yi=function(t,e,n,r){var o=Ki(t),i=ji.getPixelHeights(o,r),u=R(i,(function(t,r){return n===r?Math.max(e+t,_i.minHeight()):t})),a=Fi(o,u),c=zi(o,u);D(c,(function(t){Lr.setHeight(t.element(),t.height())})),D(a,(function(t){Lr.setHeight(t.element(),t.height())}));var l=E(u,(function(t,e){return t+e}),0);Lr.setHeight(t,l)},$i=function(t,e,n){var r=Vi(t),o=Gi(e),i=r.getWidths(o,n,r),u=Wi(o,i);D(u,(function(t){r.setElementWidth(t.element(),t.width())})),u.length>0&&r.setTableWidth(t,i,r.getCellDelta(0))},Ji=function(t,e,n){if(0===e.length)throw new Error("You must specify at least one required field.");return X("required",e),Y(e),function(r){var o=L(r);B(e,(function(t){return T(o,t)}))||G(e,o),t(e,o);var i=A(e,(function(t){return!n.validate(r[t],t)}));return i.length>0&&function(t,e){throw new Error("All values need to be of type: "+e+". Keys ("+V(t).join(", ")+") were not.")}(i,n.label),r}},Zi=function(t,e){var n=A(e,(function(e){return!T(t,e)}));n.length>0&&K(n)},Qi=function(t){return function(t,e){return Ji(t,e,{validate:y,label:"function"})}(Zi,t)},tu=Qi(["cell","row","replace","gap"]),eu=function(t){var e=st(t,"colspan")?parseInt(ft(t,"colspan"),10):1,n=st(t,"rowspan")?parseInt(ft(t,"rowspan"),10):1;return{element:o(t),colspan:o(e),rowspan:o(n)}},nu=function(t,n){void 0===n&&(n=eu),tu(t);var r=e(m.none()),o=function(e){return function(e){return t.cell(e)}(n(e))},i=function(t){var e=o(t);return r.get().isNone()&&r.set(m.some(e)),u=m.some({item:t,replacement:e}),e},u=m.none();return{getOrInit:function(t,e){return u.fold((function(){return i(t)}),(function(n){return e(t,n.item)?n.replacement:i(t)}))},cursor:r.get}},ru=function(t,n){return function(r){var o=e(m.none());tu(r);var i=[],u=function(e){var u={scope:t},a=r.replace(e,n,u);return i.push({item:e,sub:a}),o.get().isNone()&&o.set(m.some(a)),a};return{replaceOrInit:function(t,e){return function(t,e){return _(i,(function(n){return e(n.item,t)}))}(t,e).fold((function(){return u(t)}),(function(n){return e(t,n.item)?n.sub:u(t)}))},cursor:o.get}}},ou=function(t){tu(t);var n=e(m.none());return{combine:function(e){return n.get().isNone()&&n.set(m.some(e)),function(){var n=t.cell({element:o(e),colspan:o(1),rowspan:o(1)});return kt(n,"width"),kt(e,"width"),n}},cursor:n.get}},iu=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],uu=function(t,e){var n=t.property().name(e);return T(iu,n)},au=function(t,e){return T(["br","img","hr","input"],t.property().name(e))},cu=uu,lu=function(t,e){var n=t.property().name(e);return T(["ol","ul"],n)},fu=au,su=zn(),du=function(t){return cu(su,t)},mu=function(t){return lu(su,t)},pu=function(t){return fu(su,t)},gu=function(t){var e,n=function(t){return"br"===et(t)},r=function(t){return hn(t).bind((function(e){var r=se(e).map((function(t){return!!du(t)||!!pu(t)&&"img"!==et(t)})).getOr(!1);return ce(e).map((function(o){return!0===r||function(t){return"li"===et(t)||We(t,mu).isSome()}(o)||n(e)||du(o)&&!oe(t,o)?[]:[wt.fromTag("br")]}))})).getOr([])},o=0===(e=P(t,(function(t){var e=de(t);return function(t){return B(t,(function(t){return n(t)||ut(t)&&0===ln(t).trim().length}))}(e)?[]:e.concat(r(t))}))).length?[wt.fromTag("br")]:e;xe(t[0]),we(t[0],o)},hu=function(t){0===Ze.cells(t).length&&Ce(t)},vu=q("grid","cursor"),bu=function(t,e,n){return yu(t,e,n).orThunk((function(){return yu(t,0,0)}))},yu=function(t,e,n){return m.from(t[e]).bind((function(t){return m.from(t.cells()[n]).bind((function(t){return m.from(t.element())}))}))},wu=function(t,e,n){return vu(t,yu(t,e,n))},xu=function(t){return k(t,(function(t,e){return O(t,(function(t){return t.row()===e.row()}))?t:t.concat([e])}),[]).sort((function(t,e){return t.row()-e.row()}))},Cu=function(t){return k(t,(function(t,e){return O(t,(function(t){return t.column()===e.column()}))?t:t.concat([e])}),[]).sort((function(t,e){return t.column()-e.column()}))},Su=function(t,e,n){var r=tn(t,n),o=rn.generate(r);return Go(o,e,!0)},Tu=$i,Ou={insertRowBefore:$o((function(t,e,n,r){var o=e.row(),i=e.row(),u=hi(t,i,o,n,r.getOrInit);return wu(u,i,e.column())}),Jo,n,n,nu),insertRowsBefore:$o((function(t,e,n,r){var o=e[0].row(),i=e[0].row(),u=xu(e),a=k(u,(function(t,e){return hi(t,i,o,n,r.getOrInit)}),t);return wu(a,i,e[0].column())}),Qo,n,n,nu),insertRowAfter:$o((function(t,e,n,r){var o=e.row(),i=e.row()+e.rowspan(),u=hi(t,i,o,n,r.getOrInit);return wu(u,i,e.column())}),Jo,n,n,nu),insertRowsAfter:$o((function(t,e,n,r){var o=xu(e),i=o[o.length-1].row(),u=o[o.length-1].row()+o[o.length-1].rowspan(),a=k(o,(function(t,e){return hi(t,u,i,n,r.getOrInit)}),t);return wu(a,u,e[0].column())}),Qo,n,n,nu),insertColumnBefore:$o((function(t,e,n,r){var o=e.column(),i=e.column(),u=vi(t,i,o,n,r.getOrInit);return wu(u,e.row(),i)}),Jo,Tu,n,nu),insertColumnsBefore:$o((function(t,e,n,r){var o=Cu(e),i=o[0].column(),u=o[0].column(),a=k(o,(function(t,e){return vi(t,u,i,n,r.getOrInit)}),t);return wu(a,e[0].row(),u)}),Qo,Tu,n,nu),insertColumnAfter:$o((function(t,e,n,r){var o=e.column(),i=e.column()+e.colspan(),u=vi(t,i,o,n,r.getOrInit);return wu(u,e.row(),i)}),Jo,Tu,n,nu),insertColumnsAfter:$o((function(t,e,n,r){var o=e[e.length-1].column(),i=e[e.length-1].column()+e[e.length-1].colspan(),u=Cu(e),a=k(u,(function(t,e){return vi(t,i,o,n,r.getOrInit)}),t);return wu(a,e[0].row(),i)}),Qo,Tu,n,nu),splitCellIntoColumns:$o((function(t,e,n,r){var o=bi(t,e.row(),e.column(),n,r.getOrInit);return wu(o,e.row(),e.column())}),Jo,Tu,n,nu),splitCellIntoRows:$o((function(t,e,n,r){var o=yi(t,e.row(),e.column(),n,r.getOrInit);return wu(o,e.row(),e.column())}),Jo,n,n,nu),eraseColumns:$o((function(t,e,n,r){var o=Cu(e),i=xi(t,o[0].column(),o[o.length-1].column()),u=bu(i,e[0].row(),e[0].column());return vu(i,u)}),Qo,Tu,hu,nu),eraseRows:$o((function(t,e,n,r){var o=xu(e),i=wi(t,o[0].row(),o[o.length-1].row()),u=bu(i,e[0].row(),e[0].column());return vu(i,u)}),Qo,n,hu,nu),makeColumnHeader:$o((function(t,e,n,r){var o=Oi(t,e.column(),n,r.replaceOrInit);return wu(o,e.row(),e.column())}),Jo,n,n,ru("row","th")),unmakeColumnHeader:$o((function(t,e,n,r){var o=Oi(t,e.column(),n,r.replaceOrInit);return wu(o,e.row(),e.column())}),Jo,n,n,ru(null,"td")),makeRowHeader:$o((function(t,e,n,r){var o=Ri(t,e.row(),n,r.replaceOrInit);return wu(o,e.row(),e.column())}),Jo,n,n,ru("col","th")),unmakeRowHeader:$o((function(t,e,n,r){var o=Ri(t,e.row(),n,r.replaceOrInit);return wu(o,e.row(),e.column())}),Jo,n,n,ru(null,"td")),mergeCells:$o((function(t,e,n,r){var i=e.cells();gu(i);var u=fi(t,e.bounds(),n,o(i[0]));return vu(u,m.from(i[0]))}),(function(t,e){return e.mergable()}),n,n,ou),unmergeCells:$o((function(t,e,n,r){var o=E(e,(function(t,e){return si(t,e,n,r.combine(e))}),t);return vu(o,m.from(e[0]))}),(function(t,e){return e.unmergable()}),Tu,n,ou),pasteCells:$o((function(t,e,n,r){var o=function(t,e){var n=Qe(t),r=rn.generate(n);return Go(r,e,!0)}(e.clipboard(),e.generators()),i=Oe(e.row(),e.column());return pi(i,t,o,e.generators(),n).fold((function(){return vu(t,m.some(e.element()))}),(function(t){var n=bu(t,e.row(),e.column());return vu(t,n)}))}),(function(t,e){return Ze.cell(e.element()).bind((function(n){return Yo(t,n).map((function(t){return Nt(Nt({},t),{generators:e.generators,clipboard:e.clipboard})}))}))}),Tu,n,nu),pasteRowsBefore:$o((function(t,e,n,r){var o=t[e.cells[0].row()],i=e.cells[0].row(),u=Su(e.clipboard(),e.generators(),o),a=gi(i,t,u,e.generators(),n),c=bu(a,e.cells[0].row(),e.cells[0].column());return vu(a,c)}),Zo,n,n,nu),pasteRowsAfter:$o((function(t,e,n,r){var o=t[e.cells[0].row()],i=e.cells[e.cells.length-1].row()+e.cells[e.cells.length-1].rowspan(),u=Su(e.clipboard(),e.generators(),o),a=gi(i,t,u,e.generators(),n),c=bu(a,e.cells[0].row(),e.cells[0].column());return vu(a,c)}),Zo,n,n,nu)},Ru=function(t){return wt.fromDom(t.getBody())},Du=function(t){return t.getBoundingClientRect().width},Au=function(t){return t.getBoundingClientRect().height},Eu=function(t){return function(e){return oe(e,Ru(t))}},ku=function(t){return/^[0-9]+$/.test(t)&&(t+="px"),t},_u=function(t){var e=je(t,"td[data-mce-style],th[data-mce-style]");dt(t,"data-mce-style"),D(e,(function(t){dt(t,"data-mce-style")}))},Iu={isRtl:o(!1)},Nu={isRtl:o(!0)},Pu={directionAt:function(t){return"rtl"===function(t){return"rtl"===Dt(t,"direction")?"rtl":"ltr"}(t)?Nu:Iu}},Bu={"border-collapse":"collapse",width:"100%"},Mu={border:"1"},Lu=function(t){return t.getParam("table_default_attributes",Mu,"object")},ju=function(t){return t.getParam("table_default_styles",Bu,"object")},Uu=function(t){return t.getParam("table_tab_navigation",!0,"boolean")},Wu=function(t){return t.getParam("table_cell_advtab",!0,"boolean")},Fu=function(t){return t.getParam("table_row_advtab",!0,"boolean")},zu=function(t){return t.getParam("table_advtab",!0,"boolean")},Hu=function(t){return t.getParam("table_style_by_css",!1,"boolean")},qu=function(t){return t.getParam("table_class_list",[],"array")},Vu=function(t){return!1===t.getParam("table_responsive_width")},Gu=function(t){var e=t.getParam("table_clone_elements");return h(e)?m.some(e.split(/[ ,]/)):Array.isArray(e)?m.some(e):m.none()},Ku=function(t,e){return t.fire("newrow",{node:e})},Xu=function(t,e){return t.fire("newcell",{node:e})},Yu=function(t,e,n,r){t.fire("ObjectResizeStart",{target:e,width:n,height:r})},$u=function(t,e,n,r){t.fire("ObjectResized",{target:e,width:n,height:r})},Ju=function(t,e,n,r,o){t.fire("TableSelectionChange",{cells:e,start:n,finish:r,otherCells:o})},Zu=function(t){t.fire("TableSelectionClear")},Qu=function(t,e){var r=function(t){return"table"===et(Ru(t))},o=Gu(t),i=function(e,n,r,i){return function(u,a){_u(u);var c=i(),l=wt.fromDom(t.getDoc()),f=eo(Pu.directionAt),s=Rn.cellOperations(r,l,o);return n(u)?e(c,u,a,s,f).bind((function(e){return D(e.newRows(),(function(e){Ku(t,e.dom())})),D(e.newCells(),(function(e){Xu(t,e.dom())})),e.cursor().map((function(e){var n=t.dom.createRng();return n.setStart(e.dom(),0),n.setEnd(e.dom(),0),n}))})):m.none()}};return{deleteRow:i(Ou.eraseRows,(function(e){var n=ro(e);return!1===r(t)||n.rows()>1}),n,e),deleteColumn:i(Ou.eraseColumns,(function(e){var n=ro(e);return!1===r(t)||n.columns()>1}),n,e),insertRowsBefore:i(Ou.insertRowsBefore,l,n,e),insertRowsAfter:i(Ou.insertRowsAfter,l,n,e),insertColumnsBefore:i(Ou.insertColumnsBefore,l,jr,e),insertColumnsAfter:i(Ou.insertColumnsAfter,l,jr,e),mergeCells:i(Ou.mergeCells,l,n,e),unmergeCells:i(Ou.unmergeCells,l,n,e),pasteRowsBefore:i(Ou.pasteRowsBefore,l,n,e),pasteRowsAfter:i(Ou.pasteRowsAfter,l,n,e),pasteCells:i(Ou.pasteCells,l,n,e)}},ta=function(t,e,n){var r=Qe(t),o=rn.generate(r);return Qo(o,e).map((function(t){var e=Go(o,n,!1).slice(t[0].row(),t[t.length-1].row()+t[t.length-1].rowspan()),r=Xo(e,n);return co(r)}))},ea=tinymce.util.Tools.resolve("tinymce.util.Tools"),na=function(t,e,n){n&&t.formatter.apply("align"+n,{},e)},ra=function(t,e,n){n&&t.formatter.apply("valign"+n,{},e)},oa=function(t,e){ea.each("left center right".split(" "),(function(n){t.formatter.remove("align"+n,{},e)}))},ia=function(t,e){ea.each("top middle bottom".split(" "),(function(n){t.formatter.remove("valign"+n,{},e)}))},ua=function(t,e,n){var r;return r=function(e,r){for(var o=0;o<r.length;o++){var i=t.getStyle(r[o],n);if(void 0===e&&(e=i),e!==i)return""}return e}(r,t.select("td,th",e))},aa=function(t,e){var n=function(e){return ht(e,"rgb")?t.toHex(e):e};return{borderwidth:Et(wt.fromDom(e),"border-width").getOr(""),borderstyle:Et(wt.fromDom(e),"border-style").getOr(""),bordercolor:Et(wt.fromDom(e),"border-color").map(n).getOr(""),backgroundcolor:Et(wt.fromDom(e),"background-color").map(n).getOr("")}},ca=function(t,e,n,r,o){var i={};return ea.each(t.split(" "),(function(t){r.formatter.matchNode(o,e+t)&&(i[n]=t)})),i[n]||(i[n]=""),i},la=u(ca,"left center right"),fa=u(ca,"top middle bottom"),sa=function(t,e,n){return function t(n,r){return r=r||[],ea.each(n,(function(n){var o={text:n.text||n.title};n.menu?o.menu=t(n.menu):(o.value=n.value,e&&e(o)),r.push(o)})),r}(t,n||[])},da=function(t){var e=t[0],n=t.slice(1),r=L(e);return D(n,(function(t){D(r,(function(n){U(t,(function(t,r){var o=e[n];""!==o&&n===r&&o!==t&&(e[n]="")}))}))})),e},ma=function(t){var e=[{name:"borderstyle",type:"selectbox",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}];return{title:"Advanced",name:"advanced",items:"cell"===t?[{name:"borderwidth",type:"input",label:"Border width"}].concat(e):e}},pa=function(t,e,n){var r=t.dom;return Nt(Nt({width:r.getStyle(e,"width")||r.getAttrib(e,"width"),height:r.getStyle(e,"height")||r.getAttrib(e,"height"),cellspacing:r.getStyle(e,"border-spacing")||r.getAttrib(e,"cellspacing"),cellpadding:r.getAttrib(e,"cellpadding")||ua(t.dom,e,"padding"),border:function(e,n){var r=Et(wt.fromDom(n),"border-width");return Hu(t)&&r.isSome()?r.getOr(""):e.getAttrib(n,"border")||ua(t.dom,n,"border-width")||ua(t.dom,n,"border")}(r,e),caption:!!r.select("caption",e)[0],class:r.getAttrib(e,"class","")},la("align","align",t,e)),n?aa(r,e):{})},ga=function(t,e,n){var r=t.dom;return Nt(Nt({height:r.getStyle(e,"height")||r.getAttrib(e,"height"),scope:r.getAttrib(e,"scope"),class:r.getAttrib(e,"class",""),align:"",type:e.parentNode.nodeName.toLowerCase()},la("align","align",t,e)),n?aa(r,e):{})},ha=function(t,e,n){var r=t.dom;return Nt(Nt(Nt({width:r.getStyle(e,"width")||r.getAttrib(e,"width"),height:r.getStyle(e,"height")||r.getAttrib(e,"height"),scope:r.getAttrib(e,"scope"),celltype:e.nodeName.toLowerCase(),class:r.getAttrib(e,"class","")},la("align","halign",t,e)),fa("valign","valign",t,e)),n?aa(r,e):{})},va=function(t,e){var n,r,o,i=ju(t),u=Lu(t),a=t.dom,c=e?function(t){var e=function(e){return ht(e,"rgb")?t.toHex(e):e},n=z(i,"border-style").getOr(""),r=z(i,"border-color").getOr(""),o=z(i,"background-color").getOr("");return{borderstyle:n,bordercolor:e(r),backgroundcolor:e(o)}}(a):{};return Nt(Nt(Nt(Nt(Nt(Nt({},{height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:""}),i),u),c),(o=i["border-width"],Hu(t)&&o?{border:o}:z(u,"border").fold((function(){return{}}),(function(t){return{border:t}})))),(n=z(i,"border-spacing").or(z(u,"cellspacing")).fold((function(){return{}}),(function(t){return{cellspacing:t}})),r=z(i,"border-padding").or(z(u,"cellpadding")).fold((function(){return{}}),(function(t){return{cellpadding:t}})),Nt(Nt({},n),r)))},ba=[{name:"width",type:"input",label:"Width"},{name:"height",type:"input",label:"Height"},{name:"celltype",type:"selectbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"selectbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"selectbox",label:"H Align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"selectbox",label:"V Align",items:[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}]}],ya=function(t){return function(t){var e=function(t){return t.getParam("table_cell_class_list",[],"array")}(t),n=sa(e,(function(e){e.value&&(e.textStyle=function(){return t.formatter.getCssText({block:"tr",classes:[e.value]})})}));return e.length>0?m.some({name:"class",type:"selectbox",label:"Class",items:n}):m.none()}(t).fold((function(){return ba}),(function(t){return ba.concat(t)}))},wa={normal:function(t,e){return{setAttrib:function(n,r){t.setAttrib(e,n,r)},setStyle:function(n,r){t.setStyle(e,n,r)}}},ifTruthy:function(t,e){return{setAttrib:function(n,r){r&&t.setAttrib(e,n,r)},setStyle:function(n,r){r&&t.setStyle(e,n,r)}}}},xa=function(t,e){t.setAttrib("scope",e.scope),t.setAttrib("class",e.class),t.setStyle("width",ku(e.width)),t.setStyle("height",ku(e.height))},Ca=function(t,e){t.setStyle("background-color",e.backgroundcolor),t.setStyle("border-color",e.bordercolor),t.setStyle("border-style",e.borderstyle),t.setStyle("border-width",ku(e.borderwidth))},Sa=function(t,e,n){var r=t.dom,o=n.celltype&&e[0].nodeName.toLowerCase()!==n.celltype?r.rename(e[0],n.celltype):e[0],i=wa.normal(r,o);xa(i,n),Wu(t)&&Ca(i,n),oa(t,o),ia(t,o),n.halign&&na(t,o,n.halign),n.valign&&ra(t,o,n.valign)},Ta=function(t,e,n){var r=t.dom;ea.each(e,(function(e){n.celltype&&e.nodeName.toLowerCase()!==n.celltype&&(e=r.rename(e,n.celltype));var o=wa.ifTruthy(r,e);xa(o,n),Wu(t)&&Ca(o,n),n.halign&&na(t,e,n.halign),n.valign&&ra(t,e,n.valign)}))},Oa=function(t,e,n){var r=n.getData();n.close(),t.undoManager.transact((function(){(1===e.length?Sa:Ta)(t,e,r),t.focus()}))},Ra=function(t){var e,n=[];if(n=t.dom.select("td[data-mce-selected],th[data-mce-selected]"),e=t.dom.getParent(t.selection.getStart(),"td,th"),!n.length&&e&&n.push(e),e=e||n[0]){var r=ea.map(n,(function(e){return ha(t,e,Wu(t))})),o=da(r),i={type:"tabpanel",tabs:[{title:"General",name:"general",items:ya(t)},ma("cell")]},a={type:"panel",items:[{type:"grid",columns:2,items:ya(t)}]};t.windowManager.open({title:"Cell Properties",size:"normal",body:Wu(t)?i:a,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:o,onSubmit:u(Oa,t,n)})}},Da=[{type:"selectbox",name:"type",label:"Row type",items:[{text:"Header",value:"thead"},{text:"Body",value:"tbody"},{text:"Footer",value:"tfoot"}]},{type:"selectbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],Aa=function(t){return function(t){var e=function(t){return t.getParam("table_row_class_list",[],"array")}(t),n=sa(e,(function(e){e.value&&(e.textStyle=function(){return t.formatter.getCssText({block:"tr",classes:[e.value]})})}));return e.length>0?m.some({name:"class",type:"selectbox",label:"Class",items:n}):m.none()}(t).fold((function(){return Da}),(function(t){return Da.concat(t)}))},Ea=function(t,e,n,r){var o=t.dom,i=r.getData();r.close();var u=1===e.length?wa.normal:wa.ifTruthy;t.undoManager.transact((function(){ea.each(e,(function(e){i.type!==e.parentNode.nodeName.toLowerCase()&&function(t,e,n){var r=t.getParent(e,"table"),o=e.parentNode,i=t.select(n,r)[0];i||(i=t.create(n),r.firstChild?"CAPTION"===r.firstChild.nodeName?t.insertAfter(i,r.firstChild):r.insertBefore(i,r.firstChild):r.appendChild(i)),i.appendChild(e),o.hasChildNodes()||t.remove(o)}(t.dom,e,i.type);var r=u(o,e);r.setAttrib("scope",i.scope),r.setAttrib("class",i.class),r.setStyle("height",ku(i.height)),Fu(t)&&function(t,e){t.setStyle("background-color",e.backgroundcolor),t.setStyle("border-color",e.bordercolor),t.setStyle("border-style",e.borderstyle)}(r,i),i.align!==n.align&&(oa(t,e),na(t,e,i.align))})),t.focus()}))},ka=function(t){var e,n,r=t.dom,o=[];if((e=r.getParent(t.selection.getStart(),"table"))&&(n=r.getParent(t.selection.getStart(),"td,th"),ea.each(e.rows,(function(t){ea.each(t.cells,(function(e){if((r.getAttrib(e,"data-mce-selected")||e===n)&&o.indexOf(t)<0)return o.push(t),!1}))})),o[0])){var i=ea.map(o,(function(e){return ga(t,e,Fu(t))})),a=da(i),c={type:"tabpanel",tabs:[{title:"General",name:"general",items:Aa(t)},ma("row")]},l={type:"panel",items:[{type:"grid",columns:2,items:Aa(t)}]};t.windowManager.open({title:"Row Properties",size:"normal",body:Fu(t)?c:l,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:a,onSubmit:u(Ea,t,o,a)})}},_a=Object.prototype.hasOwnProperty,Ia=(no=function(t,e){return e},function(){for(var t=new Array(arguments.length),e=0;e<t.length;e++)t[e]=arguments[e];if(0===t.length)throw new Error("Can't merge zero objects");for(var n={},r=0;r<t.length;r++){var o=t[r];for(var i in o)_a.call(o,i)&&(n[i]=no(n[i],o[i]))}return n}),Na=tinymce.util.Tools.resolve("tinymce.Env"),Pa={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},percentages:!0},Ba=function(t,e,n,r,o){void 0===o&&(o=Pa);var i=wt.fromTag("table");Rt(i,o.styles),lt(i,o.attributes);var u=wt.fromTag("tbody");ve(i,u);for(var a=[],c=0;c<t;c++){for(var l=wt.fromTag("tr"),f=0;f<e;f++){var s=c<n||f<r?wt.fromTag("th"):wt.fromTag("td");f<r&&ct(s,"scope","row"),c<n&&ct(s,"scope","col"),ve(s,wt.fromTag("br")),o.percentages&&Ot(s,"width",100/e+"%"),ve(l,s)}a.push(l)}return we(u,a),i},Ma=function(t,e){t.selection.select(e.dom(),!0),t.selection.collapse(!0)},La=function(t,e,n){var r,o=ju(t),i={styles:o,attributes:Lu(t),percentages:(r=o.width,h(r)&&-1!==r.indexOf("%")&&!Vu(t))},a=Ba(n,e,0,0,i);ct(a,"data-mce-id","__mce");var c=function(t){var e=wt.fromTag("div"),n=wt.fromDom(t.dom().cloneNode(!0));return ve(e,n),function(t){return t.dom().innerHTML}(e)}(a);return t.insertContent(c),He(Ru(t),'table[data-mce-id="__mce"]').map((function(e){return Vu(t)&&Ot(e,"width",Dt(e,"width")),dt(e,"data-mce-id"),function(t,e){D(je(e,"tr"),(function(e){Ku(t,e.dom()),D(je(e,"th,td"),(function(e){Xu(t,e.dom())}))}))}(t,e),function(t,e){He(e,"td,th").each(u(Ma,t))}(t,e),e.dom()})).getOr(null)},ja=function(t,e,n){var r=n?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[],o=function(t){return t.getParam("table_appearance_options",!0,"boolean")}(t)?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],i=e?[{type:"selectbox",name:"class",label:"Class",items:sa(qu(t),(function(e){e.value&&(e.textStyle=function(){return t.formatter.getCssText({block:"table",classes:[e.value]})})}))}]:[];return r.concat([{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}]).concat(o).concat([{type:"selectbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}]).concat(i)},Ua=function t(e,n,r,o){if("TD"===n.tagName||"TH"===n.tagName)h(r)?e.setStyle(n,r,o):e.setStyle(n,r);else if(n.children)for(var i=0;i<n.children.length;i++)t(e,n.children[i],r,o)},Wa=function(t,e,n){var r,o=t.dom,i=n.getData();n.close(),""===i.class&&delete i.class,t.undoManager.transact((function(){if(!e){var n=parseInt(i.cols,10)||1,u=parseInt(i.rows,10)||1;e=La(t,n,u)}!function(t,e,n){var r,o=t.dom,i={},u={};if(i.class=n.class,u.height=ku(n.height),o.getAttrib(e,"width")&&!Hu(t)?i.width=(r=n.width)?r.replace(/px$/,""):"":u.width=ku(n.width),Hu(t)?(u["border-width"]=ku(n.border),u["border-spacing"]=ku(n.cellspacing)):(i.border=n.border,i.cellpadding=n.cellpadding,i.cellspacing=n.cellspacing),Hu(t)&&e.children)for(var a=0;a<e.children.length;a++)Ua(o,e.children[a],{"border-width":ku(n.border),padding:ku(n.cellpadding)}),zu(t)&&Ua(o,e.children[a],{"border-color":n.bordercolor});zu(t)&&(u["background-color"]=n.backgroundcolor,u["border-color"]=n.bordercolor,u["border-style"]=n.borderstyle),i.style=o.serializeStyle(Ia(ju(t),u)),o.setAttribs(e,Ia(Lu(t),i))}(t,e,i),(r=o.select("caption",e)[0])&&!i.caption&&o.remove(r),!r&&i.caption&&((r=o.create("caption")).innerHTML=Na.ie?"Â ":'<br data-mce-bogus="1"/>',e.insertBefore(r,e.firstChild)),""===i.align?oa(t,e):na(t,e,i.align),t.focus(),t.addVisual()}))},Fa=function(t,e){var n,r=t.dom,o=va(t,zu(t));!1===e?(n=r.getParent(t.selection.getStart(),"table"))?o=pa(t,n,zu(t)):zu(t)&&(o.borderstyle="",o.bordercolor="",o.backgroundcolor=""):(o.cols="1",o.rows="1",zu(t)&&(o.borderstyle="",o.bordercolor="",o.backgroundcolor=""));var i=qu(t).length>0;i&&o.class&&(o.class=o.class.replace(/\s*mce\-item\-table\s*/g,""));var a={type:"grid",columns:2,items:ja(t,i,e)},c=zu(t)?{type:"tabpanel",tabs:[{title:"General",name:"general",items:[a]},ma("table")]}:{type:"panel",items:[a]};t.windowManager.open({title:"Table Properties",size:"normal",body:c,onSubmit:u(Wa,t,n),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:o})},za=function(t){return function(e){return m.from(e.dom.getParent(e.selection.getStart(),t)).map(wt.fromDom)}},Ha=za("th,td"),qa=za("th,td,caption"),Va=ea.each,Ga={registerCommands:function(t,e,r,o,i){var c=Eu(t),l=function(t){return Ze.table(t,c)},f=function(t){return{width:Du(t.dom()),height:Du(t.dom())}},s=function(e){Ha(t).each((function(n){l(n).each((function(i){var u=hr.forMenu(o,i,n),a=f(i);e(i,u).each((function(e){!function(t,e,n){var r=f(n);e.width===r.width&&e.height===r.height||(Yu(t,n.dom(),e.width,e.height),$u(t,n.dom(),r.width,r.height))}(t,a,i),t.selection.setRng(e),t.focus(),r.clear(i),_u(i)}))}))}))},d=function(e){return Ha(t).map((function(e){return l(e).bind((function(r){var i=wt.fromDom(t.getDoc()),u=hr.forMenu(o,r,e),a=Rn.cellOperations(n,i,m.none());return ta(r,u,a)}))}))},p=function(e){i.get().each((function(n){var i=R(n,(function(t){return wn(t)}));Ha(t).each((function(n){l(n).each((function(u){var a=wt.fromDom(t.getDoc()),c=Rn.paste(a),l=hr.pasteRows(o,u,n,i,c);e(u,l).each((function(e){t.selection.setRng(e),t.focus(),r.clear(u)}))}))}))}))};Va({mceTableSplitCells:function(){s(e.unmergeCells)},mceTableMergeCells:function(){s(e.mergeCells)},mceTableInsertRowBefore:function(){s(e.insertRowsBefore)},mceTableInsertRowAfter:function(){s(e.insertRowsAfter)},mceTableInsertColBefore:function(){s(e.insertColumnsBefore)},mceTableInsertColAfter:function(){s(e.insertColumnsAfter)},mceTableDeleteCol:function(){s(e.deleteColumn)},mceTableDeleteRow:function(){s(e.deleteRow)},mceTableCutRow:function(t){d().each((function(t){i.set(t),s(e.deleteRow)}))},mceTableCopyRow:function(t){d().each((function(t){i.set(t)}))},mceTablePasteRowBefore:function(t){p(e.pasteRowsBefore)},mceTablePasteRowAfter:function(t){p(e.pasteRowsAfter)},mceTableDelete:function(){qa(t).each((function(e){Ze.table(e,c).filter(a(c)).each((function(e){var n=wt.fromText("");if(ge(e,n),Ce(e),t.dom.isEmpty(t.getBody()))t.setContent(""),t.selection.setCursorLocation();else{var r=t.dom.createRng();r.setStart(n.dom(),0),r.setEnd(n.dom(),0),t.selection.setRng(r),t.nodeChanged()}}))}))}},(function(e,n){t.addCommand(n,e)})),Va({mceInsertTable:u(Fa,t,!0),mceTableProps:u(Fa,t,!1),mceTableRowProps:u(ka,t),mceTableCellProps:u(Ra,t)},(function(e,n){t.addCommand(n,(function(){e()}))}))}},Ka=function(t){var e=m.from(t.dom().documentElement).map(wt.fromDom).getOr(t);return{parent:o(e),view:o(t),origin:o(Ur(0,0))}},Xa=function(t,e){return{parent:o(e),view:o(t),origin:o(Ur(0,0))}},Ya=function(t){var e=q.apply(null,t),n=[];return{bind:function(t){if(void 0===t)throw new Error("Event bind error: undefined handler");n.push(t)},unbind:function(t){n=A(n,(function(e){return e!==t}))},trigger:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var o=e.apply(null,t);D(n,(function(t){t(o)}))}}},$a={create:function(t){return{registry:W(t,(function(t){return{bind:t.bind,unbind:t.unbind}})),trigger:W(t,(function(t){return t.trigger}))}}},Ja=function(t){var e=wt.fromDom(t.target),n=function(){t.stopPropagation()},i=function(){t.preventDefault()},u=r(i,n);return function(t,e,n,r,i,u,a){return{target:o(t),x:o(e),y:o(n),stop:r,prevent:i,kill:u,raw:o(a)}}(e,t.clientX,t.clientY,n,i,u,t)},Za=function(t,e,n,r,o){var i=function(t,e){return function(n){t(n)&&e(Ja(n))}}(n,r);return t.dom().addEventListener(e,i,o),{unbind:u(Qa,t,e,i,o)}},Qa=function(t,e,n,r){t.dom().removeEventListener(e,n,r)},tc=o(!0),ec=function(t,e,n){return function(t,e,n,r){return Za(t,e,n,r,!1)}(t,e,tc,n)},nc={resolve:Co("ephox-dragster").resolve},rc=Qi(["compare","extract","mutate","sink"]),oc=Qi(["element","start","stop","destroy"]),ic=Qi(["forceDrop","drop","move","delayDrop"]),uc=rc({compare:function(t,e){return Ur(e.left()-t.left(),e.top()-t.top())},extract:function(t){return m.some(Ur(t.x(),t.y()))},sink:function(t,e){var n=function(t){var e=Ia({layerClass:nc.resolve("blocker")},t),n=wt.fromTag("div");ct(n,"role","presentation"),Rt(n,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),po(n,nc.resolve("blocker")),po(n,e.layerClass);return{element:function(){return n},destroy:function(){Ce(n)}}}(e),r=ec(n.element(),"mousedown",t.forceDrop),o=ec(n.element(),"mouseup",t.drop),i=ec(n.element(),"mousemove",t.move),u=ec(n.element(),"mouseout",t.delayDrop);return oc({element:n.element,start:function(t){ve(t,n.element())},stop:function(){Ce(n.element())},destroy:function(){n.destroy(),o.unbind(),i.unbind(),u.unbind(),r.unbind()}})},mutate:function(t,e){t.mutate(e.left(),e.top())}});function ac(){var t=m.none(),e=$a.create({move:Ya(["info"])});return{onEvent:function(n,r){r.extract(n).each((function(n){(function(e,n){var r=t.map((function(t){return e.compare(t,n)}));return t=m.some(n),r})(r,n).each((function(t){e.trigger.move(t)}))}))},reset:function(){t=m.none()},events:e.registry}}function cc(){var t={onEvent:n,reset:n},e=ac(),r=t;return{on:function(){r.reset(),r=e},off:function(){r.reset(),r=t},isOn:function(){return r===e},onEvent:function(t,e){r.onEvent(t,e)},events:e.events}}var lc=function(e,n,r){var o,i,u,a=!1,c=$a.create({start:Ya([]),stop:Ya([])}),l=cc(),f=function(){m.stop(),l.isOn()&&(l.off(),c.trigger.stop())},s=(o=f,i=200,u=null,{cancel:function(){null!==u&&(t.clearTimeout(u),u=null)},throttle:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];null!==u&&t.clearTimeout(u),u=t.setTimeout((function(){o.apply(null,e),u=null}),i)}});l.events.move.bind((function(t){n.mutate(e,t.info())}));var d=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];a&&t.apply(null,e)}},m=n.sink(ic({forceDrop:f,drop:d(f),move:d((function(t){s.cancel(),l.onEvent(t,n)})),delayDrop:d(s.throttle)}),r);return{element:m.element,go:function(t){m.start(t),l.on(),c.trigger.start()},on:function(){a=!0},off:function(){a=!1},destroy:function(){m.destroy()},events:c.registry}},fc=function(t,e){void 0===e&&(e={});var n=void 0!==e.mode?e.mode:uc;return lc(t,n,e)},sc=function(){var t=$a.create({drag:Ya(["xDelta","yDelta","target"])}),e=m.none(),n=function(){var t=$a.create({drag:Ya(["xDelta","yDelta"])});return{mutate:function(e,n){t.trigger.drag(e,n)},events:t.registry}}();n.events.drag.bind((function(n){e.each((function(e){t.trigger.drag(n.xDelta(),n.yDelta(),e)}))}));return{assign:function(t){e=m.some(t)},get:function(){return e},mutate:n.mutate,events:t.registry}},dc=function(t){return"true"===ft(t,"contenteditable")},mc=To.resolve("resizer-bar-dragging"),pc=function(t,e,n){var r=sc(),o=fc(r,{}),i=m.none(),a=function(t,e){return m.from(ft(t,e))};r.events.drag.bind((function(t){a(t.target(),"data-row").each((function(e){var n=_i.getInt(t.target(),"top");Ot(t.target(),"top",n+t.yDelta()+"px")})),a(t.target(),"data-column").each((function(e){var n=_i.getInt(t.target(),"left");Ot(t.target(),"left",n+t.xDelta()+"px")}))}));var c=function(t,e){return _i.getInt(t,e)-parseInt(ft(t,"data-initial-"+e),10)};o.events.stop.bind((function(){r.get().each((function(r){i.each((function(o){a(r,"data-row").each((function(t){var e=c(r,"top");dt(r,"data-initial-top"),g.trigger.adjustHeight(o,e,parseInt(t,10))})),a(r,"data-column").each((function(t){var e=c(r,"left");dt(r,"data-initial-left"),g.trigger.adjustWidth(o,e,parseInt(t,10))})),Po(t,o,n,e)}))}))}));var l=function(e,n){g.trigger.startAdjust(),r.assign(e),ct(e,"data-initial-"+n,parseInt(Dt(e,n),10)),po(e,mc),Ot(e,"opacity","0.2"),o.go(t.parent())},f=ec(t.parent(),"mousedown",(function(t){jo(t.target())&&l(t.target(),"top"),Uo(t.target())&&l(t.target(),"left")})),s=function(e){return oe(e,t.view())},d=function(t){return qe(t,"table",s).filter((function(t){return function(t,e){return qe(t,"[contenteditable]",e)}(t,s).exists(dc)}))},p=ec(t.view(),"mouseover",(function(r){d(r.target()).fold((function(){xt(r.target())&&Lo(t)}),(function(r){i=m.some(r),Po(t,r,n,e)}))})),g=$a.create({adjustHeight:Ya(["table","delta","row"]),adjustWidth:Ya(["table","delta","column"]),startAdjust:Ya([])});return{destroy:function(){f.unbind(),p.unbind(),o.destroy(),Lo(t)},refresh:function(r){Po(t,r,n,e)},on:o.on,off:o.off,hideBars:u(Bo,t),showBars:u(Mo,t),events:g.registry}},gc=function(t,e){var n=Qr.height,r=pc(t,e,n),o=$a.create({beforeResize:Ya(["table"]),afterResize:Ya(["table"]),startDrag:Ya([])});return r.events.adjustHeight.bind((function(t){o.trigger.beforeResize(t.table());var e=n.delta(t.delta(),t.table());Yi(t.table(),e,t.row(),n),o.trigger.afterResize(t.table())})),r.events.startAdjust.bind((function(t){o.trigger.startDrag()})),r.events.adjustWidth.bind((function(t){o.trigger.beforeResize(t.table());var n=e.delta(t.delta(),t.table());Xi(t.table(),n,t.column(),e),o.trigger.afterResize(t.table())})),{on:r.on,off:r.off,hideBars:r.hideBars,showBars:r.showBars,destroy:r.destroy,events:o.registry}},hc=function(t,e){return t.inline?Xa(Ru(t),function(){var t=wt.fromTag("div");return Rt(t,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),ve(Ct(),t),t}()):Ka(wt.fromDom(t.getDoc()))},vc=function(t,e){t.inline&&Ce(e.parent())},bc=function(t,e){return Du(t.dom())/Du(e.dom())*100+"%"},yc=function(t){var e,n,r=m.none(),o=m.none(),i=m.none(),u=/(\d+(\.\d+)?)%/,a=function(t){return"TABLE"===t.nodeName},c=function(e){var n=t.dom.getStyle(e,"width")||t.dom.getAttrib(e,"width");return m.from(n).filter((function(t){return t.length>0}))},l=function(){return o};return t.on("init",(function(){var e=eo(Pu.directionAt),n=hc(t);if(i=m.some(n),function(t){var e=t.getParam("object_resizing",!0);return h(e)?"table"===e:e}(t)&&function(t){return t.getParam("table_resize_bars",!0,"boolean")}(t)){var u=gc(n,e);u.on(),u.events.startDrag.bind((function(e){r=m.some(t.selection.getRng())})),u.events.beforeResize.bind((function(e){var n=e.table().dom();Yu(t,n,Du(n),Au(n))})),u.events.afterResize.bind((function(e){var n=e.table(),o=n.dom();_u(n),r.each((function(e){t.selection.setRng(e),t.focus()})),$u(t,o,Du(o),Au(o)),t.undoManager.add()})),o=m.some(u)}})),t.on("ObjectResizeStart",(function(r){var o=r.target;if(a(o)){var i=c(o).map((function(t){return u.test(t)})).getOr(!1);i&&Vu(t)?function(t){Ot(wt.fromDom(t),"width",Du(t).toString()+"px")}(o):!i&&function(t){return!0===t.getParam("table_responsive_width")}(t)&&function(t){var e=wt.fromDom(t);ce(e).map((function(t){return bc(e,t)})).each((function(t){Ot(e,"width",t),D(je(e,"tr"),(function(t){D(de(t),(function(e){Ot(e,"width",bc(e,t))}))}))}))}(o),e=r.width,n=c(o).getOr("")}})),t.on("ObjectResized",(function(r){var o=r.target;if(a(o)){var i=o;if(u.test(n)){var c=parseFloat(u.exec(n)[1]),l=r.width*c/e;t.dom.setStyle(i,"width",l+"%")}else{var f=[];ea.each(i.rows,(function(e){ea.each(e.cells,(function(e){var n=t.dom.getStyle(e,"width",!0);f.push({cell:e,width:n})}))})),ea.each(f,(function(e){t.dom.setStyle(e.cell,"width",e.width),t.dom.setAttrib(e.cell,"width",null)}))}}})),t.on("SwitchMode",(function(){l().each((function(e){t.readonly?e.hideBars():e.showBars()}))})),{lazyResize:l,lazyWire:function(){return i.getOr(Ka(wt.fromDom(t.getBody())))},destroy:function(){o.each((function(t){t.destroy()})),i.each((function(e){vc(t,e)}))}}},wc=ar([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),xc=Nt(Nt({},wc),{none:function(t){return void 0===t&&(t=void 0),wc.none(t)}}),Cc=function(t,e){return Ze.table(t,e).bind((function(e){var n=Ze.cells(e);return I(n,(function(e){return oe(t,e)})).map((function(t){return{index:o(t),all:o(n)}}))}))},Sc=function(t,e){return Cc(t,e).fold((function(){return xc.none(t)}),(function(e){return e.index()+1<e.all().length?xc.middle(t,e.all()[e.index()+1]):xc.last(t)}))},Tc=function(t,e){return Cc(t,e).fold((function(){return xc.none()}),(function(e){return e.index()-1>=0?xc.middle(t,e.all()[e.index()-1]):xc.first(t)}))},Oc={create:q("start","soffset","finish","foffset")},Rc=ar([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Dc={before:Rc.before,on:Rc.on,after:Rc.after,cata:function(t,e,n,r){return t.fold(e,n,r)},getStart:function(t){return t.fold(i,i,i)}},Ac=ar([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Ec={domRange:Ac.domRange,relative:Ac.relative,exact:Ac.exact,exactFromRange:function(t){return Ac.exact(t.start(),t.soffset(),t.finish(),t.foffset())},getWin:function(t){var e,n=function(t){return t.match({domRange:function(t){return wt.fromDom(t.startContainer)},relative:function(t,e){return Dc.getStart(t)},exact:function(t,e,n,r){return t}})}(t);return e=n,wt.fromDom(e.dom().ownerDocument.defaultView)},range:Oc.create},kc=function(t,e){t.selectNodeContents(e.dom())},_c=function(t,e,n){var r,o=t.document.createRange();return r=o,e.fold((function(t){r.setStartBefore(t.dom())}),(function(t,e){r.setStart(t.dom(),e)}),(function(t){r.setStartAfter(t.dom())})),function(t,e){e.fold((function(e){t.setEndBefore(e.dom())}),(function(e,n){t.setEnd(e.dom(),n)}),(function(e){t.setEndAfter(e.dom())}))}(o,n),o},Ic=function(t,e,n,r,o){var i=t.document.createRange();return i.setStart(e.dom(),n),i.setEnd(r.dom(),o),i},Nc=function(t){return{left:o(t.left),top:o(t.top),right:o(t.right),bottom:o(t.bottom),width:o(t.width),height:o(t.height)}},Pc=ar([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Bc=function(t,e,n){return e(wt.fromDom(n.startContainer),n.startOffset,wt.fromDom(n.endContainer),n.endOffset)},Mc=function(t,e){return function(t,e){var n=e.ltr();return n.collapsed?e.rtl().filter((function(t){return!1===t.collapsed})).map((function(t){return Pc.rtl(wt.fromDom(t.endContainer),t.endOffset,wt.fromDom(t.startContainer),t.startOffset)})).getOrThunk((function(){return Bc(0,Pc.ltr,n)})):Bc(0,Pc.ltr,n)}(0,function(t,e){return e.match({domRange:function(t){return{ltr:o(t),rtl:m.none}},relative:function(e,n){return{ltr:bt((function(){return _c(t,e,n)})),rtl:bt((function(){return m.some(_c(t,n,e))}))}},exact:function(e,n,r,o){return{ltr:bt((function(){return Ic(t,e,n,r,o)})),rtl:bt((function(){return m.some(Ic(t,r,o,e,n))}))}}})}(t,e))},Lc=function(t,e){return Mc(t,e).match({ltr:function(e,n,r,o){var i=t.document.createRange();return i.setStart(e.dom(),n),i.setEnd(r.dom(),o),i},rtl:function(e,n,r,o){var i=t.document.createRange();return i.setStart(r.dom(),o),i.setEnd(e.dom(),n),i}})},jc=function(t,e,n){return e>=t.left&&e<=t.right&&n>=t.top&&n<=t.bottom},Uc=function(t,e,n,r,o){var i=function(n){var r=t.dom().createRange();return r.setStart(e.dom(),n),r.collapse(!0),r},u=ln(e).length,a=function(t,e,n,r,o){if(0===o)return 0;if(e===r)return o-1;for(var i=r,u=1;u<o;u++){var a=t(u),c=Math.abs(e-a.left);if(n<=a.bottom){if(n<a.top||c>i)return u-1;i=c}}return 0}((function(t){return i(t).getBoundingClientRect()}),n,r,o.right,u);return i(a)},Wc=function(t,e,n,r){var o=t.dom().createRange(),i=de(e);return io(i,(function(e){return o.selectNode(e.dom()),jc(o.getBoundingClientRect(),n,r)?Fc(t,e,n,r):m.none()}))},Fc=function(t,e,n,r){return ut(e)?function(t,e,n,r){var o=t.dom().createRange();o.selectNode(e.dom());var i=o.getClientRects();return io(i,(function(t){return jc(t,n,r)?m.some(t):m.none()})).map((function(o){return Uc(t,e,n,r,o)}))}(t,e,n,r):Wc(t,e,n,r)},zc=function(t,e){return e-t.left<t.right-e},Hc=function(t,e,n){var r=t.dom().createRange();return r.selectNode(e.dom()),r.collapse(n),r},qc=function(t,e,n){var r=t.dom().createRange();r.selectNode(e.dom());var o=r.getBoundingClientRect(),i=zc(o,n);return(!0===i?gn:hn)(e).map((function(e){return Hc(t,e,i)}))},Vc=function(t,e,n){var r=e.dom().getBoundingClientRect(),o=zc(r,n);return m.some(Hc(t,e,o))},Gc=function(t,e,n,r){var o=t.dom().createRange();o.selectNode(e.dom());var i=o.getBoundingClientRect();return function(t,e,n,r){var o=t.dom().createRange();o.selectNode(e.dom());var i=o.getBoundingClientRect(),u=Math.max(i.left,Math.min(i.right,n)),a=Math.max(i.top,Math.min(i.bottom,r));return Fc(t,e,u,a)}(t,e,Math.max(i.left,Math.min(i.right,n)),Math.max(i.top,Math.min(i.bottom,r)))},Kc=document.caretPositionFromPoint?function(t,e,n){return m.from(t.dom().caretPositionFromPoint(e,n)).bind((function(e){if(null===e.offsetNode)return m.none();var n=t.dom().createRange();return n.setStart(e.offsetNode,e.offset),n.collapse(),m.some(n)}))}:document.caretRangeFromPoint?function(t,e,n){return m.from(t.dom().caretRangeFromPoint(e,n))}:function(t,e,n){return wt.fromPoint(t,e,n).bind((function(r){var o=function(){return function(t,e,n){return(0===de(e).length?Vc:qc)(t,e,n)}(t,r,e)};return 0===de(r).length?o():Gc(t,r,e,n).orThunk(o)}))},Xc=function(t,e){var n=et(t);return"input"===n?Dc.after(t):T(["br","img"],n)?0===e?Dc.before(t):Dc.after(t):Dc.on(t,e)},Yc=function(t,e){var n=t.fold(Dc.before,Xc,Dc.after),r=e.fold(Dc.before,Xc,Dc.after);return Ec.relative(n,r)},$c=function(t,e,n,r){var o=Xc(t,e),i=Xc(n,r);return Ec.relative(o,i)},Jc=function(t,e,n,r){var o=function(t,e,n,r){var o=ae(t).dom().createRange();return o.setStart(t.dom(),e),o.setEnd(n.dom(),r),o}(t,e,n,r),i=oe(t,n)&&e===r;return o.collapsed&&!i},Zc=function(t,e){m.from(t.getSelection()).each((function(t){t.removeAllRanges(),t.addRange(e)}))},Qc=function(t,e,n,r,o){var i=Ic(t,e,n,r,o);Zc(t,i)},tl=function(t,e){return Mc(t,e).match({ltr:function(e,n,r,o){Qc(t,e,n,r,o)},rtl:function(e,n,r,o){var i=t.getSelection();if(i.setBaseAndExtent)i.setBaseAndExtent(e.dom(),n,r.dom(),o);else if(i.extend)try{!function(t,e,n,r,o,i){e.collapse(n.dom(),r),e.extend(o.dom(),i)}(0,i,e,n,r,o)}catch(u){Qc(t,r,o,e,n)}else Qc(t,r,o,e,n)}})},el=function(t,e,n,r,o){var i=$c(e,n,r,o);tl(t,i)},nl=function(t,e,n){var r=Yc(e,n);tl(t,r)},rl=function(t){var e=Ec.getWin(t).dom(),n=function(t,n,r,o){return Ic(e,t,n,r,o)},r=function(t){return t.match({domRange:function(t){var e=wt.fromDom(t.startContainer),n=wt.fromDom(t.endContainer);return $c(e,t.startOffset,n,t.endOffset)},relative:Yc,exact:$c})}(t);return Mc(e,r).match({ltr:n,rtl:n})},ol=function(t){var e=wt.fromDom(t.anchorNode),n=wt.fromDom(t.focusNode);return Jc(e,t.anchorOffset,n,t.focusOffset)?m.some(Oc.create(e,t.anchorOffset,n,t.focusOffset)):function(t){if(t.rangeCount>0){var e=t.getRangeAt(0),n=t.getRangeAt(t.rangeCount-1);return m.some(Oc.create(wt.fromDom(e.startContainer),e.startOffset,wt.fromDom(n.endContainer),n.endOffset))}return m.none()}(t)},il=function(t,e){var n=function(t,e){var n=t.document.createRange();return kc(n,e),n}(t,e);Zc(t,n)},ul=function(t){return function(t){return m.from(t.getSelection()).filter((function(t){return t.rangeCount>0})).bind(ol)}(t).map((function(t){return Ec.exact(t.start(),t.soffset(),t.finish(),t.foffset())}))},al=function(t,e){return function(t){var e=t.getClientRects(),n=e.length>0?e[0]:t.getBoundingClientRect();return n.width>0||n.height>0?m.some(n).map(Nc):m.none()}(Lc(t,e))},cl=function(t,e,n){return function(t,e,n){var r=wt.fromDom(t.document);return Kc(r,e,n).map((function(t){return Oc.create(wt.fromDom(t.startContainer),t.startOffset,wt.fromDom(t.endContainer),t.endOffset)}))}(t,e,n)},ll=tinymce.util.Tools.resolve("tinymce.util.VK"),fl=function(t,e,n,r){return pl(t,e,Sc(n),r)},sl=function(t,e,n,r){return pl(t,e,Tc(n),r)},dl=function(t,e){var n=Ec.exact(e,0,e,0);return rl(n)},ml=function(t,e){var n,r=je(e,"tr");return(n=r,0===n.length?m.none():m.some(n[n.length-1])).bind((function(t){return He(t,"td,th").map((function(t){return dl(0,t)}))}))},pl=function(t,e,n,r,o){return n.fold(m.none,m.none,(function(t,e){return gn(e).map((function(t){return dl(0,t)}))}),(function(n){return Ze.table(n,e).bind((function(e){var o=hr.noMenu(n);return t.undoManager.transact((function(){r.insertRowsAfter(e,o)})),ml(0,e)}))}))},gl=["table","li","dl"],hl={handle:function(t,e,n,r){if(t.keyCode===ll.TAB){var o=Ru(e),i=function(t){var e=et(t);return oe(t,o)||T(gl,e)},u=e.selection.getRng();if(u.collapsed){var a=wt.fromDom(u.startContainer);Ze.cell(a,i).each((function(o){t.preventDefault(),(t.shiftKey?sl:fl)(e,i,o,n,r).each((function(t){e.selection.setRng(t)}))}))}}}},vl={create:q("selection","kill")},bl=function(t,e,n,r){return{start:o(Dc.on(t,e)),finish:o(Dc.on(n,r))}},yl={convertToRange:function(t,e){var n=Lc(t,e);return Oc.create(wt.fromDom(n.startContainer),n.startOffset,wt.fromDom(n.endContainer),n.endOffset)},makeSitus:bl},wl=function(t,e,n,r,o){return oe(n,r)?m.none():nr.identify(n,r,e).bind((function(e){var r=e.boxes().getOr([]);return r.length>0?(o(t,r,e.start(),e.finish()),m.some(vl.create(m.some(yl.makeSitus(n,0,n,dn(n))),!0))):m.none()}))},xl={sync:function(t,e,n,r,o,i,u){return oe(n,o)&&r===i?m.none():qe(n,"td,th",e).bind((function(n){return qe(o,"td,th",e).bind((function(r){return wl(t,e,n,r,u)}))}))},detect:wl,update:function(t,e,n,r,o){return nr.shiftSelection(r,t,e,o.firstSelectedSelector(),o.lastSelectedSelector()).map((function(t){return o.clearBeforeUpdate(n),o.selectRange(n,t.boxes(),t.start(),t.finish()),t.boxes()}))}},Cl=q("item","mode"),Sl=function(t,e,n,r){return void 0===r&&(r=Tl),t.property().parent(e).map((function(t){return Cl(t,r)}))},Tl=function(t,e,n,r){return void 0===r&&(r=Ol),n.sibling(t,e).map((function(t){return Cl(t,r)}))},Ol=function t(e,n,r,o){void 0===o&&(o=t);var i=e.property().children(n);return r.first(i).map((function(t){return Cl(t,o)}))},Rl=[{current:Sl,next:Tl,fallback:m.none()},{current:Tl,next:Ol,fallback:m.some(Sl)},{current:Ol,next:Ol,fallback:m.some(Tl)}],Dl=function(){return{sibling:function(t,e){return t.query().prevSibling(e)},first:function(t){return t.length>0?m.some(t[t.length-1]):m.none()}}},Al=function(){return{sibling:function(t,e){return t.query().nextSibling(e)},first:function(t){return t.length>0?m.some(t[0]):m.none()}}},El=function t(e,n,r,o,i,u){return function t(e,n,r,o,i){return void 0===i&&(i=Rl),_(i,(function(t){return t.current===r})).bind((function(r){return r.current(e,n,o,r.next).orThunk((function(){return r.fallback.bind((function(r){return t(e,n,r,o)}))}))}))}(e,n,o,i).bind((function(n){return u(n.item())?m.none():r(n.item())?m.some(n.item()):t(e,n.item(),r,n.mode(),i,u)}))},kl=function(t){return function(e){return 0===t.property().children(e).length}},_l=function(t,e,n,r){return El(t,e,n,Tl,Dl(),r)},Il=function(t,e,n,r){return El(t,e,n,Tl,Al(),r)},Nl=zn(),Pl=function(t,e){return function(t,e,n){return _l(t,e,kl(t),n)}(Nl,t,e)},Bl=function(t,e){return function(t,e,n){return Il(t,e,kl(t),n)}(Nl,t,e)},Ml=q("element","offset"),Ll=(q("element","deltaOffset"),q("element","start","finish"),q("begin","end"),q("element","text"),ar([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}])),jl=function(t){return qe(t,"tr")},Ul=Nt(Nt({},Ll),{verify:function(t,e,n,r,o,i,u){return qe(r,"td,th",u).bind((function(n){return qe(e,"td,th",u).map((function(e){return oe(n,e)?oe(r,n)&&dn(n)===o?i(e):Ll.none("in same cell"):Zn.sharedOne(jl,[n,e]).fold((function(){return function(t,e,n){var r=t.getRect(e),o=t.getRect(n);return o.right>r.left&&o.left<r.right}(t,e,n)?Ll.success():i(e)}),(function(t){return i(e)}))}))})).getOr(Ll.none("default"))},cata:function(t,e,n,r,o){return t.fold(e,n,r,o)}}),Wl=(q("ancestor","descendants","element","index"),q("parent","children","element","index")),Fl=function(t,e){return I(t,u(oe,e))},zl=function(t){return"br"===et(t)},Hl=function t(e,n,r){return n(e,r).bind((function(e){return ut(e)&&0===ln(e).trim().length?t(e,n,r):m.some(e)}))},ql=function(t,e,n,r){return function(t,e){return me(t,e).filter(zl).orThunk((function(){return me(t,e-1).filter(zl)}))}(e,n).bind((function(e){return r.traverse(e).fold((function(){return Hl(e,r.gather,t).map(r.relative)}),(function(t){return function(t){return ce(t).bind((function(e){var n=de(e);return Fl(n,t).map((function(r){return Wl(e,n,t,r)}))}))}(t).map((function(t){return Dc.on(t.parent(),t.index())}))}))}))},Vl=function(t,e,n,r){return(zl(e)?function(t,e,n){return n.traverse(e).orThunk((function(){return Hl(e,n.gather,t)})).map(n.relative)}(t,e,r):ql(t,e,n,r)).map((function(t){return{start:o(t),finish:o(t)}}))},Gl=function(t){return Ul.cata(t,(function(t){return m.none()}),(function(){return m.none()}),(function(t){return m.some(Ml(t,0))}),(function(t){return m.some(Ml(t,dn(t)))}))},Kl=$(["left","top","right","bottom"],[]),Xl={nu:Kl,moveUp:function(t,e){return Kl({left:t.left(),top:t.top()-e,right:t.right(),bottom:t.bottom()-e})},moveDown:function(t,e){return Kl({left:t.left(),top:t.top()+e,right:t.right(),bottom:t.bottom()+e})},moveBottomTo:function(t,e){var n=t.bottom()-t.top();return Kl({left:t.left(),top:e-n,right:t.right(),bottom:e})},moveTopTo:function(t,e){var n=t.bottom()-t.top();return Kl({left:t.left(),top:e,right:t.right(),bottom:e+n})},getTop:function(t){return t.top()},getBottom:function(t){return t.bottom()},translate:function(t,e,n){return Kl({left:t.left()+e,top:t.top()+n,right:t.right()+e,bottom:t.bottom()+n})},toString:function(t){return"("+t.left()+", "+t.top()+") -> ("+t.right()+", "+t.bottom()+")"}},Yl=function(t){return Xl.nu({left:t.left,top:t.top,right:t.right,bottom:t.bottom})},$l=function(t,e){return m.some(t.getRect(e))},Jl=function(t,e,n){return it(e)?$l(t,e).map(Yl):ut(e)?function(t,e,n){return n>=0&&n<dn(e)?t.getRangedRect(e,n,e,n+1):n>0?t.getRangedRect(e,n-1,e,n):m.none()}(t,e,n).map(Yl):m.none()},Zl=function(t,e){return it(e)?$l(t,e).map(Yl):ut(e)?t.getRangedRect(e,0,e,dn(e)).map(Yl):m.none()},Ql=ar([{none:[]},{retry:["caret"]}]),tf=function(t,e,n){return(r=e,i=du,Ue((function(t,e){return e(t)}),We,r,i,u)).fold(o(!1),(function(e){return Zl(t,e).exists((function(t){return function(t,e){return t.left()<e.left()||Math.abs(e.right()-t.left())<1||t.left()>e.right()}(n,t)}))}));var r,i,u},ef={point:Xl.getTop,adjuster:function(t,e,n,r,o){var i=Xl.moveUp(o,5);return Math.abs(n.top()-r.top())<1?Ql.retry(i):n.bottom()<o.top()?Ql.retry(i):n.bottom()===o.top()?Ql.retry(Xl.moveUp(o,1)):tf(t,e,o)?Ql.retry(Xl.translate(i,5,0)):Ql.none()},move:Xl.moveUp,gather:Pl},nf={point:Xl.getBottom,adjuster:function(t,e,n,r,o){var i=Xl.moveDown(o,5);return Math.abs(n.bottom()-r.bottom())<1?Ql.retry(i):n.top()>o.bottom()?Ql.retry(i):n.top()===o.bottom()?Ql.retry(Xl.moveDown(o,1)):tf(t,e,o)?Ql.retry(Xl.translate(i,5,0)):Ql.none()},move:Xl.moveDown,gather:Bl},rf=function(t,e,n,r,o){return of(t,e,n,e.move(r,5),o)},of=function t(e,n,r,o,i){return 0===i?m.some(o):function(t,e,n){return t.elementFromPoint(e,n).filter((function(t){return"table"===et(t)})).isSome()}(e,o.left(),n.point(o))?rf(e,n,r,o,i-1):e.situsFromPoint(o.left(),n.point(o)).bind((function(u){return u.start().fold(m.none,(function(u){return Zl(e,u).bind((function(a){return n.adjuster(e,u,a,r,o).fold(m.none,(function(o){return t(e,n,r,o,i-1)}))})).orThunk((function(){return m.some(o)}))}),m.none)}))},uf=function(t,e,n){var r=t.move(n,5),o=of(e,t,n,r,100).getOr(r);return function(t,e,n){return t.point(e)>n.getInnerHeight()?m.some(t.point(e)-n.getInnerHeight()):t.point(e)<0?m.some(-t.point(e)):m.none()}(t,o,e).fold((function(){return e.situsFromPoint(o.left(),t.point(o))}),(function(n){return e.scrollBy(0,n),e.situsFromPoint(o.left(),t.point(o)-n)}))},af={tryUp:u(uf,ef),tryDown:u(uf,nf),ieTryUp:function(t,e){return t.situsFromPoint(e.left(),e.top()-5)},ieTryDown:function(t,e){return t.situsFromPoint(e.left(),e.bottom()+5)},getJumpSize:o(5)},cf=Qt(),lf=function(t,e,n,r,o){return Jl(t,e,n).bind((function(e){return ff(t,o,r(e,af.getJumpSize()))}))},ff=function(t,e,n){return cf.browser.isChrome()||cf.browser.isSafari()||cf.browser.isFirefox()||cf.browser.isEdge()?e.otherRetry(t,n):cf.browser.isIE()?e.ieRetry(t,n):m.none()},sf=function(t,e,n,r,o){return Jl(t,n,r).bind((function(e){return ff(t,o,e)}))},df=function(t,e,n){return function(t,e,n){return t.getSelection().bind((function(r){return Vl(e,r.finish(),r.foffset(),n).fold((function(){return m.some(Ml(r.finish(),r.foffset()))}),(function(o){var i=t.fromSitus(o),u=Ul.verify(t,r.finish(),r.foffset(),i.finish(),i.foffset(),n.failure,e);return Gl(u)}))}))}(t,e,n).bind((function(r){return function t(e,n,r,o,i,u){return 0===u?m.none():sf(e,n,r,o,i).bind((function(a){var c=e.fromSitus(a),l=Ul.verify(e,r,o,c.finish(),c.foffset(),i.failure,n);return Ul.cata(l,(function(){return m.none()}),(function(){return m.some(a)}),(function(a){return oe(r,a)&&0===o?lf(e,r,o,Xl.moveUp,i):t(e,n,a,0,i,u-1)}),(function(a){return oe(r,a)&&o===dn(a)?lf(e,r,o,Xl.moveDown,i):t(e,n,a,dn(a),i,u-1)}))}))}(t,e,r.element(),r.offset(),n,20).map(t.fromSitus)}))},mf=Qt(),pf=function(t,e){return We(t,(function(t){return ce(t).exists((function(t){return oe(t,e)}))}),n).isSome();var n},gf=function(t,e,n,r,i){return qe(r,"td,th",e).bind((function(r){return qe(r,"table",e).bind((function(u){return pf(i,u)?df(t,e,n).bind((function(t){return qe(t.finish(),"td,th",e).map((function(e){return{start:o(r),finish:o(e),range:o(t)}}))})):m.none()}))}))},hf=function(t,e,n,r,o,i){return mf.browser.isIE()?m.none():i(r,e).orThunk((function(){return gf(t,e,n,r,o).map((function(t){var e=t.range();return vl.create(m.some(yl.makeSitus(e.start(),e.soffset(),e.finish(),e.foffset())),!0)}))}))},vf=function(t,e,n,r,o,i,u){return gf(t,n,r,o,i).bind((function(t){return xl.detect(e,n,t.start(),t.finish(),u)}))},bf=function(t,e){return qe(t,"tr",e).bind((function(t){return qe(t,"table",e).bind((function(n){var r=je(n,"tr");return oe(t,r[0])?function(t,e,n){return _l(Nl,t,e,n)}(n,(function(t){return hn(t).isSome()}),e).map((function(t){var e=dn(t);return vl.create(m.some(yl.makeSitus(t,e,t,e)),!0)})):m.none()}))}))},yf=function(t,e){return qe(t,"tr",e).bind((function(t){return qe(t,"table",e).bind((function(n){var r=je(n,"tr");return oe(t,r[r.length-1])?function(t,e,n){return Il(Nl,t,e,n)}(n,(function(t){return gn(t).isSome()}),e).map((function(t){return vl.create(m.some(yl.makeSitus(t,0,t,0)),!0)})):m.none()}))}))},wf=function(t,e){return qe(t,"td,th",e)};var xf={down:{traverse:se,gather:Bl,relative:Dc.before,otherRetry:af.tryDown,ieRetry:af.ieTryDown,failure:Ul.failedDown},up:{traverse:fe,gather:Pl,relative:Dc.before,otherRetry:af.tryUp,ieRetry:af.ieTryUp,failure:Ul.failedUp}},Cf=function(t){return function(e){return e===t}},Sf=Cf(38),Tf=Cf(40),Of={ltr:{isBackward:Cf(37),isForward:Cf(39)},rtl:{isBackward:Cf(39),isForward:Cf(37)},isUp:Sf,isDown:Tf,isNavigation:function(t){return t>=37&&t<=40}},Rf=function(t){return{left:t.left(),top:t.top(),right:t.right(),bottom:t.bottom(),width:t.width(),height:t.height()}},Df=(Qt().browser.isSafari(),function(e){return{elementFromPoint:function(t,n){return wt.fromPoint(wt.fromDom(e.document),t,n)},getRect:function(t){return t.dom().getBoundingClientRect()},getRangedRect:function(t,n,r,o){var i=Ec.exact(t,n,r,o);return al(e,i).map(Rf)},getSelection:function(){return ul(e).map((function(t){return yl.convertToRange(e,t)}))},fromSitus:function(t){var n=Ec.relative(t.start(),t.finish());return yl.convertToRange(e,n)},situsFromPoint:function(t,n){return cl(e,t,n).map((function(t){return bl(t.start(),t.soffset(),t.finish(),t.foffset())}))},clearSelection:function(){!function(t){t.getSelection().removeAllRanges()}(e)},collapseSelection:function(t){void 0===t&&(t=!1),ul(e).each((function(n){return n.fold((function(e){return e.collapse(t)}),(function(n,r){var o=t?n:r;nl(e,o,o)}),(function(n,r,o,i){var u=t?n:o,a=t?r:i;el(e,u,a,u,a)}))}))},setSelection:function(t){el(e,t.start(),t.soffset(),t.finish(),t.foffset())},setRelativeSelection:function(t,n){nl(e,t,n)},selectContents:function(t){il(e,t)},getInnerHeight:function(){return e.innerHeight},getScrollY:function(){var n,r,o,i;return(n=wt.fromDom(e.document),r=void 0!==n?n.dom():t.document,o=r.body.scrollLeft||r.documentElement.scrollLeft,i=r.body.scrollTop||r.documentElement.scrollTop,Ur(o,i)).top()},scrollBy:function(n,r){!function(e,n,r){(void 0!==r?r.dom():t.document).defaultView.scrollBy(e,n)}(n,r,wt.fromDom(e.document))}}}),Af=q("rows","cols"),Ef={mouse:function(t,e,n,r){var o=function(t,e,n,r){var o=m.none(),i=function(){o=m.none()};return{mousedown:function(t){r.clear(e),o=wf(t.target(),n)},mouseover:function(i){o.each((function(o){r.clearBeforeUpdate(e),wf(i.target(),n).each((function(i){nr.identify(o,i,n).each((function(n){var u=n.boxes().getOr([]);(u.length>1||1===u.length&&!oe(o,i))&&(r.selectRange(e,u,n.start(),n.finish()),t.selectContents(i))}))}))}))},mouseup:function(t){o.each(i)}}}(Df(t),e,n,r);return{mousedown:o.mousedown,mouseover:o.mouseover,mouseup:o.mouseup}},keyboard:function(t,e,n,r){var o=Df(t),i=function(){return r.clear(e),m.none()};return{keydown:function(t,a,c,l,f,s){var d=t.raw(),p=d.which,g=!0===d.shiftKey;return nr.retrieve(e,r.selectedSelector()).fold((function(){return Of.isDown(p)&&g?u(vf,o,e,n,xf.down,l,a,r.selectRange):Of.isUp(p)&&g?u(vf,o,e,n,xf.up,l,a,r.selectRange):Of.isDown(p)?u(hf,o,n,xf.down,l,a,yf):Of.isUp(p)?u(hf,o,n,xf.up,l,a,bf):m.none}),(function(t){var n=function(n){return function(){return io(n,(function(n){return xl.update(n.rows(),n.cols(),e,t,r)})).fold((function(){return nr.getEdges(e,r.firstSelectedSelector(),r.lastSelectedSelector()).map((function(t){var n=Of.isDown(p)||s.isForward(p)?Dc.after:Dc.before;return o.setRelativeSelection(Dc.on(t.first(),0),n(t.table())),r.clear(e),vl.create(m.none(),!0)}))}),(function(t){return m.some(vl.create(m.none(),!0))}))}};return Of.isDown(p)&&g?n([Af(1,0)]):Of.isUp(p)&&g?n([Af(-1,0)]):s.isBackward(p)&&g?n([Af(0,-1),Af(-1,0)]):s.isForward(p)&&g?n([Af(0,1),Af(1,0)]):Of.isNavigation(p)&&!1===g?i:m.none}))()},keyup:function(t,o,i,u,a){return nr.retrieve(e,r.selectedSelector()).fold((function(){var c=t.raw(),l=c.which;return!1===(!0===c.shiftKey)?m.none():Of.isNavigation(l)?xl.sync(e,n,o,i,u,a,r.selectRange):m.none()}),m.none)}}},external:function(t,e,n,r){var o=Df(t);return function(t,i){r.clearBeforeUpdate(e),nr.identify(t,i,n).each((function(t){var n=t.boxes().getOr([]);r.selectRange(e,n,t.start(),t.finish()),o.selectContents(i),o.collapseSelection()}))}}},kf=function(t,e){D(e,(function(e){!function(t,e){fo(t)?t.dom().classList.remove(e):mo(t,e);go(t)}(t,e)}))},_f={byClass:function(t){var e,n,r=(e=t.selected(),function(t){po(t,e)}),o=(n=[t.selected(),t.lastSelected(),t.firstSelected()],function(t){kf(t,n)}),i=function(e){var n=je(e,t.selectedSelector());D(n,o)};return{clearBeforeUpdate:i,clear:i,selectRange:function(e,n,o,u){i(e),D(n,r),po(o,t.firstSelected()),po(u,t.lastSelected())},selectedSelector:t.selectedSelector,firstSelectedSelector:t.firstSelectedSelector,lastSelectedSelector:t.lastSelectedSelector}},byAttr:function(t,e,n){var r=function(e){dt(e,t.selected()),dt(e,t.firstSelected()),dt(e,t.lastSelected())},o=function(e){ct(e,t.selected(),"1")},i=function(t){u(t),n()},u=function(e){var n=je(e,t.selectedSelector());D(n,r)};return{clearBeforeUpdate:u,clear:i,selectRange:function(n,r,u,a){i(n),D(r,o),ct(u,t.firstSelected(),"1"),ct(a,t.lastSelected(),"1"),e(r,u,a)},selectedSelector:t.selectedSelector,firstSelectedSelector:t.firstSelectedSelector,lastSelectedSelector:t.lastSelectedSelector}}},If={getOtherCells:function(t,e,n){var r=Qe(t),o=rn.generate(r);return Qo(o,e).map((function(t){var e=Go(o,n,!1);return{upOrLeftCells:function(t,e,n){var r=t.slice(0,e[e.length-1].row()+1),o=Xo(r,n);return P(o,(function(t){var n=t.cells().slice(0,e[e.length-1].column()+1);return R(n,(function(t){return t.element()}))}))}(e,t,n),downOrRightCells:function(t,e,n){var r=t.slice(e[0].row()+e[0].rowspan()-1,t.length),o=Xo(r,n);return P(o,(function(t){var n=t.cells().slice(e[0].column()+e[0].colspan()-1,+t.cells().length);return R(n,(function(t){return t.element()}))}))}(e,t,n)}}))}},Nf=function(t){return!1===ho(wt.fromDom(t.target),"ephox-snooker-resizer-bar")};var Pf=function(t){return{get:function(){var e=Ru(t);return rr(e,ur.selectedSelector()).fold((function(){return void 0===t.selection.getStart()?lr.none():lr.single(t.selection)}),(function(t){return lr.multiple(t)}))}}},Bf=function(t,n){var r=e(m.none()),o=e([]),i=function(){return qa(t).bind((function(t){return Ze.table(t).map((function(e){return"caption"===et(t)?hr.notCell(t):hr.forMenu(n,e,t)}))}))},u=function(){r.set(bt(i)()),D(o.get(),(function(t){return t()}))},a=function(t,e){var n=function(){return r.get().fold((function(){t.setDisabled(!0)}),(function(n){t.setDisabled(e(n))}))};return n(),o.set(o.get().concat([n])),function(){o.set(A(o.get(),(function(t){return t!==n})))}};return t.on("NodeChange TableSelectorChange",u),{onSetupTable:function(t){return a(t,(function(t){return!1}))},onSetupCellOrRow:function(t){return a(t,(function(t){return"caption"===et(t.element())}))},onSetupMergeable:function(t){return a(t,(function(t){return t.mergable().isNone()}))},onSetupUnmergeable:function(t){return a(t,(function(t){return t.unmergable().isNone()}))},resetTargets:u,targets:function(){return r.get()}}},Mf={addButtons:function(t,e){t.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",fetch:function(t){return t("inserttable | cell row column | advtablesort | tableprops deletetable")}});var n=function(e){return function(){return t.execCommand(e)}};t.ui.registry.addButton("tableprops",{tooltip:"Table properties",onAction:n("mceTableProps"),icon:"table",onSetup:e.onSetupTable}),t.ui.registry.addButton("tabledelete",{tooltip:"Delete table",onAction:n("mceTableDelete"),icon:"table-delete-table",onSetup:e.onSetupTable}),t.ui.registry.addButton("tablecellprops",{tooltip:"Cell properties",onAction:n("mceTableCellProps"),icon:"table-cell-properties",onSetup:e.onSetupCellOrRow}),t.ui.registry.addButton("tablemergecells",{tooltip:"Merge cells",onAction:n("mceTableMergeCells"),icon:"table-merge-cells",onSetup:e.onSetupMergeable}),t.ui.registry.addButton("tablesplitcells",{tooltip:"Split cell",onAction:n("mceTableSplitCells"),icon:"table-split-cells",onSetup:e.onSetupUnmergeable}),t.ui.registry.addButton("tableinsertrowbefore",{tooltip:"Insert row before",onAction:n("mceTableInsertRowBefore"),icon:"table-insert-row-above",onSetup:e.onSetupCellOrRow}),t.ui.registry.addButton("tableinsertrowafter",{tooltip:"Insert row after",onAction:n("mceTableInsertRowAfter"),icon:"table-insert-row-after",onSetup:e.onSetupCellOrRow}),t.ui.registry.addButton("tabledeleterow",{tooltip:"Delete row",onAction:n("mceTableDeleteRow"),icon:"table-delete-row",onSetup:e.onSetupCellOrRow}),t.ui.registry.addButton("tablerowprops",{tooltip:"Row properties",onAction:n("mceTableRowProps"),icon:"table-row-properties",onSetup:e.onSetupCellOrRow}),t.ui.registry.addButton("tableinsertcolbefore",{tooltip:"Insert column before",onAction:n("mceTableInsertColBefore"),icon:"table-insert-column-before",onSetup:e.onSetupCellOrRow}),t.ui.registry.addButton("tableinsertcolafter",{tooltip:"Insert column after",onAction:n("mceTableInsertColAfter"),icon:"table-insert-column-after",onSetup:e.onSetupCellOrRow}),t.ui.registry.addButton("tabledeletecol",{tooltip:"Delete column",onAction:n("mceTableDeleteCol"),icon:"table-delete-column",onSetup:e.onSetupCellOrRow}),t.ui.registry.addButton("tablecutrow",{tooltip:"Cut row",onAction:n("mceTableCutRow"),icon:"temporary-placeholder",onSetup:e.onSetupCellOrRow}),t.ui.registry.addButton("tablecopyrow",{tooltip:"Copy row",onAction:n("mceTableCopyRow"),icon:"temporary-placeholder",onSetup:e.onSetupCellOrRow}),t.ui.registry.addButton("tablepasterowbefore",{tooltip:"Paste row before",onAction:n("mceTablePasteRowBefore"),icon:"temporary-placeholder",onSetup:e.onSetupCellOrRow}),t.ui.registry.addButton("tablepasterowafter",{tooltip:"Paste row after",onAction:n("mceTablePasteRowAfter"),icon:"temporary-placeholder",onSetup:e.onSetupCellOrRow}),t.ui.registry.addButton("tableinsertdialog",{tooltip:"Insert table",onAction:n("mceInsertTable"),icon:"table"})},addToolbars:function(t){var e=function(t){return t.getParam("table_toolbar","tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol")}(t);e.length>0&&t.ui.registry.addContextToolbar("table",{predicate:function(e){return t.dom.is(e,"table")&&t.getBody().contains(e)},items:e,scope:"node",position:"node"})}},Lf={addMenuItems:function(t,e){var n=function(e){return function(){return t.execCommand(e)}},r=function(e){var n=e.numRows,r=e.numColumns;t.undoManager.transact((function(){La(t,r,n)})),t.addVisual()},o={text:"Table properties",onSetup:e.onSetupTable,onAction:n("mceTableProps")},i={text:"Delete table",icon:"table-delete-table",onSetup:e.onSetupTable,onAction:n("mceTableDelete")},u=[{type:"menuitem",text:"Insert row before",icon:"table-insert-row-above",onAction:n("mceTableInsertRowBefore"),onSetup:e.onSetupCellOrRow},{type:"menuitem",text:"Insert row after",icon:"table-insert-row-after",onAction:n("mceTableInsertRowAfter"),onSetup:e.onSetupCellOrRow},{type:"menuitem",text:"Delete row",icon:"table-delete-row",onAction:n("mceTableDeleteRow"),onSetup:e.onSetupCellOrRow},{type:"menuitem",text:"Row properties",icon:"table-row-properties",onAction:n("mceTableRowProps"),onSetup:e.onSetupCellOrRow},{type:"separator"},{type:"menuitem",text:"Cut row",onAction:n("mceTableCutRow"),onSetup:e.onSetupCellOrRow},{type:"menuitem",text:"Copy row",onAction:n("mceTableCopyRow"),onSetup:e.onSetupCellOrRow},{type:"menuitem",text:"Paste row before",onAction:n("mceTablePasteRowBefore"),onSetup:e.onSetupCellOrRow},{type:"menuitem",text:"Paste row after",onAction:n("mceTablePasteRowAfter"),onSetup:e.onSetupCellOrRow}],a={type:"nestedmenuitem",text:"Row",getSubmenuItems:function(){return u}},c=[{type:"menuitem",text:"Insert column before",icon:"table-insert-column-before",onAction:n("mceTableInsertColBefore"),onSetup:e.onSetupCellOrRow},{type:"menuitem",text:"Insert column after",icon:"table-insert-column-after",onAction:n("mceTableInsertColAfter"),onSetup:e.onSetupCellOrRow},{type:"menuitem",text:"Delete column",icon:"table-delete-column",onAction:n("mceTableDeleteCol"),onSetup:e.onSetupCellOrRow}],l={type:"nestedmenuitem",text:"Column",getSubmenuItems:function(){return c}},f=[{type:"menuitem",text:"Cell properties",icon:"table-cell-properties",onAction:n("mceTableCellProps"),onSetup:e.onSetupCellOrRow},{type:"menuitem",text:"Merge cells",icon:"table-merge-cells",onAction:n("mceTableMergeCells"),onSetup:e.onSetupMergeable},{type:"menuitem",text:"Split cell",icon:"table-split-cells",onAction:n("mceTableSplitCells"),onSetup:e.onSetupUnmergeable}],s={type:"nestedmenuitem",text:"Cell",getSubmenuItems:function(){return f}};!1===function(t){return t.getParam("table_grid",!0,"boolean")}(t)?t.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:n("mceInsertTable")}):t.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:function(){return[{type:"fancymenuitem",fancytype:"inserttable",onAction:r}]}}),t.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:n("mceInsertTable")}),t.ui.registry.addMenuItem("tableprops",o),t.ui.registry.addMenuItem("deletetable",i),t.ui.registry.addNestedMenuItem("row",a),t.ui.registry.addNestedMenuItem("column",l),t.ui.registry.addNestedMenuItem("cell",s),t.ui.registry.addContextMenu("table",{update:function(){return e.resetTargets(),e.targets().fold((function(){return""}),(function(t){return"caption"===et(t.element())?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable"}))}})}},jf=function(t,e,n,r){return{insertTable:function(e,n){return La(t,e,n)},setClipboardRows:function(t){return function(t,e){var n=R(t,wt.fromDom);e.set(m.from(n))}(t,e)},getClipboardRows:function(){return function(t){return t.get().fold((function(){}),(function(t){return R(t,(function(t){return t.dom()}))}))}(e)},resizeHandler:n,selectionTargets:r}};function Uf(t){var i=Pf(t),u=Bf(t,i),a=yc(t),c=function(t,i,u){var a=$(["mousedown","mouseover","mouseup","keyup","keydown"],[]),c=m.none(),l=Gu(t),f=_f.byAttr(ur,(function(e,r,o){u.targets().each((function(i){Ze.table(r).each((function(u){var a=wt.fromDom(t.getDoc()),c=Rn.cellOperations(n,a,l),f=If.getOtherCells(u,i,c);Ju(t,e,r,o,f)}))}))}),(function(){Zu(t)}));return t.on("init",(function(u){var l=t.getWin(),s=Ru(t),d=Eu(t),p=Ef.mouse(l,s,d,f),g=Ef.keyboard(l,s,d,f),h=Ef.external(l,s,d,f);t.on("TableSelectorChange",(function(t){h(t.start,t.finish)}));var v,b,y=function(e,n){(function(t){return!0===t.raw().shiftKey})(e)&&(n.kill()&&e.kill(),n.selection().each((function(e){var n=Ec.relative(e.start(),e.finish()),r=Lc(l,n);t.selection.setRng(r)})))},w=function(e){var n=S(e);if(n.raw().shiftKey&&Of.isNavigation(n.raw().which)){var r=t.selection.getRng(),o=wt.fromDom(r.startContainer),i=wt.fromDom(r.endContainer);g.keyup(n,o,r.startOffset,i,r.endOffset).each((function(t){y(n,t)}))}},x=function(e){var n=S(e);i().each((function(t){t.hideBars()}));var r=t.selection.getRng(),o=wt.fromDom(t.selection.getStart()),u=wt.fromDom(r.startContainer),a=wt.fromDom(r.endContainer),c=Pu.directionAt(o).isRtl()?Of.rtl:Of.ltr;g.keydown(n,u,r.startOffset,a,r.endOffset,c).each((function(t){y(n,t)})),i().each((function(t){t.showBars()}))},C=function(t){return t.hasOwnProperty("x")&&t.hasOwnProperty("y")},S=function(t){var e=wt.fromDom(t.target),n=function(){t.stopPropagation()},i=function(){t.preventDefault()},u=r(i,n);return{target:o(e),x:o(C(t)?t.x:null),y:o(C(t)?t.y:null),stop:n,prevent:i,kill:u,raw:o(t)}},T=function(t){return 0===t.button},O=function(t){T(t)&&Nf(t)&&p.mousedown(S(t))},R=function(t){var e;void 0!==(e=t).buttons&&0==(1&e.buttons)||!Nf(t)||p.mouseover(S(t))},D=function(t){T(t)&&Nf(t)&&p.mouseup(S(t))},A=(v=e(wt.fromDom(s)),b=e(0),{touchEnd:function(t){var e=wt.fromDom(t.target);if("td"===et(e)||"th"===et(e)){var n=v.get(),r=b.get();oe(n,e)&&t.timeStamp-r<300&&(t.preventDefault(),h(e,e))}v.set(e),b.set(t.timeStamp)}});t.on("mousedown",O),t.on("mouseover",R),t.on("mouseup",D),t.on("touchend",A.touchEnd),t.on("keyup",w),t.on("keydown",x),t.on("NodeChange",(function(){var e=t.selection,r=wt.fromDom(e.getStart()),o=wt.fromDom(e.getEnd());Zn.sharedOne(Ze.table,[r,o]).fold((function(){f.clear(s)}),n)})),c=m.some(a({mousedown:O,mouseover:R,mouseup:D,keyup:w,keydown:x}))})),{clear:f.clear,destroy:function(){c.each((function(t){}))}}}(t,a.lazyResize,u),l=Qu(t,a.lazyWire),f=e(m.none());return Ga.registerCommands(t,l,c,i,f),vr.registerEvents(t,i,l,c),Lf.addMenuItems(t,u),Mf.addButtons(t,u),Mf.addToolbars(t),t.on("PreInit",(function(){t.serializer.addTempAttr(ur.firstSelected()),t.serializer.addTempAttr(ur.lastSelected())})),Uu(t)&&t.on("keydown",(function(e){hl.handle(e,t,l,a.lazyWire)})),t.on("remove",(function(){a.destroy(),c.destroy()})),jf(t,f,a,u)}p.add("table",Uf)}(window)},"vn/0":function(t,e,n){(function(t){n("OEbY"),n("2Spj"),n("rGqo"),n("yt8O"),n("Btvt"),n("hEkN"),n("tUrg"),n("dZ+Y"),n("bWfx"),n("pIFo"),n("0l/t"),n("Vd3H"),n("Tze0"),n("KKXr"),n("XfO3"),n("HEwt"),n("V+eJ"),n("DW2E"),n("91GP"),n("f3/d"),function(e){"use strict";var n,r,o,i,u=tinymce.util.Tools.resolve("tinymce.PluginManager"),a=tinymce.util.Tools.resolve("tinymce.util.VK"),c=function(t){return function(e){return function(t){if(null===t)return"null";var e=typeof t;return"object"===e&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"===e&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":e}(e)===t}},l=c("string"),f=c("array"),s=c("boolean"),d=c("function"),m=function(t){var e=t.getParam("link_assume_external_targets",!1);return s(e)&&e?1:!l(e)||"http"!==e&&"https"!==e?0:e},p=function(t){return t.getParam("link_context_toolbar",!1,"boolean")},g=function(t){return t.getParam("link_list")},h=function(t){return t.getParam("default_link_target")},v=function(t){return t.getParam("target_list",!0)},b=function(t){return t.getParam("rel_list",[],"array")},y=function(t){return t.getParam("link_class_list",[],"array")},w=function(t){return t.getParam("link_title",!0,"boolean")},x=function(t){return t.getParam("allow_unsafe_link_target",!1,"boolean")},C=function(t){return t.getParam("link_quicklink",!1,"boolean")},S=function(t){var n=e.document.createElement("a");n.target="_blank",n.href=t,n.rel="noreferrer noopener";var r=e.document.createEvent("MouseEvents");r.initMouseEvent("click",!0,!0,e.window,0,0,0,0,0,!1,!1,!1,!1,0,null),function(t,n){e.document.body.appendChild(t),t.dispatchEvent(n),e.document.body.removeChild(t)}(n,r)},T=function(){return(T=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},O=function(){},R=function(t){return function(){return t}},D=R(!1),A=R(!0),E=function(){return k},k=(n=function(t){return t.isNone()},i={fold:function(t,e){return t()},is:D,isSome:D,isNone:A,getOr:o=function(t){return t},getOrThunk:r=function(t){return t()},getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:R(null),getOrUndefined:R(void 0),or:o,orThunk:r,map:E,each:O,bind:E,exists:D,forall:A,filter:E,equals:n,equals_:n,toArray:function(){return[]},toString:R("none()")},Object.freeze&&Object.freeze(i),i),_=function t(e){var n=R(e),r=function(){return i},o=function(t){return t(e)},i={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:A,isNone:D,getOr:n,getOrThunk:n,getOrDie:n,getOrNull:n,getOrUndefined:n,or:r,orThunk:r,map:function(n){return t(n(e))},each:function(t){t(e)},bind:o,exists:o,forall:o,filter:function(t){return t(e)?i:k},toArray:function(){return[e]},toString:function(){return"some("+e+")"},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(D,(function(t){return n(e,t)}))}};return i},I=_,N=E,P=function(t){return null==t?k:_(t)},B=Array.prototype.slice,M=Array.prototype.indexOf,L=Array.prototype.push,j=function(t,e){return n=t,r=e,M.call(n,r)>-1;var n,r},U=function(t,e){for(var n=0,r=t.length;n<r;n++){e(t[n],n)}},W=function(t){for(var e=[],n=0,r=t.length;n<r;++n){if(!f(t[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+t);L.apply(e,t[n])}return e},F=function(t,e){var n=function(t,e){for(var n=t.length,r=new Array(n),o=0;o<n;o++){var i=t[o];r[o]=e(i,o)}return r}(t,e);return W(n)},z=(d(Array.from)&&Array.from,tinymce.util.Tools.resolve("tinymce.util.Tools")),H=function(t){return/^\w+:/i.test(t)},q=function(t,e){var n=["noopener"],r=t?t.split(/\s+/):[],o=function(t){return t.filter((function(t){return-1===z.inArray(n,t)}))},i=e?function(t){return(t=o(t)).length>0?t.concat(n):n}(r):o(r);return i.length>0?function(t){return z.trim(t.sort().join(" "))}(i):""},V=function(t,e){return e=e||t.selection.getNode(),K(e)?t.dom.select("a[href]",e)[0]:t.dom.getParent(e,"a[href]")},G=function(t){return t&&"A"===t.nodeName&&!!t.href},K=function(t){return t&&"FIGURE"===t.nodeName&&/\bimage\b/i.test(t.className)},X=function(t){return function(t,e,n){return U(t,(function(t){n=e(n,t)})),n}(["title","rel","class","target"],(function(e,n){return t[n].each((function(t){e[n]=t.length>0?t:null})),e}),{href:t.href})},Y=function(t,e){var n=T({},e);if(!(b(t).length>0)&&!1===x(t)){var r=q(n.rel,"_blank"===n.target);n.rel=r||null}return P(n.target).isNone()&&!1===v(t)&&(n.target=h(t)),n.href=function(t,e){return"http"!==e&&"https"!==e||H(t)?t:e+"://"+t}(n.href,m(t)),n},$=function(t,e){var n=t.dom.select("img",e)[0];if(n){var r=t.dom.getParents(n,"a[href]",e)[0];r&&(r.parentNode.insertBefore(n,r),t.dom.remove(r))}},J=function(t,e,n){var r=t.dom.select("img",e)[0];if(r){var o=t.dom.create("a",n);r.parentNode.insertBefore(o,r),o.appendChild(r)}},Z=function(t,e,n){var r=t.selection.getNode(),o=V(t,r),i=Y(t,X(n));t.undoManager.transact((function(){n.href===e.href&&e.attach(),o?(t.focus(),function(t,e,n,r){n.each((function(t){e.hasOwnProperty("innerText")?e.innerText=t:e.textContent=t})),t.dom.setAttribs(e,r),t.selection.select(e)}(t,o,n.text,i)):function(t,e,n,r){K(e)?J(t,e,r):n.fold((function(){t.execCommand("mceInsertLink",!1,r)}),(function(e){t.insertContent(t.dom.createHTML("a",r,t.dom.encode(e)))}))}(t,r,n.text,i)}))},Q=function(t){t.undoManager.transact((function(){var e=t.selection.getNode();if(K(e))$(t,e);else{var n=t.dom.getParent(e,"a[href]",t.getBody());n&&t.dom.remove(n,!0)}t.focus()}))},tt=G,et=function(t){return z.grep(t,G).length>0},nt=function(t){var e=t.getAttribute("data-mce-href");return e||t.getAttribute("href")},rt=function(t){return!(/</.test(t)&&(!/^<a [^>]+>[^<]+<\/a>$/.test(t)||-1===t.indexOf("href=")))},ot=V,it=function(t,e){return function(t){return t.replace(/\uFEFF/g,"")}(e?e.innerText||e.textContent:t.getContent({format:"text"}))},ut=q,at=H,ct=function(t){for(var e=[],n=function(t){e.push(t)},r=0;r<t.length;r++)t[r].each(n);return e},lt=function(t,e){for(var n=0;n<t.length;n++){var r=e(t[n],n);if(r.isSome())return r}return N()},ft=function(t){return l(t.value)?t.value:""},st=function(t){return void 0===t&&(t=ft),function(e){return P(e).map((function(e){return function(t,e){var n=[];return z.each(t,(function(t){var r=l(t.text)?t.text:l(t.title)?t.title:"";if(void 0!==t.menu);else{var o=e(t);n.push({text:r,value:o})}})),n}(e,t)}))}},dt={sanitize:function(t){return st(ft)(t)},sanitizeWith:st,createUi:function(t,e){return function(n){return{name:t,type:"selectbox",label:e,items:n}}},getValue:ft},mt=function(t,e,n,r){var o=r[e],i=t.length>0;return void 0!==o?function(t,e){return lt(e,(function(e){return I(e).filter((function(e){return e.value===t}))}))}(o,n).map((function(e){return{url:{value:e.value,meta:{text:i?t:e.text,attach:O}},text:i?t:e.text}})):N()},pt=function(t,e){var n=function t(e){var n=e,r=function(){return n};return{get:r,set:function(t){n=t},clone:function(){return t(r())}}}(t.text),r=function(t,r){var o,i,u=(o=e,i=r.name,"link"===i?o.catalogs.link:"anchor"===i?o.catalogs.anchor:N()).getOr([]);return mt(n.get(),r.name,u,t)};return{onChange:function(t,e){return"url"===e.name?function(t){if(n.get().length<=0){var e=void 0!==t.url.meta.text?t.url.meta.text:t.url.value;return I({text:e})}return N()}(t()):j(["anchor","link"],e.name)?r(t(),e):"text"===e.name?(n.set(t().text),N()):N()}}},gt={},ht={exports:gt};!function(e,n,r,o){!function(o){if("object"==typeof n&&void 0!==r)r.exports=o();else if("function"==typeof e&&e.amd)e([],o);else{("undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:this).EphoxContactWrapper=o()}}((function(){return function t(e,n,r){function i(a,c){if(!n[a]){if(!e[a]){var l="function"==typeof o&&o;if(!c&&l)return l(a,!0);if(u)return u(a,!0);var f=new Error("Cannot find module '"+a+"'");throw f.code="MODULE_NOT_FOUND",f}var s=n[a]={exports:{}};e[a][0].call(s.exports,(function(t){return i(e[a][1][t]||t)}),s,s.exports,t,e,n,r)}return n[a].exports}for(var u="function"==typeof o&&o,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(t,e,n){var r,o,i=e.exports={};function u(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function c(t){if(r===setTimeout)return setTimeout(t,0);if((r===u||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:u}catch(t){r=u}try{o="function"==typeof clearTimeout?clearTimeout:a}catch(t){o=a}}();var l,f=[],s=!1,d=-1;function m(){s&&l&&(s=!1,l.length?f=l.concat(f):d=-1,f.length&&p())}function p(){if(!s){var t=c(m);s=!0;for(var e=f.length;e;){for(l=f,f=[];++d<e;)l&&l[d].run();d=-1,e=f.length}l=null,s=!1,function(t){if(o===clearTimeout)return clearTimeout(t);if((o===a||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(t);try{o(t)}catch(e){try{return o.call(null,t)}catch(e){return o.call(this,t)}}}(t)}}function g(t,e){this.fun=t,this.array=e}function h(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];f.push(new g(t,e)),1!==f.length||s||c(p)},g.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=h,i.addListener=h,i.once=h,i.off=h,i.removeListener=h,i.removeAllListeners=h,i.emit=h,i.prependListener=h,i.prependOnceListener=h,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],2:[function(t,e,n){(function(t){!function(n){var r=setTimeout;function o(){}function i(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],s(t,this)}function u(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,i._immediateFn((function(){var n=1===t._state?e.onFulfilled:e.onRejected;if(null!==n){var r;try{r=n(t._value)}catch(o){return void c(e.promise,o)}a(e.promise,r)}else(1===t._state?a:c)(e.promise,t._value)}))):t._deferreds.push(e)}function a(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if(e instanceof i)return t._state=3,t._value=e,void l(t);if("function"==typeof n)return void s((r=n,o=e,function(){r.apply(o,arguments)}),t)}t._state=1,t._value=e,l(t)}catch(u){c(t,u)}var r,o}function c(t,e){t._state=2,t._value=e,l(t)}function l(t){2===t._state&&0===t._deferreds.length&&i._immediateFn((function(){t._handled||i._unhandledRejectionFn(t._value)}));for(var e=0,n=t._deferreds.length;e<n;e++)u(t,t._deferreds[e]);t._deferreds=null}function f(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function s(t,e){var n=!1;try{t((function(t){n||(n=!0,a(e,t))}),(function(t){n||(n=!0,c(e,t))}))}catch(r){if(n)return;n=!0,c(e,r)}}i.prototype.catch=function(t){return this.then(null,t)},i.prototype.then=function(t,e){var n=new this.constructor(o);return u(this,new f(t,e,n)),n},i.all=function(t){var e=Array.prototype.slice.call(t);return new i((function(t,n){if(0===e.length)return t([]);var r=e.length;function o(i,u){try{if(u&&("object"==typeof u||"function"==typeof u)){var a=u.then;if("function"==typeof a)return void a.call(u,(function(t){o(i,t)}),n)}e[i]=u,0==--r&&t(e)}catch(c){n(c)}}for(var i=0;i<e.length;i++)o(i,e[i])}))},i.resolve=function(t){return t&&"object"==typeof t&&t.constructor===i?t:new i((function(e){e(t)}))},i.reject=function(t){return new i((function(e,n){n(t)}))},i.race=function(t){return new i((function(e,n){for(var r=0,o=t.length;r<o;r++)t[r].then(e,n)}))},i._immediateFn="function"==typeof t?function(e){t(e)}:function(t){r(t,0)},i._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)},i._setImmediateFn=function(t){i._immediateFn=t},i._setUnhandledRejectionFn=function(t){i._unhandledRejectionFn=t},void 0!==e&&e.exports?e.exports=i:n.Promise||(n.Promise=i)}(this)}).call(this,t("timers").setImmediate)},{timers:3}],3:[function(t,e,n){(function(e,r){var o=t("process/browser.js").nextTick,i=Function.prototype.apply,u=Array.prototype.slice,a={},c=0;function l(t,e){this._id=t,this._clearFn=e}n.setTimeout=function(){return new l(i.call(setTimeout,window,arguments),clearTimeout)},n.setInterval=function(){return new l(i.call(setInterval,window,arguments),clearInterval)},n.clearTimeout=n.clearInterval=function(t){t.close()},l.prototype.unref=l.prototype.ref=function(){},l.prototype.close=function(){this._clearFn.call(window,this._id)},n.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},n.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},n._unrefActive=n.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},n.setImmediate="function"==typeof e?e:function(t){var e=c++,r=!(arguments.length<2)&&u.call(arguments,1);return a[e]=!0,o((function(){a[e]&&(r?t.apply(null,r):t.call(null),n.clearImmediate(e))})),e},n.clearImmediate="function"==typeof r?r:function(t){delete a[t]}}).call(this,t("timers").setImmediate,t("timers").clearImmediate)},{"process/browser.js":1,timers:3}],4:[function(t,e,n){var r=t("promise-polyfill"),o="undefined"!=typeof window?window:Function("return this;")();e.exports={boltExport:o.Promise||r}},{"promise-polyfill":2}]},{},[4])(4)}))}(void 0,gt,ht,void 0);var vt=ht.exports.boltExport,bt=function t(n){var r=N(),o=[],i=function(t){u()?c(t):o.push(t)},u=function(){return r.isSome()},a=function(t){U(t,c)},c=function(t){r.each((function(n){e.setTimeout((function(){t(n)}),0)}))};return n((function(t){r=I(t),a(o),o=[]})),{get:i,map:function(e){return t((function(t){i((function(n){t(e(n))}))}))},isReady:u}},yt=bt,wt=function(t){e.setTimeout((function(){throw t}),0)},xt=function t(e){var n=function(t){e().then(t,wt)};return{map:function(n){return t((function(){return e().then(n)}))},bind:function(n){return t((function(){return e().then((function(t){return n(t).toPromise()}))}))},anonBind:function(n){return t((function(){return e().then((function(){return n.toPromise()}))}))},toLazy:function(){return yt(n)},toCached:function(){var n=null;return t((function(){return null===n&&(n=e()),n}))},toPromise:e,get:n}},Ct=function(t){return xt((function(){return new vt(t)}))},St=function(t){return xt((function(){return vt.resolve(t)}))},Tt=tinymce.util.Tools.resolve("tinymce.util.Delay"),Ot=function(t){var e=t.href;return e.indexOf("@")>0&&-1===e.indexOf("//")&&-1===e.indexOf("mailto:")?I({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:function(t){return T(T({},t),{href:"mailto:"+e})}}):N()},Rt=function(t){return function(e){var n=e.href;return 1===t&&!at(n)||0===t&&/^\s*www[\.|\d\.]/i.test(n)?I({message:"The URL you entered seems to be an external link. Do you want to add the required http:// prefix?",preprocess:function(t){return T(T({},t),{href:"http://"+n})}}):N()}},Dt=function(t,e,n){return lt([Ot,Rt(e)],(function(t){return t(n)})).fold((function(){return St(n)}),(function(e){return Ct((function(r){!function(t,e,n){var r=t.selection.getRng();Tt.setEditorTimeout(t,(function(){t.windowManager.confirm(e,(function(e){t.selection.setRng(r),n(e)}))}))}(t,e.message,(function(t){r(t?e.preprocess(n):n)}))}))}))},At=function(t){var e=t.dom.select("a:not([href])"),n=F(e,(function(t){var e=t.name||t.id;return e?[{text:e,value:"#"+e}]:[]}));return n.length>0?I([{text:"None",value:""}].concat(n)):N()},Et=function(t){var e=y(t);return e.length>0?dt.sanitize(e):N()},kt=tinymce.util.Tools.resolve("tinymce.util.XHR"),_t=function(t){var e=function(e){return t.convertURL(e.value||e.url,"href")},n=g(t);return Ct((function(t){l(n)?kt.send({url:n,success:function(e){return t(function(t){try{return I(JSON.parse(t))}catch(e){return N()}}(e))},error:function(e){return t(N())}}):d(n)?n((function(e){return t(I(e))})):t(P(n))})).map((function(t){return t.bind(dt.sanitizeWith(e)).map((function(t){return t.length>0?[{text:"None",value:""}].concat(t):t}))}))},It=function(t,e){var n=b(t);if(n.length>0){var r=e.is("_blank");return(!1===x(t)?dt.sanitizeWith((function(t){return ut(dt.getValue(t),r)})):dt.sanitize)(n)}return N()},Nt=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],Pt=function(t){var e=v(t);return f(e)?dt.sanitize(e).orThunk((function(){return I(Nt)})):!1===e?N():I(Nt)},Bt=function(t,e,n){var r=t.getAttrib(e,n);return null!==r&&r.length>0?I(r):N()},Mt=function(t,e){return _t(t).map((function(n){var r=function(t,e){var n=t.dom,r=rt(t.selection.getContent())?I(it(t.selection,e)):N(),o=e?I(n.getAttrib(e,"href")):N(),i=e?P(n.getAttrib(e,"target")):N(),u=Bt(n,e,"rel"),a=Bt(n,e,"class");return{url:o,text:r,title:Bt(n,e,"title"),target:i,rel:u,linkClass:a}}(t,e);return{anchor:r,catalogs:{targets:Pt(t),rels:It(t,r.target),classes:Et(t),anchor:At(t),link:n},optNode:P(e),flags:{titleEnabled:w(t)}}}))},Lt=function(t){(function(t){var e=ot(t);return Mt(t,e)})(t).map((function(e){var n=function(t,e,n){return function(r){var o=r.getData();if(!o.url.value)return Q(t),void r.close();var i=function(t){return P(o[t]).filter((function(n){return!e.anchor[t].is(n)}))},u={href:o.url.value,text:i("text"),target:i("target"),rel:i("rel"),class:i("linkClass"),title:i("title")},a={href:o.url.value,attach:void 0!==o.url.meta&&o.url.meta.attach?o.url.meta.attach:function(){}};Dt(t,n,u).get((function(e){Z(t,a,e)})),r.close()}}(t,e,m(t));return function(t,e,n){var r=t.anchor.text.map((function(){return{name:"text",type:"input",label:"Text to display"}})).toArray(),o=t.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],i=function(t,e){return{url:{value:t.anchor.url.getOr(""),meta:{attach:function(){},text:t.anchor.url.fold((function(){return""}),(function(){return t.anchor.text.getOr("")})),original:{value:t.anchor.url.getOr("")}}},text:t.anchor.text.getOr(""),title:t.anchor.title.getOr(""),anchor:t.anchor.url.getOr(""),link:t.anchor.url.getOr(""),rel:t.anchor.rel.getOr(""),target:t.anchor.target.or(e).getOr(""),linkClass:t.anchor.linkClass.getOr("")}}(t,P(h(n))),u=pt(i,t),a=t.catalogs;return{title:"Insert/Edit Link",size:"normal",body:{type:"panel",items:W([[{name:"url",type:"urlinput",filetype:"file",label:"URL"}],r,o,ct([a.anchor.map(dt.createUi("anchor","Anchors")),a.rels.map(dt.createUi("rel","Rel")),a.targets.map(dt.createUi("target","Open link in...")),a.link.map(dt.createUi("link","Link list")),a.classes.map(dt.createUi("linkClass","Class"))])])},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:i,onChange:function(t,e){var n=e.name;u.onChange(t.getData,{name:n}).each((function(e){t.setData(e)}))},onSubmit:e}}(e,n,t)})).get((function(e){t.windowManager.open(e)}))},jt=function(t,e){return t.dom.getParent(e,"a[href]")},Ut=function(t){return jt(t,t.selection.getStart())},Wt=function(t,e){if(e){var n=nt(e);if(/^#/.test(n)){var r=t.$(n);r.length&&t.selection.scrollIntoView(r[0],!0)}else S(e.href)}},Ft={openDialog:function(t){return function(){Lt(t)}},gotoSelectedLink:function(t){return function(){Wt(t,Ut(t))}},leftClickedOnAHref:function(t){return function(e){var n,r,o;return!!(p(t)&&tt(e)&&3===(o=(r=(n=t.selection).getRng()).startContainer).nodeType&&n.isCollapsed()&&r.startOffset>0&&r.startOffset<o.data.length)}},setupGotoLinks:function(t){t.on("click",(function(e){var n=jt(t,e.target);n&&a.metaKeyPressed(e)&&(e.preventDefault(),Wt(t,n))})),t.on("keydown",(function(e){var n=Ut(t);n&&13===e.keyCode&&function(t){return!0===t.altKey&&!1===t.shiftKey&&!1===t.ctrlKey&&!1===t.metaKey}(e)&&(e.preventDefault(),Wt(t,n))}))},toggleActiveState:function(t){return function(e){var n=function(n){return e.setActive(!t.readonly&&!!ot(t,n.element))};return t.on("NodeChange",n),function(){return t.off("NodeChange",n)}}},toggleEnabledState:function(t){return function(e){e.setDisabled(!et(t.dom.getParents(t.selection.getStart())));var n=function(t){return e.setDisabled(!et(t.parents))};return t.on("NodeChange",n),function(){return t.off("NodeChange",n)}}}},zt={register:function(t){t.addCommand("mceLink",(function(){C(t)?t.fire("contexttoolbar-show",{toolbarKey:"quicklink"}):Ft.openDialog(t)()}))}},Ht={setup:function(t){t.addShortcut("Meta+K","",(function(){t.execCommand("mceLink")}))}},qt={setupButtons:function(t){t.ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",onAction:Ft.openDialog(t),onSetup:Ft.toggleActiveState(t)}),t.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:Ft.gotoSelectedLink(t),onSetup:Ft.toggleEnabledState(t)}),t.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:function(){return Q(t)},onSetup:Ft.toggleEnabledState(t)})},setupMenuItems:function(t){t.ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:Ft.gotoSelectedLink(t),onSetup:Ft.toggleEnabledState(t)}),t.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onAction:Ft.openDialog(t)}),t.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:function(){return Q(t)},onSetup:Ft.toggleEnabledState(t)})},setupContextMenu:function(t){t.ui.registry.addContextMenu("link",{update:function(e){return et(t.dom.getParents(e,"a"))?"link unlink openlink":"link"}})},setupContextToolbars:function(t){var e=function(e){var n=t.selection.getNode();return e.setDisabled(!ot(t,n)),function(){}};t.ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:Ft.toggleActiveState(t)},label:"Link",predicate:function(e){return!!ot(t,e)&&p(t)},initValue:function(){var e=ot(t);return e?nt(e):""},commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:function(e){var n=t.selection.getNode();return e.setActive(!!ot(t,n)),Ft.toggleActiveState(t)(e)},onAction:function(e){var n=ot(t),r=e.getValue();if(n)t.dom.setAttrib(n,"href",r),function(t){t.selection.collapse(!1)}(t),e.hide();else{var o={href:r,attach:function(){}},i=rt(t.selection.getContent())?I(it(t.selection,n)).filter((function(t){return t.length>0})).or(P(r)):N();Z(t,o,{href:r,text:i,title:N(),rel:N(),target:N(),class:N()}),e.hide()}}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:e,onAction:function(e){Q(t),e.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:e,onAction:function(e){Ft.gotoSelectedLink(t)(),e.hide()}}]})}};u.add("link",(function(t){qt.setupButtons(t),qt.setupMenuItems(t),qt.setupContextMenu(t),qt.setupContextToolbars(t),Ft.setupGotoLinks(t),zt.register(t),Ht.setup(t)}))}(window)}).call(this,n("yLpj"))},zdkC:function(t,e,n){(function(t){n("0l/t"),n("KKXr"),n("pIFo"),n("bWfx"),n("2Spj"),n("rGqo"),n("yt8O"),n("Btvt"),n("91GP"),n("XfO3"),n("HEwt"),n("dZ+Y"),n("f3/d"),n("DW2E"),function(e){"use strict";var n,r,o,i,u=tinymce.util.Tools.resolve("tinymce.PluginManager"),a=function(){},c=function(t){return function(){return t}},l=function(t){return t},f=c(!1),s=c(!0),d=function(){return m},m=(n=function(t){return t.isNone()},i={fold:function(t,e){return t()},is:f,isSome:f,isNone:s,getOr:o=function(t){return t},getOrThunk:r=function(t){return t()},getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:c(null),getOrUndefined:c(void 0),or:o,orThunk:r,map:d,each:a,bind:d,exists:f,forall:s,filter:d,equals:n,equals_:n,toArray:function(){return[]},toString:c("none()")},Object.freeze&&Object.freeze(i),i),p=function t(e){var n=c(e),r=function(){return i},o=function(t){return t(e)},i={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:s,isNone:f,getOr:n,getOrThunk:n,getOrDie:n,getOrNull:n,getOrUndefined:n,or:r,orThunk:r,map:function(n){return t(n(e))},each:function(t){t(e)},bind:o,exists:o,forall:o,filter:function(t){return t(e)?i:m},toArray:function(){return[e]},toString:function(){return"some("+e+")"},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(f,(function(t){return n(e,t)}))}};return i},g={some:p,none:d,from:function(t){return null==t?m:p(t)}},h=function(t){return function(e){return function(t){if(null===t)return"null";var e=typeof t;return"object"===e&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"===e&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":e}(e)===t}},v=h("string"),b=h("object"),y=h("array"),w=h("boolean"),x=h("function"),C=Array.prototype.slice,S=Array.prototype.push,T=function(t){for(var e=[],n=0,r=t.length;n<r;++n){if(!y(t[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+t);S.apply(e,t[n])}return e},O=(x(Array.from)&&Array.from,function(){return(O=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)}),R={},D={exports:R};!function(e,n,r,o){!function(o){if("object"==typeof n&&void 0!==r)r.exports=o();else if("function"==typeof e&&e.amd)e([],o);else{("undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:this).EphoxContactWrapper=o()}}((function(){return function t(e,n,r){function i(a,c){if(!n[a]){if(!e[a]){var l="function"==typeof o&&o;if(!c&&l)return l(a,!0);if(u)return u(a,!0);var f=new Error("Cannot find module '"+a+"'");throw f.code="MODULE_NOT_FOUND",f}var s=n[a]={exports:{}};e[a][0].call(s.exports,(function(t){return i(e[a][1][t]||t)}),s,s.exports,t,e,n,r)}return n[a].exports}for(var u="function"==typeof o&&o,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(t,e,n){var r,o,i=e.exports={};function u(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function c(t){if(r===setTimeout)return setTimeout(t,0);if((r===u||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:u}catch(t){r=u}try{o="function"==typeof clearTimeout?clearTimeout:a}catch(t){o=a}}();var l,f=[],s=!1,d=-1;function m(){s&&l&&(s=!1,l.length?f=l.concat(f):d=-1,f.length&&p())}function p(){if(!s){var t=c(m);s=!0;for(var e=f.length;e;){for(l=f,f=[];++d<e;)l&&l[d].run();d=-1,e=f.length}l=null,s=!1,function(t){if(o===clearTimeout)return clearTimeout(t);if((o===a||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(t);try{o(t)}catch(e){try{return o.call(null,t)}catch(e){return o.call(this,t)}}}(t)}}function g(t,e){this.fun=t,this.array=e}function h(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];f.push(new g(t,e)),1!==f.length||s||c(p)},g.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=h,i.addListener=h,i.once=h,i.off=h,i.removeListener=h,i.removeAllListeners=h,i.emit=h,i.prependListener=h,i.prependOnceListener=h,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],2:[function(t,e,n){(function(t){!function(n){var r=setTimeout;function o(){}function i(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],s(t,this)}function u(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,i._immediateFn((function(){var n=1===t._state?e.onFulfilled:e.onRejected;if(null!==n){var r;try{r=n(t._value)}catch(o){return void c(e.promise,o)}a(e.promise,r)}else(1===t._state?a:c)(e.promise,t._value)}))):t._deferreds.push(e)}function a(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if(e instanceof i)return t._state=3,t._value=e,void l(t);if("function"==typeof n)return void s((r=n,o=e,function(){r.apply(o,arguments)}),t)}t._state=1,t._value=e,l(t)}catch(u){c(t,u)}var r,o}function c(t,e){t._state=2,t._value=e,l(t)}function l(t){2===t._state&&0===t._deferreds.length&&i._immediateFn((function(){t._handled||i._unhandledRejectionFn(t._value)}));for(var e=0,n=t._deferreds.length;e<n;e++)u(t,t._deferreds[e]);t._deferreds=null}function f(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function s(t,e){var n=!1;try{t((function(t){n||(n=!0,a(e,t))}),(function(t){n||(n=!0,c(e,t))}))}catch(r){if(n)return;n=!0,c(e,r)}}i.prototype.catch=function(t){return this.then(null,t)},i.prototype.then=function(t,e){var n=new this.constructor(o);return u(this,new f(t,e,n)),n},i.all=function(t){var e=Array.prototype.slice.call(t);return new i((function(t,n){if(0===e.length)return t([]);var r=e.length;function o(i,u){try{if(u&&("object"==typeof u||"function"==typeof u)){var a=u.then;if("function"==typeof a)return void a.call(u,(function(t){o(i,t)}),n)}e[i]=u,0==--r&&t(e)}catch(c){n(c)}}for(var i=0;i<e.length;i++)o(i,e[i])}))},i.resolve=function(t){return t&&"object"==typeof t&&t.constructor===i?t:new i((function(e){e(t)}))},i.reject=function(t){return new i((function(e,n){n(t)}))},i.race=function(t){return new i((function(e,n){for(var r=0,o=t.length;r<o;r++)t[r].then(e,n)}))},i._immediateFn="function"==typeof t?function(e){t(e)}:function(t){r(t,0)},i._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)},i._setImmediateFn=function(t){i._immediateFn=t},i._setUnhandledRejectionFn=function(t){i._unhandledRejectionFn=t},void 0!==e&&e.exports?e.exports=i:n.Promise||(n.Promise=i)}(this)}).call(this,t("timers").setImmediate)},{timers:3}],3:[function(t,e,n){(function(e,r){var o=t("process/browser.js").nextTick,i=Function.prototype.apply,u=Array.prototype.slice,a={},c=0;function l(t,e){this._id=t,this._clearFn=e}n.setTimeout=function(){return new l(i.call(setTimeout,window,arguments),clearTimeout)},n.setInterval=function(){return new l(i.call(setInterval,window,arguments),clearInterval)},n.clearTimeout=n.clearInterval=function(t){t.close()},l.prototype.unref=l.prototype.ref=function(){},l.prototype.close=function(){this._clearFn.call(window,this._id)},n.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},n.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},n._unrefActive=n.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},n.setImmediate="function"==typeof e?e:function(t){var e=c++,r=!(arguments.length<2)&&u.call(arguments,1);return a[e]=!0,o((function(){a[e]&&(r?t.apply(null,r):t.call(null),n.clearImmediate(e))})),e},n.clearImmediate="function"==typeof r?r:function(t){delete a[t]}}).call(this,t("timers").setImmediate,t("timers").clearImmediate)},{"process/browser.js":1,timers:3}],4:[function(t,e,n){var r=t("promise-polyfill"),o="undefined"!=typeof window?window:Function("return this;")();e.exports={boltExport:o.Promise||r}},{"promise-polyfill":2}]},{},[4])(4)}))}(void 0,R,D,void 0);var A=D.exports.boltExport,E=function t(n){var r=g.none(),o=[],i=function(t){u()?c(t):o.push(t)},u=function(){return r.isSome()},a=function(t){!function(t,e){for(var n=0,r=t.length;n<r;n++){e(t[n],n)}}(t,c)},c=function(t){r.each((function(n){e.setTimeout((function(){t(n)}),0)}))};return n((function(t){r=g.some(t),a(o),o=[]})),{get:i,map:function(e){return t((function(t){i((function(n){t(e(n))}))}))},isReady:u}},k=E,_=function(t){e.setTimeout((function(){throw t}),0)},I=function t(e){var n=function(t){e().then(t,_)};return{map:function(n){return t((function(){return e().then(n)}))},bind:function(n){return t((function(){return e().then((function(t){return n(t).toPromise()}))}))},anonBind:function(n){return t((function(){return e().then((function(){return n.toPromise()}))}))},toLazy:function(){return k(n)},toCached:function(){var n=null;return t((function(){return null===n&&(n=e()),n}))},toPromise:e,get:n}},N=function(t){return I((function(){return new A(t)}))},P=function(t){return I((function(){return A.resolve(t)}))},B=function t(e){return{is:function(t){return e===t},isValue:s,isError:f,getOr:c(e),getOrThunk:c(e),getOrDie:c(e),or:function(n){return t(e)},orThunk:function(n){return t(e)},fold:function(t,n){return n(e)},map:function(n){return t(n(e))},mapError:function(n){return t(e)},each:function(t){t(e)},bind:function(t){return t(e)},exists:function(t){return t(e)},forall:function(t){return t(e)},toOption:function(){return g.some(e)}}},M=function t(e){return{is:f,isValue:f,isError:s,getOr:l,getOrThunk:function(t){return t()},getOrDie:function(){return(t=String(e),function(){throw new Error(t)})();var t},or:function(t){return t},orThunk:function(t){return t()},fold:function(t,n){return t(e)},map:function(n){return t(e)},mapError:function(n){return t(n(e))},each:a,bind:function(n){return t(e)},exists:f,forall:s,toOption:g.none}},L=B,j=M,U=function t(n){return O(O({},n),{toCached:function(){return t(n.toCached())},bindFuture:function(e){return t(n.bind((function(t){return t.fold((function(t){return P(j(t))}),(function(t){return e(t)}))})))},bindResult:function(e){return t(n.map((function(t){return t.bind(e)})))},mapResult:function(e){return t(n.map((function(t){return t.map(e)})))},mapError:function(e){return t(n.map((function(t){return t.mapError(e)})))},foldResult:function(t,e){return n.map((function(n){return n.fold(t,e)}))},withTimeout:function(r,o){return t(N((function(t){var i=!1,u=e.setTimeout((function(){i=!0,t(j(o()))}),r);n.get((function(n){i||(e.clearTimeout(u),t(n))}))})))}})},W=function(t){return U(N(t))},F=W,z=Object.prototype.hasOwnProperty,H=function(t){return function(){for(var e=new Array(arguments.length),n=0;n<e.length;n++)e[n]=arguments[n];if(0===e.length)throw new Error("Can't merge zero objects");for(var r={},o=0;o<e.length;o++){var i=e[o];for(var u in i)z.call(i,u)&&(r[u]=t(r[u],i[u]))}return r}},q=H((function(t,e){return b(t)&&b(e)?q(t,e):e})),V=H((function(t,e){return e})),G=function(t){var e=t.imageList.map((function(t){return{name:"images",type:"selectbox",label:"Image list",items:t}})),n=t.classList.map((function(t){return{name:"classes",type:"selectbox",label:"Class",items:t}}));return T([[{name:"src",type:"urlinput",filetype:"image",label:"Source"}],e.toArray(),t.hasDescription?[{name:"alt",type:"input",label:"Image description"}]:[],t.hasImageTitle?[{name:"title",type:"input",label:"Image title"}]:[],t.hasDimensions?[{name:"dimensions",type:"sizeinput"}]:[],[{type:"grid",columns:2,items:T([n.toArray(),t.hasImageCaption?[{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[]])}]])},K=function(t){return{title:"General",name:"general",items:G(t)}},X=G,Y=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),$=tinymce.util.Tools.resolve("tinymce.util.Promise"),J=tinymce.util.Tools.resolve("tinymce.util.XHR"),Z=function(t){return t.getParam("images_upload_url","","string")},Q=function(t){return t.getParam("images_upload_handler",void 0,"function")},tt={hasDimensions:function(t){return t.getParam("image_dimensions",!0,"boolean")},hasUploadTab:function(t){return t.getParam("image_uploadtab",!0,"boolean")},hasAdvTab:function(t){return t.getParam("image_advtab",!1,"boolean")},getPrependUrl:function(t){return t.getParam("image_prepend_url","","string")},getClassList:function(t){return t.getParam("image_class_list")},hasDescription:function(t){return t.getParam("image_description",!0,"boolean")},hasImageTitle:function(t){return t.getParam("image_title",!1,"boolean")},hasImageCaption:function(t){return t.getParam("image_caption",!1,"boolean")},getImageList:function(t){return t.getParam("image_list",!1)},hasUploadUrl:function(t){return!!Z(t)},hasUploadHandler:function(t){return!!Q(t)},getUploadUrl:Z,getUploadHandler:Q,getUploadBasePath:function(t){return t.getParam("images_upload_base_path",void 0,"string")},getUploadCredentials:function(t){return t.getParam("images_upload_credentials",!1,"boolean")}},et=function(t,e){return Math.max(parseInt(t,10),parseInt(e,10))},nt=function(t,n){var r=e.document.createElement("img"),o=function(t){r.parentNode&&r.parentNode.removeChild(r),n(t)};r.onload=function(){var t=et(r.width,r.clientWidth),e=et(r.height,r.clientHeight);o(L({width:t,height:e}))},r.onerror=function(){o(j("Failed to get image dimensions for: "+t))};var i=r.style;i.visibility="hidden",i.position="fixed",i.bottom=i.left="0px",i.width=i.height="auto",e.document.body.appendChild(r),r.src=t},rt=function(t){return t&&(t=t.replace(/px$/,"")),t},ot=function(t){return t.length>0&&/^[0-9]+$/.test(t)&&(t+="px"),t},it=function(t){if(t.margin){var e=String(t.margin).split(" ");switch(e.length){case 1:t["margin-top"]=t["margin-top"]||e[0],t["margin-right"]=t["margin-right"]||e[0],t["margin-bottom"]=t["margin-bottom"]||e[0],t["margin-left"]=t["margin-left"]||e[0];break;case 2:t["margin-top"]=t["margin-top"]||e[0],t["margin-right"]=t["margin-right"]||e[1],t["margin-bottom"]=t["margin-bottom"]||e[0],t["margin-left"]=t["margin-left"]||e[1];break;case 3:t["margin-top"]=t["margin-top"]||e[0],t["margin-right"]=t["margin-right"]||e[1],t["margin-bottom"]=t["margin-bottom"]||e[2],t["margin-left"]=t["margin-left"]||e[1];break;case 4:t["margin-top"]=t["margin-top"]||e[0],t["margin-right"]=t["margin-right"]||e[1],t["margin-bottom"]=t["margin-bottom"]||e[2],t["margin-left"]=t["margin-left"]||e[3]}delete t.margin}return t},ut=function(t,e){var n=tt.getImageList(t);"string"==typeof n?J.send({url:n,success:function(t){e(JSON.parse(t))}}):"function"==typeof n?n(e):e(n)},at=function(t,e,n){var r=function(){n.onload=n.onerror=null,t.selection&&(t.selection.select(n),t.nodeChanged())};n.onload=function(){e.width||e.height||!tt.hasDimensions(t)||t.dom.setAttribs(n,{width:String(n.clientWidth),height:String(n.clientHeight)}),r()},n.onerror=r},ct=function(t){return new $((function(n,r){var o=new e.FileReader;o.onload=function(){n(o.result)},o.onerror=function(){r(o.error.message)},o.readAsDataURL(t)}))},lt=function(t){return"IMG"===t.nodeName&&(t.hasAttribute("data-mce-object")||t.hasAttribute("data-mce-placeholder"))},ft=Y.DOM,st=function(t){return t.style.marginLeft&&t.style.marginRight&&t.style.marginLeft===t.style.marginRight?rt(t.style.marginLeft):""},dt=function(t){return t.style.marginTop&&t.style.marginBottom&&t.style.marginTop===t.style.marginBottom?rt(t.style.marginTop):""},mt=function(t){return t.style.borderWidth?rt(t.style.borderWidth):""},pt=function(t,e){return t.hasAttribute(e)?t.getAttribute(e):""},gt=function(t,e){return t.style[e]?t.style[e]:""},ht=function(t){return null!==t.parentNode&&"FIGURE"===t.parentNode.nodeName},vt=function(t,e,n){t.setAttribute(e,n)},bt=function(t){ht(t)?function(t){var e=t.parentNode;ft.insertAfter(t,e),ft.remove(e)}(t):function(t){var e=ft.create("figure",{class:"image"});ft.insertAfter(e,t),e.appendChild(t),e.appendChild(ft.create("figcaption",{contentEditable:"true"},"Caption")),e.contentEditable="false"}(t)},yt=function(t,e){var n=t.getAttribute("style"),r=e(null!==n?n:"");r.length>0?(t.setAttribute("style",r),t.setAttribute("data-mce-style",r)):t.removeAttribute("style")},wt=function(t,e){return function(t,n,r){t.style[n]?(t.style[n]=ot(r),yt(t,e)):vt(t,n,r)}},xt=function(t,e){return t.style[e]?rt(t.style[e]):pt(t,e)},Ct=function(t,e){var n=ot(e);t.style.marginLeft=n,t.style.marginRight=n},St=function(t,e){var n=ot(e);t.style.marginTop=n,t.style.marginBottom=n},Tt=function(t,e){var n=ot(e);t.style.borderWidth=n},Ot=function(t,e){t.style.borderStyle=e},Rt=function(t){return"FIGURE"===t.nodeName},Dt=function(t,n){var r=e.document.createElement("img");return vt(r,"style",n.style),(st(r)||""!==n.hspace)&&Ct(r,n.hspace),(dt(r)||""!==n.vspace)&&St(r,n.vspace),(mt(r)||""!==n.border)&&Tt(r,n.border),(function(t){return gt(t,"borderStyle")}(r)||""!==n.borderStyle)&&Ot(r,n.borderStyle),t(r.getAttribute("style"))},At=function(t,e){return{src:pt(e,"src"),alt:pt(e,"alt"),title:pt(e,"title"),width:xt(e,"width"),height:xt(e,"height"),class:pt(e,"class"),style:t(pt(e,"style")),caption:ht(e),hspace:st(e),vspace:dt(e),border:mt(e),borderStyle:gt(e,"borderStyle")}},Et=function(t,e,n,r,o){n[r]!==e[r]&&o(t,r,n[r])},kt=function(t,e){return function(n,r,o){t(n,o),yt(n,e)}},_t=function(t,e,n){var r=At(t,n);Et(n,r,e,"caption",(function(t,e,n){return bt(t)})),Et(n,r,e,"src",vt),Et(n,r,e,"alt",vt),Et(n,r,e,"title",vt),Et(n,r,e,"width",wt(0,t)),Et(n,r,e,"height",wt(0,t)),Et(n,r,e,"class",vt),Et(n,r,e,"style",kt((function(t,e){return vt(t,"style",e)}),t)),Et(n,r,e,"hspace",kt(Ct,t)),Et(n,r,e,"vspace",kt(St,t)),Et(n,r,e,"border",kt(Tt,t)),Et(n,r,e,"borderStyle",kt(Ot,t))},It=function(t,e){var n=t.dom.styles.parse(e),r=it(n),o=t.dom.styles.parse(t.dom.styles.serialize(r));return t.dom.styles.serialize(o)},Nt=function(t){var e=t.selection.getNode(),n=t.dom.getParent(e,"figure.image");return n?t.dom.select("img",n)[0]:e&&("IMG"!==e.nodeName||lt(e))?null:e},Pt=function(t,e){var n=t.dom,r=n.getParent(e.parentNode,(function(e){return t.schema.getTextBlockElements()[e.nodeName]}),t.getBody());return r?n.split(r,e):e},Bt=function(t,n){var r=function(t,n){var r=e.document.createElement("img");if(_t(t,V(n,{caption:!1}),r),vt(r,"alt",n.alt),n.caption){var o=ft.create("figure",{class:"image"});return o.appendChild(r),o.appendChild(ft.create("figcaption",{contentEditable:"true"},"Caption")),o.contentEditable="false",o}return r}((function(e){return It(t,e)}),n);t.dom.setAttrib(r,"data-mce-id","__mcenew"),t.focus(),t.selection.setContent(r.outerHTML);var o=t.dom.select('*[data-mce-id="__mcenew"]')[0];if(t.dom.setAttrib(o,"data-mce-id",null),Rt(o)){var i=Pt(t,o);t.selection.select(i)}else t.selection.select(o)},Mt=function(t,e){var n=Nt(t);n?e.src?function(t,e){var n=Nt(t);if(_t((function(e){return It(t,e)}),e,n),function(t,e){t.dom.setAttrib(e,"src",e.getAttribute("src"))}(t,n),Rt(n.parentNode)){var r=n.parentNode;Pt(t,r),t.selection.select(n.parentNode)}else t.selection.select(n),at(t,e,n)}(t,e):function(t,e){if(e){var n=t.dom.is(e.parentNode,"figure.image")?e.parentNode:e;t.dom.remove(n),t.focus(),t.nodeChanged(),t.dom.isEmpty(t.getBody())&&(t.setContent(""),t.selection.setCursorLocation())}}(t,n):e.src&&Bt(t,e)},Lt=tinymce.util.Tools.resolve("tinymce.util.Tools"),jt=function(t){return v(t.value)?t.value:""},Ut=function(t){return void 0===t&&(t=jt),function(e){return e?g.from(e).map((function(e){return function t(e,n){var r=[];return Lt.each(e,(function(e){var o=v(e.text)?e.text:v(e.title)?e.title:"";if(void 0!==e.menu){var i=t(e.menu,n);r.push({text:o,items:i})}else{var u=n(e);r.push({text:o,value:u})}})),r}(e,t)})):g.none()}},Wt=function t(e,n){return function(t,e){for(var n=0;n<t.length;n++){var r=e(t[n],n);if(r.isSome())return r}return g.none()}(e,(function(e){return function(t){return Object.prototype.hasOwnProperty.call(t,"items")}(e)?t(e.items,n):e.value===n?g.some(e):g.none()}))},Ft=Ut,zt=function(t){return Ut(jt)(t)},Ht=function(t,e){return t.bind((function(t){return Wt(t,e)}))},qt=function(t,e){return t?t.replace(/\/$/,"")+"/"+e.replace(/^\//,""):e};function Vt(t){var n=function(n,r,o,i){var u,a;(u=new e.XMLHttpRequest).open("POST",t.url),u.withCredentials=t.credentials,u.upload.onprogress=function(t){i(t.loaded/t.total*100)},u.onerror=function(){o("Image upload failed due to a XHR Transport error. Code: "+u.status)},u.onload=function(){var e;u.status<200||u.status>=300?o("HTTP Error: "+u.status):(e=JSON.parse(u.responseText))&&"string"==typeof e.location?r(qt(t.basePath,e.location)):o("Invalid JSON: "+u.responseText)},(a=new e.FormData).append("file",n.blob(),n.filename()),u.send(a)};return t=Lt.extend({credentials:!1,handler:n},t),{upload:function(e){return t.url||t.handler!==n?function(t,e){return new $((function(n,r){try{e(t,n,r,a)}catch(o){r(o.message)}}))}(e,t.handler):$.reject("Upload url missing from the settings.")}}}var Gt=function(t){return{title:"Advanced",name:"advanced",items:[{type:"input",label:"Style",name:"style"},{type:"grid",columns:2,items:[{type:"input",label:"Vertical space",name:"vspace",inputMode:"numeric"},{type:"input",label:"Horizontal space",name:"hspace",inputMode:"numeric"},{type:"input",label:"Border width",name:"border",inputMode:"numeric"},{type:"selectbox",name:"borderstyle",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]}]}},Kt=function(t){var e=Ft((function(e){return t.convertURL(e.value||e.url,"src")})),n=N((function(n){ut(t,(function(t){n(e(t).map((function(t){return T([[{text:"None",value:""}],t])})))}))})),r=zt(tt.getClassList(t)),o=tt.hasAdvTab(t),i=tt.hasUploadTab(t),u=tt.hasUploadUrl(t),a=tt.hasUploadHandler(t),c=function(t){var e=Nt(t);return e?At((function(e){return It(t,e)}),e):{src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:""}}(t),l=tt.hasDescription(t),f=tt.hasImageTitle(t),s=tt.hasDimensions(t),d=tt.hasImageCaption(t),m=tt.getUploadUrl(t),p=tt.getUploadBasePath(t),h=tt.getUploadCredentials(t),b=tt.getUploadHandler(t),y=g.some(tt.getPrependUrl(t)).filter((function(t){return v(t)&&t.length>0}));return n.map((function(t){return{image:c,imageList:t,classList:r,hasAdvTab:o,hasUploadTab:i,hasUploadUrl:u,hasUploadHandler:a,hasDescription:l,hasImageTitle:f,hasDimensions:s,hasImageCaption:d,url:m,basePath:p,credentials:h,handler:b,prependURL:y}}))},Xt=function(t){return{title:"Upload",name:"upload",items:[{type:"dropzone",name:"fileinput"}]}},Yt=function(t){return{src:{value:t.src,meta:{}},images:t.src,alt:t.alt,title:t.title,dimensions:{width:t.width,height:t.height},classes:t.class,caption:t.caption,style:t.style,vspace:t.vspace,border:t.border,hspace:t.hspace,borderstyle:t.borderStyle,fileinput:[]}},$t=function(t){return{src:t.src.value,alt:t.alt,title:t.title,width:t.dimensions.width,height:t.dimensions.height,class:t.classes,style:t.style,caption:t.caption,hspace:t.hspace,vspace:t.vspace,border:t.border,borderStyle:t.borderstyle}},Jt=function(t,e){var n=e.getData();(function(t,e){return/^(?:[a-zA-Z]+:)?\/\//.test(e)?g.none():t.prependURL.bind((function(t){return e.substring(0,t.length)!==t?g.some(t+e):g.none()}))})(t,n.src.value).each((function(t){e.setData({src:{value:t,meta:n.src.meta}})}))},Zt=function(t,e){var n=e.getData(),r=n.src.meta;if(void 0!==r){var o=q({},n);!function(t,e,n){t.hasDescription&&v(n.alt)&&(e.alt=n.alt),t.hasImageTitle&&v(n.title)&&(e.title=n.title),t.hasDimensions&&(v(n.width)&&(e.dimensions.width=n.width),v(n.height)&&(e.dimensions.height=n.height)),v(n.class)&&Ht(t.classList,n.class).each((function(t){e.classes=t.value})),t.hasImageCaption&&w(n.caption)&&(e.caption=n.caption),t.hasAdvTab&&(v(n.vspace)&&(e.vspace=n.vspace),v(n.border)&&(e.border=n.border),v(n.hspace)&&(e.hspace=n.hspace),v(n.borderstyle)&&(e.borderstyle=n.borderstyle))}(t,o,r),e.setData(o)}},Qt=function(t,e,n,r){Jt(e,r),Zt(e,r),function(t,e,n,r){var o=r.getData(),i=o.src.value,u=o.src.meta||{};u.width||u.height||!e.hasDimensions||t.imageSize(i).get((function(t){t.each((function(t){n.open&&r.setData({dimensions:t})}))}))}(t,e,n,r),function(t,e,n){var r=n.getData(),o=Ht(t.imageList,r.src.value);e.prevImage=o,n.setData({images:o.map((function(t){return t.value})).getOr("")})}(e,n,r)},te=function(t,e,n){var r=it(t(n.style)),o=q({},n);return o.vspace=function(t){return t["margin-top"]&&t["margin-bottom"]&&t["margin-top"]===t["margin-bottom"]?rt(String(t["margin-top"])):""}(r),o.hspace=function(t){return t["margin-right"]&&t["margin-left"]&&t["margin-right"]===t["margin-left"]?rt(String(t["margin-right"])):""}(r),o.border=function(t){return t["border-width"]?rt(String(t["border-width"])):""}(r),o.borderstyle=function(t){return t["border-style"]?String(t["border-style"]):""}(r),o.style=function(t,e,n){return e(t(e(n)))}(t,e,r),o},ee=function(t,n,r,o){var i,u=o.getData();o.block("Uploading image"),(i=u.fileinput,0===i.length?g.none():g.some(i[0])).fold((function(){o.unblock()}),(function(i){var u=e.URL.createObjectURL(i),a=Vt({url:n.url,basePath:n.basePath,credentials:n.credentials,handler:n.handler}),c=function(){o.unblock(),e.URL.revokeObjectURL(u)};ct(i).then((function(e){var l=t.createBlobCache(i,u,e);a.upload(l).then((function(e){o.setData({src:{value:e,meta:{}}}),o.showTab("general"),Qt(t,n,r,o),c()})).catch((function(e){c(),t.alertErr(o,e)}))}))}))},ne=function(t,e,n){return function(r,o){"src"===o.name?Qt(t,e,n,r):"images"===o.name?function(t,e,n,r){var o=r.getData(),i=Ht(e.imageList,o.images);i.each((function(t){""===o.alt||n.prevImage.map((function(t){return t.text===o.alt})).getOr(!1)?""===t.value?r.setData({src:t,alt:n.prevAlt}):r.setData({src:t,alt:t.text}):r.setData({src:t})})),n.prevImage=i,Qt(t,e,n,r)}(t,e,n,r):"alt"===o.name?n.prevAlt=r.getData().alt:"style"===o.name?function(t,e){var n=e.getData(),r=te(t.parseStyle,t.serializeStyle,n);e.setData(r)}(t,r):"vspace"===o.name||"hspace"===o.name||"border"===o.name||"borderstyle"===o.name?function(t,e,n){var r=q(Yt(e.image),n.getData()),o=Dt(t.normalizeCss,$t(r));n.setData({style:o})}(t,e,r):"fileinput"===o.name&&ee(t,e,n,r)}},re=function(t){return function(){t.open=!1}},oe=function(t){return t.hasAdvTab||t.hasUploadUrl||t.hasUploadHandler?{type:"tabpanel",tabs:T([[K(t)],t.hasAdvTab?[Gt(t)]:[],t.hasUploadTab&&(t.hasUploadUrl||t.hasUploadHandler)?[Xt(t)]:[]])}:{type:"panel",items:X(t)}},ie=function(t){return function(e){var n=function(t){return{prevImage:Ht(t.imageList,t.image.src),prevAlt:t.image.alt,open:!0}}(e);return{title:"Insert/Edit Image",size:"normal",body:oe(e),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:Yt(e.image),onSubmit:t.onSubmit(e),onChange:ne(t,e,n),onClose:re(n)}}},ue=function(t){return function(e){return function(n){var r=q(Yt(e.image),n.getData());t.undoManager.transact((function(){Mt(t,$t(r))})),t.editorUpload.uploadImagesAuto(),n.close()}}},ae=function(t){return function(e){return F((function(n){nt(t.documentBaseURI.toAbsolute(e),(function(t){var e=t.map((function(t){return{width:String(t.width),height:String(t.height)}}));n(e)}))}))}},ce=function(t){return function(e,n,r){return t.editorUpload.blobCache.create({blob:e,blobUri:n,name:e.name?e.name.replace(/\.[^\.]+$/,""):null,base64:r.split(",")[1]})}},le=function(t){return function(e,n){t.windowManager.alert(n,e.close)}},fe=function(t){return function(e){return It(t,e)}},se=function(t){return function(e){return t.dom.parseStyle(e)}},de=function(t){return function(e,n){return t.dom.serializeStyle(e,n)}},me=function(t){var e={onSubmit:ue(t),imageSize:ae(t),createBlobCache:ce(t),alertErr:le(t),normalizeCss:fe(t),parseStyle:se(t),serializeStyle:de(t)};return{open:function(){return Kt(t).map(ie(e)).get((function(e){t.windowManager.open(e)}))}}},pe={register:function(t){t.addCommand("mceImage",me(t).open)}},ge=function(t){var e=t.attr("class");return e&&/\bimage\b/.test(e)},he=function(t){return function(e){for(var n=e.length,r=function(e){e.attr("contenteditable",t?"true":null)};n--;){var o=e[n];ge(o)&&(o.attr("contenteditable",t?"false":null),Lt.each(o.getAll("figcaption"),r))}}},ve={setup:function(t){t.on("PreInit",(function(){t.parser.addNodeFilter("figure",he(!0)),t.serializer.addNodeFilter("figure",he(!1))}))}},be={register:function(t){t.ui.registry.addToggleButton("image",{icon:"image",tooltip:"Insert/edit image",onAction:me(t).open,onSetup:function(e){return t.selection.selectorChangedWithUnbind("img:not([data-mce-object],[data-mce-placeholder]),figure.image",e.setActive).unbind}}),t.ui.registry.addMenuItem("image",{icon:"image",text:"Image...",onAction:me(t).open}),t.ui.registry.addContextMenu("image",{update:function(t){return Rt(t)||"IMG"===t.nodeName&&!lt(t)?["image"]:[]}})}};u.add("image",(function(t){ve.setup(t),be.register(t),pe.register(t)}))}(window)}).call(this,n("yLpj"))}}]);
//# sourceMappingURL=component---src-pages-editors-tinymce-js-271b6594ec333b8b7b98.js.map