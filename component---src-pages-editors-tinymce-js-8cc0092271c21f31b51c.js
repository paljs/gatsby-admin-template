(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"4le0":function(t,n,e){"use strict";(function(t){e.d(n,"a",(function(){return o}));var r=function(){return"undefined"!=typeof window?window:t},o=function(){var t=r();return t&&t.tinymce?t.tinymce:null}}).call(this,e("yLpj"))},"7x9u":function(t,n){!function(){"use strict";var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=function(t,n){t.focus(),t.undoManager.transact((function(){t.setContent(n)})),t.selection.setCursorLocation(),t.nodeChanged()},e=function(t){return t.getContent({source_view:!0})},r=function(t){var r=e(t);t.windowManager.open({title:"Source Code",size:"large",body:{type:"panel",items:[{type:"textarea",name:"code"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{code:r},onSubmit:function(e){n(t,e.getData().code),e.close()}})},o={register:function(t){t.addCommand("mceCodeEditor",(function(){r(t)}))}},i={register:function(t){t.ui.registry.addButton("code",{icon:"sourcecode",tooltip:"Source code",onAction:function(){return r(t)}}),t.ui.registry.addMenuItem("code",{icon:"sourcecode",text:"Source code",onAction:function(){return r(t)}})}};t.add("code",(function(t){return o.register(t),i.register(t),{}}))}()},B9FH:function(t,n,e){e("lM69")},Qjfq:function(t,n,e){e("vn/0")},Tqh3:function(t,n,e){e("zdkC")},UYf5:function(t,n,e){"use strict";e.r(n);e("E5k/"),e("pS08"),e("LagC");var r,o=e("q1tI"),i=(e("JHok"),e("HQhv"),e("MIFh"),e("rzGZ"),e("Dq+y"),e("8npG"),e("Ggvi"),e("OeI1"),e("AqHK"),e("17x9")),u=function(){return(u=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t}).apply(this,arguments)},a={onActivate:i.func,onAddUndo:i.func,onBeforeAddUndo:i.func,onBeforeExecCommand:i.func,onBeforeGetContent:i.func,onBeforeRenderUI:i.func,onBeforeSetContent:i.func,onBeforePaste:i.func,onBlur:i.func,onChange:i.func,onClearUndos:i.func,onClick:i.func,onContextMenu:i.func,onCopy:i.func,onCut:i.func,onDblclick:i.func,onDeactivate:i.func,onDirty:i.func,onDrag:i.func,onDragDrop:i.func,onDragEnd:i.func,onDragGesture:i.func,onDragOver:i.func,onDrop:i.func,onExecCommand:i.func,onFocus:i.func,onFocusIn:i.func,onFocusOut:i.func,onGetContent:i.func,onHide:i.func,onInit:i.func,onKeyDown:i.func,onKeyPress:i.func,onKeyUp:i.func,onLoadContent:i.func,onMouseDown:i.func,onMouseEnter:i.func,onMouseLeave:i.func,onMouseMove:i.func,onMouseOut:i.func,onMouseOver:i.func,onMouseUp:i.func,onNodeChange:i.func,onObjectResizeStart:i.func,onObjectResized:i.func,onObjectSelected:i.func,onPaste:i.func,onPostProcess:i.func,onPostRender:i.func,onPreProcess:i.func,onProgressState:i.func,onRedo:i.func,onRemove:i.func,onReset:i.func,onSaveContent:i.func,onSelectionChange:i.func,onSetAttrib:i.func,onSetContent:i.func,onShow:i.func,onSubmit:i.func,onUndo:i.func,onVisualAid:i.func},c=u({apiKey:i.string,id:i.string,inline:i.bool,init:i.object,initialValue:i.string,onEditorChange:i.func,value:i.string,tagName:i.string,cloudChannel:i.string,plugins:i.oneOfType([i.string,i.array]),toolbar:i.oneOfType([i.string,i.array]),disabled:i.bool,textareaName:i.string},a),l=function(t){return"function"==typeof t},f=function(t){return t in a},s=function(t,n,e){(function(t){return Object.keys(t).filter(f).filter((function(n){return l(t[n])})).map((function(n){return{handler:t[n],eventName:n.substring(2)}}))})(n).forEach((function(n){var r=e[n.eventName];l(r)&&t.off(n.eventName,r);var o=function(e){return n.handler(e,t)};e[n.eventName]=o,t.on(n.eventName,o)}))},d=0,m=function(t){var n=(new Date).getTime();return t+"_"+Math.floor(1e9*Math.random())+ ++d+String(n)},p=function(t){return null!==t&&"textarea"===t.tagName.toLowerCase()},g=function(t){return void 0===t||""===t?[]:Array.isArray(t)?t:t.split(" ")},h=function(t,n){return g(t).concat(g(n))},v=e("4le0"),b=(r=function(t,n){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)},function(t,n){function e(){this.constructor=t}r(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}),y=function(){return(y=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t}).apply(this,arguments)},w={listeners:[],scriptId:m("tiny-script"),scriptLoaded:!1},x=function(t){function n(n){var e=t.call(this,n)||this;return e.initialise=function(){var t=y({},e.props.init,{target:e.elementRef.current,readonly:e.props.disabled,inline:e.inline,plugins:h(e.props.init&&e.props.init.plugins,e.props.plugins),toolbar:e.props.toolbar||e.props.init&&e.props.init.toolbar,setup:function(t){e.editor=t,t.on("init",(function(n){e.initEditor(n,t)})),e.props.init&&"function"==typeof e.props.init.setup&&e.props.init.setup(t)}});p(e.elementRef.current)&&(e.elementRef.current.style.visibility=""),Object(v.a)().init(t)},e.id=e.props.id||m("tiny-react"),e.elementRef=o.createRef(),e.inline=e.props.inline?e.props.inline:e.props.init&&e.props.init.inline,e.boundHandlers={},e}return b(n,t),n.prototype.componentDidUpdate=function(t){this.editor&&this.editor.initialized&&(s(this.editor,this.props,this.boundHandlers),this.currentContent=this.currentContent||this.editor.getContent(),"string"==typeof this.props.value&&this.props.value!==t.value&&this.props.value!==this.currentContent&&this.editor.setContent(this.props.value),"boolean"==typeof this.props.disabled&&this.props.disabled!==t.disabled&&this.editor.setMode(this.props.disabled?"readonly":"design"))},n.prototype.componentDidMount=function(){if(null!==Object(v.a)())this.initialise();else if(this.elementRef.current&&this.elementRef.current.ownerDocument){var t=this.elementRef.current.ownerDocument,n=this.props.cloudChannel,e=this.props.apiKey?this.props.apiKey:"no-api-key";!function(t,n,e,r){t.scriptLoaded?r():(t.listeners.push(r),n.getElementById(t.scriptId)||function(t,n,e,r){var o=n.createElement("script");o.referrerPolicy="origin",o.type="application/javascript",o.id=t,o.addEventListener("load",r),o.src=e,n.head&&n.head.appendChild(o)}(t.scriptId,n,e,(function(){t.listeners.forEach((function(t){return t()})),t.scriptLoaded=!0})))}(w,t,"https://cdn.tiny.cloud/1/"+e+"/tinymce/"+n+"/tinymce.min.js",this.initialise)}},n.prototype.componentWillUnmount=function(){null!==Object(v.a)()&&Object(v.a)().remove(this.editor)},n.prototype.render=function(){return this.inline?this.renderInline():this.renderIframe()},n.prototype.initEditor=function(t,n){var e=this,r="string"==typeof this.props.value?this.props.value:"string"==typeof this.props.initialValue?this.props.initialValue:"";n.setContent(r),l(this.props.onEditorChange)&&n.on("change keyup setcontent",(function(t){var r=n.getContent();r!==e.currentContent&&(e.currentContent=r,l(e.props.onEditorChange)&&e.props.onEditorChange(e.currentContent,n))})),l(this.props.onInit)&&this.props.onInit(t,n),s(n,this.props,this.boundHandlers)},n.prototype.renderInline=function(){var t=this.props.tagName,n=void 0===t?"div":t;return o.createElement(n,{ref:this.elementRef,id:this.id})},n.prototype.renderIframe=function(){return o.createElement("textarea",{ref:this.elementRef,style:{visibility:"hidden"},name:this.props.textareaName,id:this.id})},n.propTypes=c,n.defaultProps={cloudChannel:"5"},n}(o.Component);e.d(n,"Editor",(function(){return x}))},ZNhe:function(t,n,e){e("7x9u")},aULF:function(t,n,e){"use strict";e.r(n),e.d(n,"default",(function(){return a}));var r=e("q1tI"),o=e.n(r),i=e("IMLY"),u=e("EYWl");function a(){var t=Object(r.useState)(""),n=t[0],a=t[1];return Object(r.useEffect)((function(){if(window){e("B9FH"),e("Qjfq"),e("Tqh3"),e("ZNhe");var t=e("UYf5").Editor;a(o.a.createElement(t,{init:{plugins:"link table image code"}}))}}),[]),o.a.createElement(i.Card,null,o.a.createElement(u.a,{title:"Tiny MCE",keywords:["OAH","application","react"]}),o.a.createElement("header",null,"Tiny MCE"),o.a.createElement(i.CardBody,null,n))}},lM69:function(t,n,e){e("q8oJ"),e("C9fy"),e("MIFh"),e("Ml7+"),e("HQhv"),e("E5k/"),e("Ll4R"),e("n7j8"),e("HXzo"),e("sPse"),e("YBKJ"),e("OeI1"),e("AqHK"),e("sC2a"),e("zGcK"),e("rzGZ"),e("Dq+y"),e("8npG"),e("Ggvi"),e("YbXK"),e("cFtU"),e("wZFJ"),e("sc67"),e("pJf4"),e("DrhF"),function(t){"use strict";var n=function t(n){var e=n,r=function(){return e};return{get:r,set:function(t){e=t},clone:function(){return t(r())}}},e=function(){},r=function(t,n){return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return t(n.apply(null,e))}},o=function(t){return function(){return t}},i=function(t){return t};function u(t){for(var n=[],e=1;e<arguments.length;e++)n[e-1]=arguments[e];return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var o=n.concat(e);return t.apply(null,o)}}var a,c=function(t){return function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return!t.apply(null,n)}},l=o(!1),f=o(!0),s=l,d=f,m=function(){return p},p=function(){var t=function(t){return t.isNone()},n=function(t){return t()},e=function(t){return t},r={fold:function(t,n){return t()},is:s,isSome:s,isNone:d,getOr:e,getOrThunk:n,getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:function(){return null},getOrUndefined:function(){},or:e,orThunk:n,map:m,ap:m,each:function(){},bind:m,flatten:m,exists:s,forall:d,filter:m,equals:t,equals_:t,toArray:function(){return[]},toString:o("none()")};return Object.freeze&&Object.freeze(r),r}(),g=function t(n){var e=function(){return n},r=function(){return i},o=function(t){return t(n)},i={fold:function(t,e){return e(n)},is:function(t){return n===t},isSome:d,isNone:s,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:r,orThunk:r,map:function(e){return t(e(n))},ap:function(e){return e.fold(m,(function(e){return t(e(n))}))},each:function(t){t(n)},bind:o,flatten:e,exists:o,forall:o,filter:function(t){return t(n)?i:p},equals:function(t){return t.is(n)},equals_:function(t,e){return t.fold(s,(function(t){return e(n,t)}))},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return i},h={some:g,none:m,from:function(t){return null==t?p:g(t)}},v=tinymce.util.Tools.resolve("tinymce.PluginManager"),b=function(t){return function(n){return function(t){if(null===t)return"null";var n=typeof t;return"object"===n&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"===n&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":n}(n)===t}},y=b("string"),w=b("array"),x=b("boolean"),C=b("function"),S=b("number"),T=Array.prototype.slice,O=void 0===(a=Array.prototype.indexOf)?function(t,n){return M(t,n)}:function(t,n){return a.call(t,n)},R=function(t,n){return O(t,n)>-1},A=function(t,n){return P(t,n).isSome()},D=function(t,n){for(var e=t.length,r=new Array(e),o=0;o<e;o++){var i=t[o];r[o]=n(i,o,t)}return r},E=function(t,n){for(var e=0,r=t.length;e<r;e++){n(t[e],e,t)}},k=function(t,n){for(var e=[],r=0,o=t.length;r<o;r++){var i=t[r];n(i,r,t)&&e.push(i)}return e},_=function(t,n,e){return function(t,n){for(var e=t.length-1;e>=0;e--){n(t[e],e,t)}}(t,(function(t){e=n(e,t)})),e},I=function(t,n,e){return E(t,(function(t){e=n(e,t)})),e},N=function(t,n){for(var e=0,r=t.length;e<r;e++){var o=t[e];if(n(o,e,t))return h.some(o)}return h.none()},P=function(t,n){for(var e=0,r=t.length;e<r;e++){if(n(t[e],e,t))return h.some(e)}return h.none()},M=function(t,n){for(var e=0,r=t.length;e<r;++e)if(t[e]===n)return e;return-1},B=Array.prototype.push,j=function(t){for(var n=[],e=0,r=t.length;e<r;++e){if(!w(t[e]))throw new Error("Arr.flatten item "+e+" was not an array, input: "+t);B.apply(n,t[e])}return n},L=function(t,n){var e=D(t,n);return j(e)},U=function(t,n){for(var e=0,r=t.length;e<r;++e){if(!0!==n(t[e],e,t))return!1}return!0},F=function(t){var n=T.call(t,0);return n.reverse(),n},W=(C(Array.from)&&Array.from,Object.keys),z=Object.hasOwnProperty,H=function(t,n){for(var e=W(t),r=0,o=e.length;r<o;r++){var i=e[r];n(t[i],i,t)}},q=function(t,n){return G(t,(function(t,e,r){return{k:e,v:n(t,e,r)}}))},G=function(t,n){var e={};return H(t,(function(r,o){var i=n(r,o,t);e[i.k]=i.v})),e},K=function(t,n){return V(t,n)?h.from(t[n]):h.none()},V=function(t,n){return z.call(t,n)},Y=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];if(t.length!==n.length)throw new Error('Wrong number of arguments to struct. Expected "['+t.length+']", got '+n.length+" arguments");var r={};return E(t,(function(t,e){r[t]=o(n[e])})),r}},J=function(t){return t.slice(0).sort()},X=function(t,n){throw new Error("All required keys ("+J(t).join(", ")+") were not specified. Specified keys were: "+J(n).join(", ")+".")},$=function(t){throw new Error("Unsupported keys for object: "+J(t).join(", "))},Z=function(t,n){if(!w(n))throw new Error("The "+t+" fields must be an array. Was: "+n+".");E(n,(function(n){if(!y(n))throw new Error("The value "+n+" in the "+t+" fields was not a string.")}))},Q=function(t){var n=J(t);N(n,(function(t,e){return e<n.length-1&&t===n[e+1]})).each((function(t){throw new Error("The field: "+t+" occurs more than once in the combined fields: ["+n.join(", ")+"].")}))},tt=function(t,n){var e=t.concat(n);if(0===e.length)throw new Error("You must specify at least one required or optional field.");return Z("required",t),Z("optional",n),Q(e),function(r){var i=W(r);U(t,(function(t){return R(i,t)}))||X(t,i);var u=k(i,(function(t){return!R(e,t)}));u.length>0&&$(u);var a={};return E(t,(function(t){a[t]=o(r[t])})),E(n,(function(t){a[t]=o(Object.prototype.hasOwnProperty.call(r,t)?h.some(r[t]):h.none())})),a}},nt=(t.Node.ATTRIBUTE_NODE,t.Node.CDATA_SECTION_NODE,t.Node.COMMENT_NODE),et=t.Node.DOCUMENT_NODE,rt=(t.Node.DOCUMENT_TYPE_NODE,t.Node.DOCUMENT_FRAGMENT_NODE,t.Node.ELEMENT_NODE),ot=t.Node.TEXT_NODE,it=(t.Node.PROCESSING_INSTRUCTION_NODE,t.Node.ENTITY_REFERENCE_NODE,t.Node.ENTITY_NODE,t.Node.NOTATION_NODE,void 0!==t.window?t.window:Function("return this;")(),function(t){return t.dom().nodeName.toLowerCase()}),ut=function(t){return t.dom().nodeType},at=function(t){return function(n){return ut(n)===t}},ct=function(t){return ut(t)===nt||"#comment"===it(t)},lt=at(rt),ft=at(ot),st=function(n,e,r){if(!(y(r)||x(r)||S(r)))throw t.console.error("Invalid call to Attr.set. Key ",e,":: Value ",r,":: Element ",n),new Error("Attribute value was not simple");n.setAttribute(e,r+"")},dt=function(t,n,e){st(t.dom(),n,e)},mt=function(t,n){var e=t.dom();H(n,(function(t,n){st(e,n,t)}))},pt=function(t,n){var e=t.dom().getAttribute(n);return null===e?void 0:e},gt=function(t,n){var e=t.dom();return!(!e||!e.hasAttribute)&&e.hasAttribute(n)},ht=function(t,n){t.dom().removeAttribute(n)},vt=function(t){return I(t.dom().attributes,(function(t,n){return t[n.name]=n.value,t}),{})},bt=function(t,n,e){return""===n||!(t.length<n.length)&&t.substr(e,e+n.length)===n},yt=function(t,n){return-1!==t.indexOf(n)},wt=function(t,n){return bt(t,n,0)},xt=function(t){return void 0!==t.style&&C(t.style.getPropertyValue)},Ct=function(t){var n,e=!1;return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return e||(e=!0,n=t.apply(null,r)),n}},St=function(t){if(null==t)throw new Error("Node cannot be null or undefined");return{dom:o(t)}},Tt={fromHtml:function(n,e){var r=(e||t.document).createElement("div");if(r.innerHTML=n,!r.hasChildNodes()||r.childNodes.length>1)throw t.console.error("HTML does not have a single root node",n),new Error("HTML must have a single root node");return St(r.childNodes[0])},fromTag:function(n,e){var r=(e||t.document).createElement(n);return St(r)},fromText:function(n,e){var r=(e||t.document).createTextNode(n);return St(r)},fromDom:St,fromPoint:function(t,n,e){var r=t.dom();return h.from(r.elementFromPoint(n,e)).map(St)}},Ot=function(t){var n=ft(t)?t.dom().parentNode:t.dom();return null!=n&&n.ownerDocument.body.contains(n)},Rt=Ct((function(){return At(Tt.fromDom(t.document))})),At=function(t){var n=t.dom().body;if(null==n)throw new Error("Body is not available yet");return Tt.fromDom(n)},Dt=function(n,e,r){if(!y(r))throw t.console.error("Invalid call to CSS.set. Property ",e,":: Value ",r,":: Element ",n),new Error("CSS value must be a string: "+r);xt(n)&&n.style.setProperty(e,r)},Et=function(t,n,e){var r=t.dom();Dt(r,n,e)},kt=function(t,n){var e=t.dom();H(n,(function(t,n){Dt(e,n,t)}))},_t=function(n,e){var r=n.dom(),o=t.window.getComputedStyle(r).getPropertyValue(e),i=""!==o||Ot(n)?o:It(r,e);return null===i?void 0:i},It=function(t,n){return xt(t)?t.style.getPropertyValue(n):""},Nt=function(t,n){var e=t.dom(),r=It(e,n);return h.from(r).filter((function(t){return t.length>0}))},Pt=function(t,n){!function(t,n){xt(t)&&t.style.removeProperty(n)}(t.dom(),n),gt(t,"style")&&""===pt(t,"style").replace(/^\s+|\s+$/g,"")&&ht(t,"style")},Mt=function(t,n,e){return 0!=(t.compareDocumentPosition(n)&e)},Bt=function(n,e){return Mt(n,e,t.Node.DOCUMENT_POSITION_CONTAINED_BY)},jt=function(){return Lt(0,0)},Lt=function(t,n){return{major:t,minor:n}},Ut={nu:Lt,detect:function(t,n){var e=String(n).toLowerCase();return 0===t.length?jt():function(t,n){var e=function(t,n){for(var e=0;e<t.length;e++){var r=t[e];if(r.test(n))return r}}(t,n);if(!e)return{major:0,minor:0};var r=function(t){return Number(n.replace(e,"$"+t))};return Lt(r(1),r(2))}(t,e)},unknown:jt},Ft=function(t,n){return function(){return n===t}},Wt=function(t){var n=t.current;return{current:n,version:t.version,isEdge:Ft("Edge",n),isChrome:Ft("Chrome",n),isIE:Ft("IE",n),isOpera:Ft("Opera",n),isFirefox:Ft("Firefox",n),isSafari:Ft("Safari",n)}},zt={unknown:function(){return Wt({current:void 0,version:Ut.unknown()})},nu:Wt,edge:o("Edge"),chrome:o("Chrome"),ie:o("IE"),opera:o("Opera"),firefox:o("Firefox"),safari:o("Safari")},Ht=function(t,n){return function(){return n===t}},qt=function(t){var n=t.current;return{current:n,version:t.version,isWindows:Ht("Windows",n),isiOS:Ht("iOS",n),isAndroid:Ht("Android",n),isOSX:Ht("OSX",n),isLinux:Ht("Linux",n),isSolaris:Ht("Solaris",n),isFreeBSD:Ht("FreeBSD",n)}},Gt={unknown:function(){return qt({current:void 0,version:Ut.unknown()})},nu:qt,windows:o("Windows"),ios:o("iOS"),android:o("Android"),linux:o("Linux"),osx:o("OSX"),solaris:o("Solaris"),freebsd:o("FreeBSD")},Kt=function(t,n){var e=String(n).toLowerCase();return N(t,(function(t){return t.search(e)}))},Vt=function(t,n){return Kt(t,n).map((function(t){var e=Ut.detect(t.versionRegexes,n);return{current:t.name,version:e}}))},Yt=function(t,n){return Kt(t,n).map((function(t){var e=Ut.detect(t.versionRegexes,n);return{current:t.name,version:e}}))},Jt=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Xt=function(t){return function(n){return yt(n,t)}},$t=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(t){return yt(t,"edge/")&&yt(t,"chrome")&&yt(t,"safari")&&yt(t,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Jt],search:function(t){return yt(t,"chrome")&&!yt(t,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(t){return yt(t,"msie")||yt(t,"trident")}},{name:"Opera",versionRegexes:[Jt,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Xt("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Xt("firefox")},{name:"Safari",versionRegexes:[Jt,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(t){return(yt(t,"safari")||yt(t,"mobile/"))&&yt(t,"applewebkit")}}],Zt=[{name:"Windows",search:Xt("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(t){return yt(t,"iphone")||yt(t,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Xt("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:Xt("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Xt("linux"),versionRegexes:[]},{name:"Solaris",search:Xt("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Xt("freebsd"),versionRegexes:[]}],Qt={browsers:o($t),oses:o(Zt)},tn=function(t){var n=Qt.browsers(),e=Qt.oses(),r=Vt(n,t).fold(zt.unknown,zt.nu),i=Yt(e,t).fold(Gt.unknown,Gt.nu),u=function(t,n,e){var r=t.isiOS()&&!0===/ipad/i.test(e),i=t.isiOS()&&!r,u=t.isAndroid()&&3===t.version.major,a=t.isAndroid()&&4===t.version.major,c=r||u||a&&!0===/mobile/i.test(e),l=t.isiOS()||t.isAndroid(),f=l&&!c,s=n.isSafari()&&t.isiOS()&&!1===/safari/i.test(e);return{isiPad:o(r),isiPhone:o(i),isTablet:o(c),isPhone:o(f),isTouch:o(l),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:o(s)}}(i,r,t);return{browser:r,os:i,deviceType:u}},nn={detect:Ct((function(){var n=t.navigator.userAgent;return tn(n)}))},en=rt,rn=et,on=function(t,n){var e=t.dom();if(e.nodeType!==en)return!1;var r=e;if(void 0!==r.matches)return r.matches(n);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(n);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(n);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(n);throw new Error("Browser lacks native selectors")},un=function(t){return t.nodeType!==en&&t.nodeType!==rn||0===t.childElementCount},an=function(t,n){return t.dom()===n.dom()},cn=nn.detect().browser.isIE()?function(t,n){return Bt(t.dom(),n.dom())}:function(t,n){var e=t.dom(),r=n.dom();return e!==r&&e.contains(r)},ln=on,fn=function(t){return Tt.fromDom(t.dom().ownerDocument)},sn=function(t){return h.from(t.dom().parentNode).map(Tt.fromDom)},dn=function(t,n){for(var e=C(n)?n:l,r=t.dom(),o=[];null!==r.parentNode&&void 0!==r.parentNode;){var i=r.parentNode,u=Tt.fromDom(i);if(o.push(u),!0===e(u))break;r=i}return o},mn=function(t){return h.from(t.dom().previousSibling).map(Tt.fromDom)},pn=function(t){return h.from(t.dom().nextSibling).map(Tt.fromDom)},gn=function(t){return D(t.dom().childNodes,Tt.fromDom)},hn=function(t,n){var e=t.dom().childNodes;return h.from(e[n]).map(Tt.fromDom)},vn=(Y("element","offset"),function(t,n){sn(t).each((function(e){e.dom().insertBefore(n.dom(),t.dom())}))}),bn=function(t,n){pn(t).fold((function(){sn(t).each((function(t){wn(t,n)}))}),(function(t){vn(t,n)}))},yn=function(t,n){(function(t){return hn(t,0)})(t).fold((function(){wn(t,n)}),(function(e){t.dom().insertBefore(n.dom(),e.dom())}))},wn=function(t,n){t.dom().appendChild(n.dom())},xn=function(t,n){vn(t,n),wn(n,t)},Cn=function(t,n){E(n,(function(e,r){var o=0===r?t:n[r-1];bn(o,e)}))},Sn=function(t,n){E(n,(function(n){wn(t,n)}))},Tn=function(t){t.dom().textContent="",E(gn(t),(function(t){On(t)}))},On=function(t){var n=t.dom();null!==n.parentNode&&n.parentNode.removeChild(n)},Rn=function(t){var n,e=gn(t);e.length>0&&(n=t,E(e,(function(t){vn(n,t)}))),On(t)},An=(Y("width","height"),Y("width","height"),Y("rows","columns")),Dn=Y("row","column"),En=(Y("x","y"),Y("element","rowspan","colspan")),kn=Y("element","rowspan","colspan","isNew"),_n=Y("element","rowspan","colspan","row","column"),In=Y("element","cells","section"),Nn=Y("element","isNew"),Pn=Y("element","cells","section","isNew"),Mn=Y("cells","section"),Bn=Y("details","section"),jn=Y("startRow","startCol","finishRow","finishCol"),Ln=function t(n,e){var r=[];return E(gn(n),(function(n){e(n)&&(r=r.concat([n])),r=r.concat(t(n,e))})),r},Un=function(t,n,e){return function(t,n,e){return k(dn(t,e),n)}(t,(function(t){return on(t,n)}),e)},Fn=function(t,n){return function(t,n){return k(gn(t),n)}(t,(function(t){return on(t,n)}))},Wn=function(n,e){return function(n,e){var r=void 0===e?t.document:e.dom();return un(r)?[]:D(r.querySelectorAll(n),Tt.fromDom)}(e,n)};function zn(t,n,e,r,o){return t(e,r)?h.some(e):C(o)&&o(e)?h.none():n(e,r,o)}var Hn=function(t,n,e){for(var r=t.dom(),i=C(e)?e:o(!1);r.parentNode;){r=r.parentNode;var u=Tt.fromDom(r);if(n(u))return h.some(u);if(i(u))break}return h.none()},qn=function(t,n,e){return Hn(t,(function(t){return on(t,n)}),e)},Gn=function(t,n){return function(t,n){return N(t.dom().childNodes,(function(t){return n(Tt.fromDom(t))})).map(Tt.fromDom)}(t,(function(t){return on(t,n)}))},Kn=function(n,e){return function(n,e){var r=void 0===e?t.document:e.dom();return un(r)?h.none():h.from(r.querySelector(n)).map(Tt.fromDom)}(e,n)},Vn=function(t,n,e){return zn(on,qn,t,n,e)},Yn=function t(n,e,r){return L(gn(n),(function(n){return on(n,e)?r(n)?[n]:[]:t(n,e,r)}))},Jn={firstLayer:function(t,n){return Yn(t,n,o(!0))},filterFirstLayer:Yn},Xn=function(t,n,e){if(void 0===e&&(e=l),e(n))return h.none();if(R(t,it(n)))return h.some(n);return qn(n,t.join(","),(function(t){return on(t,"table")||e(t)}))},$n=function(t,n){return sn(n).map((function(n){return Fn(n,t)}))},Zn=u($n,"th,td"),Qn=u($n,"tr"),te=function(t,n){return parseInt(pt(t,n),10)},ne={cell:function(t,n){return Xn(["td","th"],t,n)},firstCell:function(t){return Kn(t,"th,td")},cells:function(t){return Jn.firstLayer(t,"th,td")},neighbourCells:Zn,table:function(t,n){return Vn(t,"table",n)},row:function(t,n){return Xn(["tr"],t,n)},rows:function(t){return Jn.firstLayer(t,"tr")},notCell:function(t,n){return Xn(["caption","tr","tbody","tfoot","thead"],t,n)},neighbourRows:Qn,attr:te,grid:function(t,n,e){var r=te(t,n),o=te(t,e);return An(r,o)}},ee=function(t){var n=ne.rows(t);return D(n,(function(t){var n=t,e=sn(n).map((function(t){var n=it(t);return"tfoot"===n||"thead"===n||"tbody"===n?n:"tbody"})).getOr("tbody"),r=D(ne.cells(t),(function(t){var n=gt(t,"rowspan")?parseInt(pt(t,"rowspan"),10):1,e=gt(t,"colspan")?parseInt(pt(t,"colspan"),10):1;return En(t,n,e)}));return In(n,r,e)}))},re=function(t,n){return D(t,(function(t){var e=D(ne.cells(t),(function(t){var n=gt(t,"rowspan")?parseInt(pt(t,"rowspan"),10):1,e=gt(t,"colspan")?parseInt(pt(t,"colspan"),10):1;return En(t,n,e)}));return In(t,e,n.section())}))},oe=function(t,n){return t+","+n},ie=function(t,n){var e=L(t.all(),(function(t){return t.cells()}));return k(e,n)},ue={generate:function(t){var n={},e=[],r=t.length,i=0;E(t,(function(t,r){var o=[];E(t.cells(),(function(t){for(var e=0;void 0!==n[oe(r,e)];)e++;for(var u=_n(t.element(),t.rowspan(),t.colspan(),r,e),a=0;a<t.colspan();a++)for(var c=0;c<t.rowspan();c++){var l=e+a,f=oe(r+c,l);n[f]=u,i=Math.max(i,l+1)}o.push(u)})),e.push(In(t.element(),o,t.section()))}));var u=An(r,i);return{grid:o(u),access:o(n),all:o(e)}},getAt:function(t,n,e){var r=t.access()[oe(n,e)];return void 0!==r?h.some(r):h.none()},findItem:function(t,n,e){var r=ie(t,(function(t){return e(n,t.element())}));return r.length>0?h.some(r[0]):h.none()},filterItems:ie,justCells:function(t){var n=D(t.all(),(function(t){return t.cells()}));return j(n)}},ae=Y("minRow","minCol","maxRow","maxCol"),ce=function(t,n,e){var r=t[e].element(),o=Tt.fromTag("td");wn(o,Tt.fromTag("br")),(n?wn:yn)(r,o)},le=function(t,n){var e=function(t){return on(t.element(),n)},r=ee(t),o=ue.generate(r),i=function(t,n){var e=t.grid().columns(),r=t.grid().rows(),o=e,i=0,u=0;return H(t.access(),(function(t){if(n(t)){var e=t.row(),a=e+t.rowspan()-1,c=t.column(),l=c+t.colspan()-1;e<r?r=e:a>i&&(i=a),c<o?o=c:l>u&&(u=l)}})),ae(r,o,i,u)}(o,e),u="th:not("+n+"),td:not("+n+")",a=Jn.filterFirstLayer(t,"th,td",(function(t){return on(t,u)}));return E(a,On),function(t,n,e,r){for(var o=n.grid().columns(),i=n.grid().rows(),u=0;u<i;u++)for(var a=!1,c=0;c<o;c++){if(!(u<e.minRow()||u>e.maxRow()||c<e.minCol()||c>e.maxCol()))ue.getAt(n,u,c).filter(r).isNone()?ce(t,a,u):a=!0}}(r,o,i,e),function(t,n){var e=k(Jn.firstLayer(t,"tr"),(function(t){return 0===t.dom().childElementCount}));E(e,On),n.minCol()!==n.maxCol()&&n.minRow()!==n.maxRow()||E(Jn.firstLayer(t,"th,td"),(function(t){ht(t,"rowspan"),ht(t,"colspan")})),ht(t,"width"),ht(t,"height"),Pt(t,"width"),Pt(t,"height")}(t,i),t};var fe=function(t,n){var e=function(n){return t(n)?h.from(n.dom().nodeValue):h.none()};return{get:function(r){if(!t(r))throw new Error("Can only get "+n+" value of a "+n+" node");return e(r).getOr("")},getOption:e,set:function(e,r){if(!t(e))throw new Error("Can only set raw "+n+" value of a "+n+" node");e.dom().nodeValue=r}}}(ft,"text"),se=function(t){return fe.get(t)},de=function(t){return fe.getOption(t)},me=function(t,n){fe.set(t,n)},pe=function(t){return"img"===it(t)?1:de(t).fold((function(){return gn(t).length}),(function(t){return t.length}))},ge=["img","br"],he=function(t){return de(t).filter((function(t){return 0!==t.trim().length||t.indexOf("Â ")>-1})).isSome()||R(ge,it(t))},ve=function(t){return n=he,function t(e){for(var r=0;r<e.childNodes.length;r++){var o=Tt.fromDom(e.childNodes[r]);if(n(o))return h.some(o);var i=t(e.childNodes[r]);if(i.isSome())return i}return h.none()}(t.dom());var n},be=function(t){return ye(t,he)},ye=function(t,n){return function t(e){for(var r=gn(e),o=r.length-1;o>=0;o--){var i=r[o];if(n(i))return h.some(i);var u=t(i);if(u.isSome())return u}return h.none()}(t)},we=function(t,n){return Tt.fromDom(t.dom().cloneNode(n))},xe=function(t){return we(t,!1)},Ce=function(t){return we(t,!0)},Se=function(t,n){var e=function(t,n){var e=Tt.fromTag(n),r=vt(t);return mt(e,r),e}(t,n),r=gn(Ce(t));return Sn(e,r),e},Te=function(){var t=Tt.fromTag("td");return wn(t,Tt.fromTag("br")),t},Oe=function(t,n,e){var r=Se(t,n);return H(e,(function(t,n){null===t?ht(r,n):dt(r,n,t)})),r},Re=function(t){return t},Ae=function(t){return function(){return Tt.fromTag("tr",t.dom())}},De=function(t,n,e){return{row:Ae(n),cell:function(n){var r,o,i,u,a=fn(n.element()),c=Tt.fromTag(it(n.element()),a.dom()),l=e.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),f=l.length>0?function(t,n,e){return ve(t).map((function(r){var o=e.join(","),i=Un(r,o,(function(n){return an(n,t)}));return _(i,(function(t,n){var e=xe(n);return ht(e,"contenteditable"),wn(t,e),e}),n)})).getOr(n)}(n.element(),c,l):c;return wn(f,Tt.fromTag("br")),r=n.element(),o=c,i=r.dom(),u=o.dom(),xt(i)&&xt(u)&&(u.style.cssText=i.style.cssText),Pt(c,"height"),1!==n.colspan()&&Pt(n.element(),"width"),t(n.element(),c),c},replace:Oe,gap:Te}},Ee=function(t){return{row:Ae(t),cell:Te,replace:Re,gap:Te}},ke=function(t,n){return n.column()>=t.startCol()&&n.column()+n.colspan()-1<=t.finishCol()&&n.row()>=t.startRow()&&n.row()+n.rowspan()-1<=t.finishRow()},_e=function(t,n){var e=n.column(),r=n.column()+n.colspan()-1,o=n.row(),i=n.row()+n.rowspan()-1;return e<=t.finishCol()&&r>=t.startCol()&&o<=t.finishRow()&&i>=t.startRow()},Ie=function(t,n){for(var e=!0,r=u(ke,n),o=n.startRow();o<=n.finishRow();o++)for(var i=n.startCol();i<=n.finishCol();i++)e=e&&ue.getAt(t,o,i).exists(r);return e?h.some(n):h.none()},Ne=function(t,n,e){var r=ue.findItem(t,n,an),o=ue.findItem(t,e,an);return r.bind((function(t){return o.map((function(n){return e=t,r=n,jn(Math.min(e.row(),r.row()),Math.min(e.column(),r.column()),Math.max(e.row()+e.rowspan()-1,r.row()+r.rowspan()-1),Math.max(e.column()+e.colspan()-1,r.column()+r.colspan()-1));var e,r}))}))},Pe=Ne,Me=function(t,n,e){return Ne(t,n,e).bind((function(n){return Ie(t,n)}))},Be=function(t,n,e,r){return ue.findItem(t,n,an).bind((function(n){var o=e>0?n.row()+n.rowspan()-1:n.row(),i=r>0?n.column()+n.colspan()-1:n.column();return ue.getAt(t,o+e,i+r).map((function(t){return t.element()}))}))},je=function(t,n,e){return Pe(t,n,e).map((function(n){var e=ue.filterItems(t,u(_e,n));return D(e,(function(t){return t.element()}))}))},Le=function(t,n){return ue.findItem(t,n,(function(t,n){return cn(n,t)})).map((function(t){return t.element()}))},Ue=function(t){var n=ee(t);return ue.generate(n)},Fe=function(t,n,e){return ne.table(t).bind((function(r){var o=Ue(r);return Be(o,t,n,e)}))},We=function(t,n,e){var r=Ue(t);return je(r,n,e)},ze=function(t,n,e,r,o){var i=Ue(t),u=an(t,e)?h.some(n):Le(i,n),a=an(t,o)?h.some(r):Le(i,r);return u.bind((function(t){return a.bind((function(n){return je(i,t,n)}))}))},He=function(t,n,e){var r=Ue(t);return Me(r,n,e)},qe=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"];function Ge(){return{up:o({selector:qn,closest:Vn,predicate:Hn,all:dn}),down:o({selector:Wn,predicate:Ln}),styles:o({get:_t,getRaw:Nt,set:Et,remove:Pt}),attrs:o({get:pt,set:dt,remove:ht,copyTo:function(t,n){var e=vt(t);mt(n,e)}}),insert:o({before:vn,after:bn,afterAll:Cn,append:wn,appendAll:Sn,prepend:yn,wrap:xn}),remove:o({unwrap:Rn,remove:On}),create:o({nu:Tt.fromTag,clone:function(t){return Tt.fromDom(t.dom().cloneNode(!1))},text:Tt.fromText}),query:o({comparePosition:function(t,n){return t.dom().compareDocumentPosition(n.dom())},prevSibling:mn,nextSibling:pn}),property:o({children:gn,name:it,parent:sn,document:function(t){return t.dom().ownerDocument},isText:ft,isComment:ct,isElement:lt,getText:se,setText:me,isBoundary:function(t){return!!lt(t)&&("body"===it(t)||R(qe,it(t)))},isEmptyTag:function(t){return!!lt(t)&&R(["br","img","hr","input"],it(t))}}),eq:an,is:ln}}var Ke=Y("left","right"),Ve=Y("first","second","splits"),Ye=function(t,n,e){var r=t.property().children(n);return P(r,u(t.eq,e)).map((function(t){return{before:o(r.slice(0,t)),after:o(r.slice(t+1))}}))},Je=function(t,n,e,r){var o=n(t,e);return _(r,(function(e,r){var o=n(t,r);return Xe(t,e,o)}),o)},Xe=function(t,n,e){return n.bind((function(n){return e.filter(u(t.eq,n))}))},$e=function(t,n){return u(t.eq,n)},Ze=function(t,n,e,r){void 0===r&&(r=l);var i=[n].concat(t.up().all(n)),u=[e].concat(t.up().all(e)),a=function(t){return P(t,r).fold((function(){return t}),(function(n){return t.slice(0,n+1)}))},c=a(i),f=a(u),s=N(c,(function(n){return A(f,$e(t,n))}));return{firstpath:o(c),secondpath:o(f),shared:o(s)}},Qe={sharedOne:function(t,n,e){return e.length>0?function(t,n,e,r){return r(t,n,e[0],e.slice(1))}(t,n,e,Je):h.none()},subset:function(t,n,e){var r=Ze(t,n,e);return r.shared().bind((function(n){return function(t,n,e,r){var o=t.property().children(n);if(t.eq(n,e[0]))return h.some([e[0]]);if(t.eq(n,r[0]))return h.some([r[0]]);var i=function(e){var r=F(e),i=P(r,$e(t,n)).getOr(-1),u=i<r.length-1?r[i+1]:r[i];return P(o,$e(t,u))},u=i(e),a=i(r);return u.bind((function(t){return a.map((function(n){var e=Math.min(t,n),r=Math.max(t,n);return o.slice(e,r+1)}))}))}(t,n,r.firstpath(),r.secondpath())}))},ancestors:Ze,breakToLeft:function(t,n,e){return Ye(t,n,e).map((function(r){var o=t.create().clone(n);return t.insert().appendAll(o,r.before().concat([e])),t.insert().appendAll(n,r.after()),t.insert().before(n,o),Ke(o,n)}))},breakToRight:function(t,n,e){return Ye(t,n,e).map((function(e){var r=t.create().clone(n);return t.insert().appendAll(r,e.after()),t.insert().after(n,r),Ke(n,r)}))},breakPath:function(t,n,e,r){return function n(o,i,u){var a=Ve(o,h.none(),u);return e(o)?Ve(o,i,u):t.property().parent(o).bind((function(i){return r(t,i,o).map((function(t){var r=[{first:t.left,second:t.right}],o=e(i)?i:t.left();return n(o,h.some(t.right()),u.concat(r))}))})).getOr(a)}(n,h.none(),[])}},tr=Ge(),nr={sharedOne:function(t,n){return Qe.sharedOne(tr,(function(n,e){return t(e)}),n)},subset:function(t,n){return Qe.subset(tr,t,n)},ancestors:function(t,n,e){return Qe.ancestors(tr,t,n,e)},breakToLeft:function(t,n){return Qe.breakToLeft(tr,t,n)},breakToRight:function(t,n){return Qe.breakToRight(tr,t,n)},breakPath:function(t,n,e){return Qe.breakPath(tr,t,n,(function(t,n,r){return e(n,r)}))}},er={create:tt(["boxes","start","finish"],[])},rr=function(t){return qn(t,"table")},or=function(t,n,e){var r=function(t){return function(n){return void 0!==e&&e(n)||an(n,t)}};return an(t,n)?h.some(er.create({boxes:h.some([t]),start:t,finish:n})):rr(t).bind((function(o){return rr(n).bind((function(i){if(an(o,i))return h.some(er.create({boxes:We(o,t,n),start:t,finish:n}));if(cn(o,i)){var u=(a=Un(n,"td,th",r(o))).length>0?a[a.length-1]:n;return h.some(er.create({boxes:ze(o,t,o,n,i),start:t,finish:u}))}if(cn(i,o)){var a,c=(a=Un(t,"td,th",r(i))).length>0?a[a.length-1]:t;return h.some(er.create({boxes:ze(i,t,o,n,i),start:t,finish:c}))}return nr.ancestors(t,n).shared().bind((function(u){return Vn(u,"table",e).bind((function(e){var u=Un(n,"td,th",r(e)),a=u.length>0?u[u.length-1]:n,c=Un(t,"td,th",r(e)),l=c.length>0?c[c.length-1]:t;return h.some(er.create({boxes:ze(e,t,o,n,i),start:l,finish:a}))}))}))}))}))},ir={identify:or,retrieve:function(t,n){var e=Wn(t,n);return e.length>0?h.some(e):h.none()},shiftSelection:function(t,n,e,r,i){return function(t,n){return N(t,(function(t){return on(t,n)}))}(t,i).bind((function(t){return Fe(t,n,e).bind((function(t){return function(t,n){return qn(t,"table").bind((function(e){return Kn(e,n).bind((function(n){return or(n,t).bind((function(t){return t.boxes().map((function(n){return{boxes:o(n),start:o(t.start()),finish:o(t.finish())}}))}))}))}))}(t,r)}))}))},getEdges:function(t,n,e){return Kn(t,n).bind((function(n){return Kn(t,e).bind((function(t){return nr.sharedOne(rr,[n,t]).map((function(e){return{first:o(n),last:o(t),table:o(e)}}))}))}))}},ur=function(t,n){return ir.retrieve(t,n)},ar=function(t,n,e){return ir.getEdges(t,n,e).bind((function(n){var e=function(n){return an(t,n)},r=qn(n.first(),"thead,tfoot,tbody,table",e),o=qn(n.last(),"thead,tfoot,tbody,table",e);return r.bind((function(t){return o.bind((function(e){return an(t,e)?He(n.table(),n.first(),n.last()):h.none()}))}))}))},cr="data-mce-selected",lr={selected:o(cr),selectedSelector:o("td[data-mce-selected],th[data-mce-selected]"),attributeSelector:o("[data-mce-selected]"),firstSelected:o("data-mce-first-selected"),firstSelectedSelector:o("td[data-mce-first-selected],th[data-mce-first-selected]"),lastSelected:o("data-mce-last-selected"),lastSelectedSelector:o("td[data-mce-last-selected],th[data-mce-last-selected]")},fr=function(n){if(!w(n))throw new Error("cases must be an array");if(0===n.length)throw new Error("there must be at least one case");var e=[],r={};return E(n,(function(o,i){var u=W(o);if(1!==u.length)throw new Error("one and only one name per case");var a=u[0],c=o[a];if(void 0!==r[a])throw new Error("duplicate key detected:"+a);if("cata"===a)throw new Error("cannot have a case named cata (sorry)");if(!w(c))throw new Error("case arguments must be an array");e.push(a),r[a]=function(){var r=arguments.length;if(r!==c.length)throw new Error("Wrong number of arguments to case "+a+". Expected "+c.length+" ("+c+"), got "+r);for(var o=new Array(r),u=0;u<o.length;u++)o[u]=arguments[u];var l=function(t){var n=W(t);if(e.length!==n.length)throw new Error("Wrong number of arguments to match. Expected: "+e.join(",")+"\nActual: "+n.join(","));if(!U(e,(function(t){return R(n,t)})))throw new Error("Not all branches were specified when using match. Specified: "+n.join(", ")+"\nRequired: "+e.join(", "));return t[a].apply(null,o)};return{fold:function(){if(arguments.length!==n.length)throw new Error("Wrong number of arguments to fold. Expected "+n.length+", got "+arguments.length);var t=arguments[i];return t.apply(null,o)},match:l,log:function(n){t.console.log(n,{constructors:e,constructor:a,params:o})}}}})),r},sr=fr([{none:[]},{multiple:["elements"]},{single:["selection"]}]),dr={cata:function(t,n,e,r){return t.fold(n,e,r)},none:sr.none,multiple:sr.multiple,single:sr.single},mr=function(t,n){return dr.cata(n.get(),o([]),i,o([t]))},pr=function(t,n){return dr.cata(n.get(),h.none,(function(n,e){return 0===n.length?h.none():ar(t,lr.firstSelectedSelector(),lr.lastSelectedSelector()).bind((function(t){return n.length>1?h.some({bounds:o(t),cells:o(n)}):h.none()}))}),h.none)},gr=function(t,n){var e=mr(t,n);return e.length>0&&U(e,(function(t){return gt(t,"rowspan")&&parseInt(pt(t,"rowspan"),10)>1||gt(t,"colspan")&&parseInt(pt(t,"colspan"),10)>1}))?h.some(e):h.none()},hr=mr,vr=function(t){return{element:o(t),mergable:h.none,unmergable:h.none,selection:o([t])}},br=Y("element","clipboard","generators"),yr={noMenu:vr,forMenu:function(t,n,e){return{element:o(e),mergable:o(pr(n,t)),unmergable:o(gr(e,t)),selection:o(hr(e,t))}},notCell:function(t){return vr(t)},paste:br,pasteRows:function(t,n,e,r,i){return{element:o(e),mergable:h.none,unmergable:h.none,selection:o(hr(e,t)),clipboard:o(r),generators:o(i)}}},wr={registerEvents:function(n,r,o,i){n.on("BeforeGetContent",(function(t){!0===t.selection&&dr.cata(r.get(),e,(function(e){t.preventDefault(),function(t){return ne.table(t[0]).map(Ce).map((function(t){return[le(t,lr.attributeSelector())]}))}(e).each((function(e){t.content="text"===t.format?function(t){return D(t,(function(t){return t.dom().innerText})).join("")}(e):function(t,n){return D(n,(function(n){return t.selection.serializer.serialize(n.dom(),{})})).join("")}(n,e)}))}),e)})),n.on("BeforeSetContent",(function(e){!0===e.selection&&!0===e.paste&&h.from(n.dom.getParent(n.selection.getStart(),"th,td")).each((function(r){var u=Tt.fromDom(r);ne.table(u).each((function(r){var a,c,l,f=k((a=e.content,(l=(c||t.document).createElement("div")).innerHTML=a,gn(Tt.fromDom(l))),(function(t){return"meta"!==it(t)}));if(1===f.length&&"table"===it(f[0])){e.preventDefault();var s=Tt.fromDom(n.getDoc()),d=Ee(s),m=yr.paste(u,f[0],d);o.pasteCells(r,m).each((function(t){n.selection.setRng(t),n.focus(),i.clear(r)}))}}))}))}))}};function xr(t,n){var e=function(e){var r=n(e);if(r<=0||null===r){var o=_t(e,t);return parseFloat(o)||0}return r},r=function(t,n){return I(n,(function(n,e){var r=_t(t,e),o=void 0===r?0:parseInt(r,10);return isNaN(o)?n:n+o}),0)};return{set:function(n,e){if(!S(e)&&!e.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+e);var r=n.dom();xt(r)&&(r.style[t]=e+"px")},get:e,getOuter:e,aggregate:r,max:function(t,n,e){var o=r(t,e);return n>o?n-o:0}}}var Cr=xr("height",(function(t){var n=t.dom();return Ot(t)?n.getBoundingClientRect().height:n.offsetHeight})),Sr=function(t){return Cr.get(t)},Tr=function(t){return Cr.getOuter(t)},Or=xr("width",(function(t){return t.dom().offsetWidth})),Rr=function(t){return Or.get(t)},Ar=function(t){return Or.getOuter(t)},Dr=nn.detect(),Er=function(t,n,e){return function(t,n){var e=parseFloat(t);return isNaN(e)?n:e}(_t(t,n),e)},kr=function(t){return Dr.browser.isIE()||Dr.browser.isEdge()?function(t){var n=Er(t,"padding-top",0),e=Er(t,"padding-bottom",0),r=Er(t,"border-top-width",0),o=Er(t,"border-bottom-width",0),i=t.dom().getBoundingClientRect().height;return"border-box"===_t(t,"box-sizing")?i:i-n-e-(r+o)}(t):Er(t,"height",Sr(t))},_r=/(\d+(\.\d+)?)(\w|%)*/,Ir=/(\d+(\.\d+)?)%/,Nr=/(\d+(\.\d+)?)px|em/,Pr=function(t,n){Et(t,"height",n+"px")},Mr=function(t,n,e,r){var o,i,u=parseInt(t,10);return bt(o=t,i="%",o.length-i.length)&&"table"!==it(n)?function(t,n,e,r){var o=ne.table(t).map((function(t){var r=e(t);return Math.floor(n/100*r)})).getOr(n);return r(t,o),o}(n,u,e,r):u},Br=function(t){var n=function(t){return Nt(t,"height").getOrThunk((function(){return kr(t)+"px"}))}(t);return n?Mr(n,t,Sr,Pr):Sr(t)},jr=function(t,n){return gt(t,n)?parseInt(pt(t,n),10):1},Lr=function(t){return Nt(t,"width").fold((function(){return h.from(pt(t,"width"))}),(function(t){return h.some(t)}))},Ur=function(t,n){return t/n.pixelWidth()*100},Fr={percentageBasedSizeRegex:o(Ir),pixelBasedSizeRegex:o(Nr),setPixelWidth:function(t,n){Et(t,"width",n+"px")},setPercentageWidth:function(t,n){Et(t,"width",n+"%")},setHeight:Pr,getPixelWidth:function(t,n){return Lr(t).fold((function(){return Rr(t)}),(function(e){return function(t,n,e){var r=Nr.exec(n);if(null!==r)return parseInt(r[1],10);var o=Ir.exec(n);return null!==o?function(t,n){return t/100*n.pixelWidth()}(parseFloat(o[1]),e):Rr(t)}(t,e,n)}))},getPercentageWidth:function(t,n){return Lr(t).fold((function(){var e=Rr(t);return Ur(e,n)}),(function(e){return function(t,n,e){var r=Ir.exec(n);if(null!==r)return parseFloat(r[1]);var o=Rr(t);return Ur(o,e)}(t,e,n)}))},getGenericWidth:function(t){return Lr(t).bind((function(t){var n=_r.exec(t);return null!==n?h.some({width:o(parseFloat(n[1])),unit:o(n[3])}):h.none()}))},setGenericWidth:function(t,n,e){Et(t,"width",n+e)},getHeight:function(t){return function(t,n,e){return e(t)/jr(t,n)}(t,"rowspan",Br)},getRawWidth:Lr},Wr=function(t,n){Fr.getGenericWidth(t).each((function(e){var r=e.width()/2;Fr.setGenericWidth(t,r,e.unit()),Fr.setGenericWidth(n,r,e.unit())}))},zr=function t(n,e){return{left:o(n),top:o(e),translate:function(r,o){return t(n+r,e+o)}}},Hr=function(t,n){return void 0!==t?t:void 0!==n?n:0},qr=function(t){var n=t.dom().ownerDocument,e=n.body,r=n.defaultView,o=n.documentElement,i=Hr(r.pageYOffset,o.scrollTop),u=Hr(r.pageXOffset,o.scrollLeft),a=Hr(o.clientTop,e.clientTop),c=Hr(o.clientLeft,e.clientLeft);return Gr(t).translate(u-c,i-a)},Gr=function(t){var n=t.dom(),e=n.ownerDocument.body;return e===n?zr(e.offsetLeft,e.offsetTop):Ot(t)?function(t){var n=t.getBoundingClientRect();return zr(n.left,n.top)}(n):zr(0,0)},Kr=Y("row","y"),Vr=Y("col","x"),Yr=function(t){return qr(t).left()+Ar(t)},Jr=function(t){return qr(t).left()},Xr=function(t,n){return Vr(t,Jr(n))},$r=function(t,n){return Vr(t,Yr(n))},Zr=function(t){return qr(t).top()},Qr=function(t,n){return Kr(t,Zr(n))},to=function(t,n){return Kr(t,Zr(n)+Tr(n))},no=function(t,n,e){if(0===e.length)return[];var r=D(e.slice(1),(function(n,e){return n.map((function(n){return t(e,n)}))})),o=e[e.length-1].map((function(t){return n(e.length-1,t)}));return r.concat([o])},eo={height:{delta:i,positions:function(t){return no(Qr,to,t)},edge:Zr},rtl:{delta:function(t){return-t},edge:Yr,positions:function(t){return no($r,Xr,t)}},ltr:{delta:i,edge:Jr,positions:function(t){return no(Xr,$r,t)}}},ro={ltr:eo.ltr,rtl:eo.rtl};function oo(t){var n=function(n){return t(n).isRtl()?ro.rtl:ro.ltr};return{delta:function(t,e){return n(e).delta(t,e)},edge:function(t){return n(t).edge(t)},positions:function(t,e){return n(e).positions(t,e)}}}var io,uo=function(t){var n=ee(t);return ue.generate(n).grid()},ao=function(){return(ao=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t}).apply(this,arguments)},co=function(t){for(var n=[],e=function(t){n.push(t)},r=0;r<t.length;r++)t[r].each(e);return n},lo=function(t,n){for(var e=0;e<t.length;e++){var r=n(t[e],e);if(r.isSome())return r}return h.none()},fo=function(t,n,e,r){e===r?ht(t,n):dt(t,n,e)},so=function(t,n){var e=[],r=[],i=function(n,o){n.length>0?function(n,o){var i=Gn(t,o).getOrThunk((function(){var n=Tt.fromTag(o,fn(t).dom());return wn(t,n),n}));Tn(i);var u=D(n,(function(t){t.isNew()&&e.push(t.element());var n=t.element();return Tn(n),E(t.cells(),(function(t){t.isNew()&&r.push(t.element()),fo(t.element(),"colspan",t.colspan(),1),fo(t.element(),"rowspan",t.rowspan(),1),wn(n,t.element())})),n}));Sn(i,u)}(n,o):function(n){Gn(t,n).each(On)}(o)},u=[],a=[],c=[];return E(n,(function(t){switch(t.section()){case"thead":u.push(t);break;case"tbody":a.push(t);break;case"tfoot":c.push(t)}})),i(u,"thead"),i(a,"tbody"),i(c,"tfoot"),{newRows:o(e),newCells:o(r)}},mo=function(t){return D(t,(function(t){var n=xe(t.element());return E(t.cells(),(function(t){var e=Ce(t.element());fo(e,"colspan",t.colspan(),1),fo(e,"rowspan",t.rowspan(),1),wn(n,e)})),n}))},po=function(t,n){var e=pt(t,n);return void 0===e||""===e?[]:e.split(" ")},go=function(t){return void 0!==t.dom().classList},ho=function(t,n){return function(t,n,e){var r=po(t,n).concat([e]);return dt(t,n,r.join(" ")),!0}(t,"class",n)},vo=function(t,n){return function(t,n,e){var r=k(po(t,n),(function(t){return t!==e}));return r.length>0?dt(t,n,r.join(" ")):ht(t,n),!1}(t,"class",n)},bo=function(t,n){go(t)?t.dom().classList.add(n):ho(t,n)},yo=function(t){0===(go(t)?t.dom().classList:function(t){return po(t,"class")}(t)).length&&ht(t,"class")},wo=function(t,n){return go(t)&&t.dom().classList.contains(n)},xo=function(t,n){for(var e=[],r=t;r<n;r++)e.push(r);return e},Co=function(t,n){if(n<0||n>=t.length-1)return h.none();var e=t[n].fold((function(){var e=F(t.slice(0,n));return lo(e,(function(t,n){return t.map((function(t){return{value:t,delta:n+1}}))}))}),(function(t){return h.some({value:t,delta:0})})),r=t[n+1].fold((function(){var e=t.slice(n+1);return lo(e,(function(t,n){return t.map((function(t){return{value:t,delta:n+1}}))}))}),(function(t){return h.some({value:t,delta:1})}));return e.bind((function(t){return r.map((function(n){var e=n.delta+t.delta;return Math.abs(n.value-t.value)/e}))}))},So=function(t,n,e){var r=t();return N(r,n).orThunk((function(){return h.from(r[0]).orThunk(e)})).map((function(t){return t.element()}))},To=function(t){var n=t.grid(),e=xo(0,n.columns()),r=xo(0,n.rows());return D(e,(function(n){return So((function(){return L(r,(function(e){return ue.getAt(t,e,n).filter((function(t){return t.column()===n})).fold(o([]),(function(t){return[t]}))}))}),(function(t){return 1===t.colspan()}),(function(){return ue.getAt(t,0,n)}))}))},Oo=function(t){var n=t.grid(),e=xo(0,n.rows()),r=xo(0,n.columns());return D(e,(function(n){return So((function(){return L(r,(function(e){return ue.getAt(t,n,e).filter((function(t){return t.row()===n})).fold(o([]),(function(t){return[t]}))}))}),(function(t){return 1===t.rowspan()}),(function(){return ue.getAt(t,n,0)}))}))},Ro=function(t){var n=t.replace(/\./g,"-");return{resolve:function(t){return n+"-"+t}}},Ao=Ro("ephox-snooker"),Do={resolve:Ao.resolve},Eo=function(t,n,e,r,o){var i=Tt.fromTag("div");return kt(i,{position:"absolute",left:n-r/2+"px",top:e+"px",height:o+"px",width:r+"px"}),mt(i,{"data-column":t,role:"presentation"}),i},ko=function(t,n,e,r,o){var i=Tt.fromTag("div");return kt(i,{position:"absolute",left:n+"px",top:e-o/2+"px",height:o+"px",width:r+"px"}),mt(i,{"data-row":t,role:"presentation"}),i},_o=Do.resolve("resizer-bar"),Io=Do.resolve("resizer-rows"),No=Do.resolve("resizer-cols"),Po=function(t){var n=Wn(t.parent(),"."+_o);E(n,On)},Mo=function(t,n,e){var r=t.origin();E(n,(function(n,o){n.each((function(n){var o=e(r,n);bo(o,_o),wn(t.parent(),o)}))}))},Bo=function(t,n,e,r,o,i){var u=qr(n);!function(t,n,e,r){Mo(t,n,(function(t,n){var o=ko(n.row(),e.left()-t.left(),n.y()-t.top(),r,7);return bo(o,Io),o}))}(t,e.length>0?o.positions(e,n):[],u,Ar(n)),function(t,n,e,r){Mo(t,n,(function(t,n){var o=Eo(n.col(),n.x()-t.left(),e.top()-t.top(),7,r);return bo(o,No),o}))}(t,r.length>0?i.positions(r,n):[],u,Tr(n))},jo=function(t,n){var e=Wn(t.parent(),"."+_o);E(e,n)},Lo=function(t,n,e,r){Po(t);var o=ee(n),i=ue.generate(o),u=Oo(i),a=To(i);Bo(t,n,u,a,e,r)},Uo=function(t){jo(t,(function(t){Et(t,"display","none")}))},Fo=function(t){jo(t,(function(t){Et(t,"display","block")}))},Wo=Po,zo=function(t){return wo(t,Io)},Ho=function(t){return wo(t,No)},qo=function(t,n){return Mn(n,t.section())},Go=function(t,n){return t.cells()[n]},Ko={addCell:function(t,n,e){var r=t.cells(),o=r.slice(0,n),i=r.slice(n),u=o.concat([e]).concat(i);return qo(t,u)},setCells:qo,mutateCell:function(t,n,e){t.cells()[n]=e},getCell:Go,getCellElement:function(t,n){return Go(t,n).element()},mapCells:function(t,n){var e=t.cells(),r=D(e,n);return Mn(r,t.section())},cellLength:function(t){return t.cells().length}},Vo=function(t,n){if(0===t.length)return 0;var e=t[0];return P(t,(function(t){return!n(e.element(),t.element())})).fold((function(){return t.length}),(function(t){return t}))},Yo=function(t,n,e,r){var i=function(t,n){return t[n]}(t,n).cells().slice(e),u=Vo(i,r),a=function(t,n){return D(t,(function(t){return Ko.getCell(t,n)}))}(t,e).slice(n),c=Vo(a,r);return{colspan:o(u),rowspan:o(c)}},Jo=function(t,n){var e=D(t,(function(t,n){return D(t.cells(),(function(t,n){return!1}))}));return D(t,(function(r,o){var i=L(r.cells(),(function(r,i){if(!1===e[o][i]){var u=Yo(t,o,i,n);return function(t,n,r,o){for(var i=t;i<t+r;i++)for(var u=n;u<n+o;u++)e[i][u]=!0}(o,i,u.rowspan(),u.colspan()),[kn(r.element(),u.rowspan(),u.colspan(),r.isNew())]}return[]}));return Bn(i,r.section())}))},Xo=function(t,n,e){for(var r=[],o=0;o<t.grid().rows();o++){for(var i=[],u=0;u<t.grid().columns();u++){var a=ue.getAt(t,o,u).map((function(t){return Nn(t.element(),e)})).getOrThunk((function(){return Nn(n.gap(),!0)}));i.push(a)}var c=Mn(i,t.all()[o].section());r.push(c)}return r},$o=function(t,n){return D(t,(function(t){var e=function(t){return lo(t,(function(t){return sn(t.element()).map((function(t){var n=sn(t).isNone();return Nn(t,n)}))})).getOrThunk((function(){return Nn(n.row(),!0)}))}(t.details());return Pn(e.element(),t.details(),t.section(),e.isNew())}))},Zo=function(t,n){var e=Jo(t,an);return $o(e,n)},Qo=function(t,n){var e=j(D(t.all(),(function(t){return t.cells()})));return N(e,(function(t){return an(n,t.element())}))},ti=function(t,n,e,r,i){return function(u,a,c,l,f){var s=ee(a),d=ue.generate(s);return n(d,c).map((function(n){var e=function(t,n){return Xo(t,n,!1)}(d,l),r=t(e,n,an,i(l)),u=Zo(r.grid(),l);return{grid:o(u),cursor:r.cursor}})).fold((function(){return h.none()}),(function(t){var n=so(a,t.grid());return e(a,t.grid(),f),r(a),Lo(u,a,eo.height,f),h.some({cursor:t.cursor,newRows:n.newRows,newCells:n.newCells})}))}},ni=function(t,n){return ne.cell(n.element()).bind((function(n){return Qo(t,n)}))},ei=function(t,n){var e=D(n.selection(),(function(n){return ne.cell(n).bind((function(n){return Qo(t,n)}))})),r=co(e);return r.length>0?h.some({cells:r,generators:n.generators,clipboard:n.clipboard}):h.none()},ri=function(t,n){var e=D(n.selection(),(function(n){return ne.cell(n).bind((function(n){return Qo(t,n)}))})),r=co(e);return r.length>0?h.some(r):h.none()},oi=function t(n){return{is:function(t){return n===t},isValue:f,isError:l,getOr:o(n),getOrThunk:o(n),getOrDie:o(n),or:function(e){return t(n)},orThunk:function(e){return t(n)},fold:function(t,e){return e(n)},map:function(e){return t(e(n))},mapError:function(e){return t(n)},each:function(t){t(n)},bind:function(t){return t(n)},exists:function(t){return t(n)},forall:function(t){return t(n)},toOption:function(){return h.some(n)}}},ii=function t(n){return{is:l,isValue:l,isError:f,getOr:i,getOrThunk:function(t){return t()},getOrDie:function(){return(t=String(n),function(){throw new Error(t)})();var t},or:function(t){return t},orThunk:function(t){return t()},fold:function(t,e){return t(n)},map:function(e){return t(n)},mapError:function(e){return t(e(n))},each:e,bind:function(e){return t(n)},exists:l,forall:f,toOption:h.none}},ui=oi,ai=ii,ci=function(t,n){return D(t,(function(){return Nn(n.cell(),!0)}))},li=function(t,n,e){return t.concat(function(t,n){for(var e=[],r=0;r<t;r++)e.push(n(r));return e}(n,(function(n){return Ko.setCells(t[t.length-1],ci(t[t.length-1].cells(),e))})))},fi=function(t,n,e){return D(t,(function(t){return Ko.setCells(t,t.cells().concat(ci(xo(0,n),e)))}))},si=function(t,n,e){if(t.row()>=n.length||t.column()>Ko.cellLength(n[0]))return ai("invalid start address out of table bounds, row: "+t.row()+", column: "+t.column());var r=n.slice(t.row()),i=r[0].cells().slice(t.column()),u=Ko.cellLength(e[0]),a=e.length;return ui({rowDelta:o(r.length-a),colDelta:o(i.length-u)})},di=function(t,n){var e=Ko.cellLength(t[0]),r=Ko.cellLength(n[0]);return{rowDelta:o(0),colDelta:o(e-r)}},mi=function(t,n,e){var r=n.colDelta()<0?fi:i;return(n.rowDelta()<0?li:i)(r(t,Math.abs(n.colDelta()),e),Math.abs(n.rowDelta()),e)},pi=function(t,n,e,r){if(0===t.length)return t;for(var o=n.startRow();o<=n.finishRow();o++)for(var i=n.startCol();i<=n.finishCol();i++)Ko.mutateCell(t[o],i,Nn(r(),!1));return t},gi=function(t,n,e,r){for(var o=!0,i=0;i<t.length;i++)for(var u=0;u<Ko.cellLength(t[0]);u++){var a=e(Ko.getCellElement(t[i],u),n);!0===a&&!1===o?Ko.mutateCell(t[i],u,Nn(r(),!0)):!0===a&&(o=!1)}return t},hi=function(t,n,e,r){if(n>0&&n<t.length){var o=function(t,n){return I(t,(function(t,e){return A(t,(function(t){return n(t.element(),e.element())}))?t:t.concat([e])}),[])}(t[n-1].cells(),e);E(o,(function(o){for(var i=h.none(),u=function(n){for(var u=function(u){var a=t[n].cells()[u];e(a.element(),o.element())&&(i.isNone()&&(i=h.some(r())),i.each((function(e){Ko.mutateCell(t[n],u,Nn(e,!0))})))},a=0;a<Ko.cellLength(t[0]);a++)u(a)},a=n;a<t.length;a++)u(a)}))}return t},vi=function(t,n,e,r){var o=u(r,Ko.getCell(t[n],e).element()),i=t[n];return t.length>1&&Ko.cellLength(i)>1&&(e>0&&o(Ko.getCellElement(i,e-1))||e<i.cells().length-1&&o(Ko.getCellElement(i,e+1))||n>0&&o(Ko.getCellElement(t[n-1],e))||n<t.length-1&&o(Ko.getCellElement(t[n+1],e)))},bi=function(t,n,e,r,o){return si(t,n,e).map((function(i){var u=mi(n,i,r);return function(t,n,e,r,o){for(var i=t.row(),u=t.column(),a=i+e.length,c=u+Ko.cellLength(e[0]),l=i;l<a;l++)for(var f=u;f<c;f++){vi(n,l,f,o)&&gi(n,Ko.getCellElement(n[l],f),o,r.cell);var s=Ko.getCellElement(e[l-i],f-u),d=r.replace(s);Ko.mutateCell(n[l],f,Nn(d,!0))}return n}(t,u,e,r,o)}))},yi=function(t,n,e,r,o){hi(n,t,o,r.cell);var i=di(e,n),u=mi(e,i,r),a=di(n,u),c=mi(n,a,r);return c.slice(0,t).concat(u).concat(c.slice(t,c.length))},wi=function(t,n,e,r,o){var i=t.slice(0,n),u=t.slice(n),a=Ko.mapCells(t[e],(function(e,i){return n>0&&n<t.length&&r(Ko.getCellElement(t[n-1],i),Ko.getCellElement(t[n],i))?Ko.getCell(t[n],i):Nn(o(e.element(),r),!0)}));return i.concat([a]).concat(u)},xi=function(t,n,e,r,o){return D(t,(function(t){var i=n>0&&n<Ko.cellLength(t)&&r(Ko.getCellElement(t,n-1),Ko.getCellElement(t,n))?Ko.getCell(t,n):Nn(o(Ko.getCellElement(t,e),r),!0);return Ko.addCell(t,n,i)}))},Ci=function(t,n,e,r,o){var i=e+1;return D(t,(function(t,u){var a=u===n?Nn(o(Ko.getCellElement(t,e),r),!0):Ko.getCell(t,e);return Ko.addCell(t,i,a)}))},Si=function(t,n,e,r,o){var i=n+1,u=t.slice(0,i),a=t.slice(i),c=Ko.mapCells(t[n],(function(t,n){return n===e?Nn(o(t.element(),r),!0):t}));return u.concat([c]).concat(a)},Ti=function(t,n,e){return t.slice(0,n).concat(t.slice(e+1))},Oi=function(t,n,e){var r=D(t,(function(t){var r=t.cells().slice(0,n).concat(t.cells().slice(e+1));return Mn(r,t.section())}));return k(r,(function(t){return t.cells().length>0}))},Ri=function(t,n,e,r){return D(t,(function(t){return Ko.mapCells(t,(function(t){return function(t){return A(n,(function(n){return e(t.element(),n.element())}))}(t)?Nn(r(t.element(),e),!0):t}))}))},Ai=function(t,n,e,r){return void 0!==Ko.getCellElement(t[n],e)&&n>0&&r(Ko.getCellElement(t[n-1],e),Ko.getCellElement(t[n],e))},Di=function(t,n,e){return n>0&&e(Ko.getCellElement(t,n-1),Ko.getCellElement(t,n))},Ei=function(t,n,e,r){var o=L(t,(function(r,o){return Ai(t,o,n,e)||Di(r,n,e)?[]:[Ko.getCell(r,n)]}));return Ri(t,o,e,r)},ki=function(t,n,e,r){var o=t[n],i=L(o.cells(),(function(r,i){return Ai(t,n,i,e)||Di(o,i,e)?[]:[r]}));return Ri(t,i,e,r)},_i=fr([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}]),Ii=ao({},_i),Ni=function(t,n,e,r){var i=t.slice(0),u=function(t,n){return 0===t.length?Ii.none():1===t.length?Ii.only(0):0===n?Ii.left(0,1):n===t.length-1?Ii.right(n-1,n):n>0&&n<t.length-1?Ii.middle(n-1,n,n+1):Ii.none()}(t,n),a=function(t){return D(t,o(0))},c=o(a(i)),l=function(t,n){if(e>=0){var o=Math.max(r.minCellWidth(),i[n]-e);return a(i.slice(0,t)).concat([e,o-i[n]]).concat(a(i.slice(n+1)))}var u=Math.max(r.minCellWidth(),i[t]+e),c=i[t]-u;return a(i.slice(0,t)).concat([u-i[t],c]).concat(a(i.slice(n+1)))},f=l;return u.fold(c,(function(t){return r.singleColumnWidth(i[t],e)}),f,(function(t,n,e){return l(n,e)}),(function(t,n){if(e>=0)return a(i.slice(0,n)).concat([e]);var o=Math.max(r.minCellWidth(),i[n]+e);return a(i.slice(0,n)).concat([o-i[n]])}))},Pi=function(t,n){return gt(t,n)&&parseInt(pt(t,n),10)>1},Mi={hasColspan:function(t){return Pi(t,"colspan")},hasRowspan:function(t){return Pi(t,"rowspan")},minWidth:o(10),minHeight:o(10),getInt:function(t,n){return parseInt(_t(t,n),10)}},Bi=function(t,n,e){return Nt(t,n).fold((function(){return e(t)+"px"}),(function(t){return t}))},ji=function(t,n){return Bi(t,"width",(function(t){return Fr.getPixelWidth(t,n)}))},Li=function(t){return Bi(t,"height",Fr.getHeight)},Ui=function(t,n,e,r,o){var i=To(t),u=D(i,(function(t){return t.map(n.edge)}));return D(i,(function(t,n){return t.filter(c(Mi.hasColspan)).fold((function(){var t=Co(u,n);return r(t)}),(function(t){return e(t,o)}))}))},Fi=function(t){return t.map((function(t){return t+"px"})).getOr("")},Wi=function(t,n,e,r){var o=Oo(t),i=D(o,(function(t){return t.map(n.edge)}));return D(o,(function(t,n){return t.filter(c(Mi.hasRowspan)).fold((function(){var t=Co(i,n);return r(t)}),(function(t){return e(t)}))}))},zi={getRawWidths:function(t,n,e){return Ui(t,n,ji,Fi,e)},getPixelWidths:function(t,n,e){return Ui(t,n,Fr.getPixelWidth,(function(t){return t.getOrThunk(e.minCellWidth)}),e)},getPercentageWidths:function(t,n,e){return Ui(t,n,Fr.getPercentageWidth,(function(t){return t.fold((function(){return e.minCellWidth()}),(function(t){return t/e.pixelWidth()*100}))}),e)},getPixelHeights:function(t,n){return Wi(t,n,Fr.getHeight,(function(t){return t.getOrThunk(Mi.minHeight)}))},getRawHeights:function(t,n){return Wi(t,n,Li,Fi)}},Hi=function(t,n,e){for(var r=0,o=t;o<n;o++)r+=void 0!==e[o]?e[o]:0;return r},qi=function(t,n){var e=ue.justCells(t);return D(e,(function(t){var e=Hi(t.column(),t.column()+t.colspan(),n);return{element:t.element,width:o(e),colspan:t.colspan}}))},Gi=function(t,n){var e=ue.justCells(t);return D(e,(function(t){var e=Hi(t.row(),t.row()+t.rowspan(),n);return{element:t.element,height:o(e),rowspan:t.rowspan}}))},Ki=function(t,n){return D(t.all(),(function(t,e){return{element:t.element,height:o(n[e])}}))},Vi=function(t){var n=i;return{width:o(t),pixelWidth:o(t),getWidths:zi.getPixelWidths,getCellDelta:n,singleColumnWidth:function(t,n){return[Math.max(Mi.minWidth(),t+n)-t]},minCellWidth:Mi.minWidth,setElementWidth:Fr.setPixelWidth,setTableWidth:function(t,n,e){var r=_(n,(function(t,n){return t+n}),0);Fr.setPixelWidth(t,r)}}},Yi=function(t,n){var e=Fr.percentageBasedSizeRegex().exec(n);if(null!==e)return function(t,n){var e=parseFloat(t),r=Rr(n);return{width:o(e),pixelWidth:o(r),getWidths:zi.getPercentageWidths,getCellDelta:function(t){return t/r*100},singleColumnWidth:function(t,n){return[100-t]},minCellWidth:function(){return Mi.minWidth()/r*100},setElementWidth:Fr.setPercentageWidth,setTableWidth:function(t,n,r){var o=r/100*e;Fr.setPercentageWidth(t,e+o)}}}(e[1],t);var r=Fr.pixelBasedSizeRegex().exec(n);if(null!==r){var i=parseInt(r[1],10);return Vi(i)}var u=Rr(t);return Vi(u)},Ji=function(t){return Fr.getRawWidth(t).fold((function(){var n=Rr(t);return Vi(n)}),(function(n){return Yi(t,n)}))},Xi=function(t){return ue.generate(t)},$i=function(t){var n=ee(t);return Xi(n)},Zi={adjustWidth:function(t,n,e,r){var o=Ji(t),i=o.getCellDelta(n),u=$i(t),a=o.getWidths(u,r,o),c=Ni(a,e,i,o),l=D(c,(function(t,n){return t+a[n]})),f=qi(u,l);E(f,(function(t){o.setElementWidth(t.element(),t.width())})),e===u.grid().columns()-1&&o.setTableWidth(t,l,i)},adjustHeight:function(t,n,e,r){var o=$i(t),i=zi.getPixelHeights(o,r),u=D(i,(function(t,r){return e===r?Math.max(n+t,Mi.minHeight()):t})),a=Gi(o,u),c=Ki(o,u);E(c,(function(t){Fr.setHeight(t.element(),t.height())})),E(a,(function(t){Fr.setHeight(t.element(),t.height())}));var l=_(u,(function(t,n){return t+n}),0);Fr.setHeight(t,l)},adjustWidthTo:function(t,n,e){var r=Ji(t),o=Xi(n),i=r.getWidths(o,e,r),u=qi(o,i);E(u,(function(t){r.setElementWidth(t.element(),t.width())})),u.length>0&&r.setTableWidth(t,i,r.getCellDelta(0))}},Qi=function(t,n,e){if(0===n.length)throw new Error("You must specify at least one required field.");return Z("required",n),Q(n),function(r){var o=W(r);U(n,(function(t){return R(o,t)}))||X(n,o),t(n,o);var i=k(n,(function(t){return!e.validate(r[t],t)}));return i.length>0&&function(t,n){throw new Error("All values need to be of type: "+n+". Keys ("+J(t).join(", ")+") were not.")}(i,e.label),r}},tu=function(t,n){var e=k(n,(function(n){return!R(t,n)}));e.length>0&&$(e)},nu=function(t){return function(t,n){return Qi(t,n,{validate:C,label:"function"})}(tu,t)},eu=nu(["cell","row","replace","gap"]),ru=function(t){var n=gt(t,"colspan")?parseInt(pt(t,"colspan"),10):1,e=gt(t,"rowspan")?parseInt(pt(t,"rowspan"),10):1;return{element:o(t),colspan:o(n),rowspan:o(e)}},ou=function(t,e){void 0===e&&(e=ru),eu(t);var r=n(h.none()),o=function(n){return function(n){return t.cell(n)}(e(n))},i=function(t){var n=o(t);return r.get().isNone()&&r.set(h.some(n)),u=h.some({item:t,replacement:n}),n},u=h.none();return{getOrInit:function(t,n){return u.fold((function(){return i(t)}),(function(e){return n(t,e.item)?e.replacement:i(t)}))},cursor:r.get}},iu=function(t,e){return function(r){var o=n(h.none());eu(r);var i=[],u=function(n){var u={scope:t},a=r.replace(n,e,u);return i.push({item:n,sub:a}),o.get().isNone()&&o.set(h.some(a)),a};return{replaceOrInit:function(t,n){return function(t,n){return N(i,(function(e){return n(e.item,t)}))}(t,n).fold((function(){return u(t)}),(function(e){return n(t,e.item)?e.sub:u(t)}))},cursor:o.get}}},uu=function(t){eu(t);var e=n(h.none());return{combine:function(n){return e.get().isNone()&&e.set(h.some(n)),function(){var e=t.cell({element:o(n),colspan:o(1),rowspan:o(1)});return Pt(e,"width"),Pt(n,"width"),e}},cursor:e.get}},au=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],cu=function(t,n){var e=t.property().name(n);return R(au,e)},lu=function(t,n){return R(["br","img","hr","input"],t.property().name(n))},fu=cu,su=function(t,n){var e=t.property().name(n);return R(["ol","ul"],e)},du=lu,mu=Ge(),pu=function(t){return fu(mu,t)},gu=function(t){return su(mu,t)},hu=function(t){return du(mu,t)},vu=function(t){var n,e=function(t){return"br"===it(t)},r=function(t){return be(t).bind((function(n){var r=pn(n).map((function(t){return!!pu(t)||!!hu(t)&&"img"!==it(t)})).getOr(!1);return sn(n).map((function(o){return!0===r||function(t){return"li"===it(t)||Hn(t,gu).isSome()}(o)||e(n)||pu(o)&&!an(t,o)?[]:[Tt.fromTag("br")]}))})).getOr([])},o=0===(n=L(t,(function(t){var n=gn(t);return function(t){return U(t,(function(t){return e(t)||ft(t)&&0===se(t).trim().length}))}(n)?[]:n.concat(r(t))}))).length?[Tt.fromTag("br")]:n;Tn(t[0]),Sn(t[0],o)},bu=function(t){0===ne.cells(t).length&&On(t)},yu=Y("grid","cursor"),wu=function(t,n,e){return xu(t,n,e).orThunk((function(){return xu(t,0,0)}))},xu=function(t,n,e){return h.from(t[n]).bind((function(t){return h.from(t.cells()[e]).bind((function(t){return h.from(t.element())}))}))},Cu=function(t,n,e){return yu(t,xu(t,n,e))},Su=function(t){return I(t,(function(t,n){return A(t,(function(t){return t.row()===n.row()}))?t:t.concat([n])}),[]).sort((function(t,n){return t.row()-n.row()}))},Tu=function(t){return I(t,(function(t,n){return A(t,(function(t){return t.column()===n.column()}))?t:t.concat([n])}),[]).sort((function(t,n){return t.column()-n.column()}))},Ou=function(t,n,e){var r=re(t,e),o=ue.generate(r);return Xo(o,n,!0)},Ru=Zi.adjustWidthTo,Au={insertRowBefore:ti((function(t,n,e,r){var o=n.row(),i=n.row(),u=wi(t,i,o,e,r.getOrInit);return Cu(u,i,n.column())}),ni,e,e,ou),insertRowsBefore:ti((function(t,n,e,r){var o=n[0].row(),i=n[0].row(),u=Su(n),a=I(u,(function(t,n){return wi(t,i,o,e,r.getOrInit)}),t);return Cu(a,i,n[0].column())}),ri,e,e,ou),insertRowAfter:ti((function(t,n,e,r){var o=n.row(),i=n.row()+n.rowspan(),u=wi(t,i,o,e,r.getOrInit);return Cu(u,i,n.column())}),ni,e,e,ou),insertRowsAfter:ti((function(t,n,e,r){var o=Su(n),i=o[o.length-1].row(),u=o[o.length-1].row()+o[o.length-1].rowspan(),a=I(o,(function(t,n){return wi(t,u,i,e,r.getOrInit)}),t);return Cu(a,u,n[0].column())}),ri,e,e,ou),insertColumnBefore:ti((function(t,n,e,r){var o=n.column(),i=n.column(),u=xi(t,i,o,e,r.getOrInit);return Cu(u,n.row(),i)}),ni,Ru,e,ou),insertColumnsBefore:ti((function(t,n,e,r){var o=Tu(n),i=o[0].column(),u=o[0].column(),a=I(o,(function(t,n){return xi(t,u,i,e,r.getOrInit)}),t);return Cu(a,n[0].row(),u)}),ri,Ru,e,ou),insertColumnAfter:ti((function(t,n,e,r){var o=n.column(),i=n.column()+n.colspan(),u=xi(t,i,o,e,r.getOrInit);return Cu(u,n.row(),i)}),ni,Ru,e,ou),insertColumnsAfter:ti((function(t,n,e,r){var o=n[n.length-1].column(),i=n[n.length-1].column()+n[n.length-1].colspan(),u=Tu(n),a=I(u,(function(t,n){return xi(t,i,o,e,r.getOrInit)}),t);return Cu(a,n[0].row(),i)}),ri,Ru,e,ou),splitCellIntoColumns:ti((function(t,n,e,r){var o=Ci(t,n.row(),n.column(),e,r.getOrInit);return Cu(o,n.row(),n.column())}),ni,Ru,e,ou),splitCellIntoRows:ti((function(t,n,e,r){var o=Si(t,n.row(),n.column(),e,r.getOrInit);return Cu(o,n.row(),n.column())}),ni,e,e,ou),eraseColumns:ti((function(t,n,e,r){var o=Tu(n),i=Oi(t,o[0].column(),o[o.length-1].column()),u=wu(i,n[0].row(),n[0].column());return yu(i,u)}),ri,Ru,bu,ou),eraseRows:ti((function(t,n,e,r){var o=Su(n),i=Ti(t,o[0].row(),o[o.length-1].row()),u=wu(i,n[0].row(),n[0].column());return yu(i,u)}),ri,e,bu,ou),makeColumnHeader:ti((function(t,n,e,r){var o=Ei(t,n.column(),e,r.replaceOrInit);return Cu(o,n.row(),n.column())}),ni,e,e,iu("row","th")),unmakeColumnHeader:ti((function(t,n,e,r){var o=Ei(t,n.column(),e,r.replaceOrInit);return Cu(o,n.row(),n.column())}),ni,e,e,iu(null,"td")),makeRowHeader:ti((function(t,n,e,r){var o=ki(t,n.row(),e,r.replaceOrInit);return Cu(o,n.row(),n.column())}),ni,e,e,iu("col","th")),unmakeRowHeader:ti((function(t,n,e,r){var o=ki(t,n.row(),e,r.replaceOrInit);return Cu(o,n.row(),n.column())}),ni,e,e,iu(null,"td")),mergeCells:ti((function(t,n,e,r){var i=n.cells();vu(i);var u=pi(t,n.bounds(),e,o(i[0]));return yu(u,h.from(i[0]))}),(function(t,n){return n.mergable()}),e,e,uu),unmergeCells:ti((function(t,n,e,r){var o=_(n,(function(t,n){return gi(t,n,e,r.combine(n))}),t);return yu(o,h.from(n[0]))}),(function(t,n){return n.unmergable()}),Ru,e,uu),pasteCells:ti((function(t,n,e,r){var o=function(t,n){var e=ee(t),r=ue.generate(e);return Xo(r,n,!0)}(n.clipboard(),n.generators()),i=Dn(n.row(),n.column());return bi(i,t,o,n.generators(),e).fold((function(){return yu(t,h.some(n.element()))}),(function(t){var e=wu(t,n.row(),n.column());return yu(t,e)}))}),(function(t,n){return ne.cell(n.element()).bind((function(e){return Qo(t,e).map((function(t){return ao({},t,{generators:n.generators,clipboard:n.clipboard})}))}))}),Ru,e,ou),pasteRowsBefore:ti((function(t,n,e,r){var o=t[n.cells[0].row()],i=n.cells[0].row(),u=Ou(n.clipboard(),n.generators(),o),a=yi(i,t,u,n.generators(),e),c=wu(a,n.cells[0].row(),n.cells[0].column());return yu(a,c)}),ei,e,e,ou),pasteRowsAfter:ti((function(t,n,e,r){var o=t[n.cells[0].row()],i=n.cells[n.cells.length-1].row()+n.cells[n.cells.length-1].rowspan(),u=Ou(n.clipboard(),n.generators(),o),a=yi(i,t,u,n.generators(),e),c=wu(a,n.cells[0].row(),n.cells[0].column());return yu(a,c)}),ei,e,e,ou)},Du=function(t){return Tt.fromDom(t.getBody())},Eu=function(t){return t.getBoundingClientRect().width},ku=function(t){return t.getBoundingClientRect().height},_u=function(t){return function(n){return an(n,Du(t))}},Iu=function(t){return/^[0-9]+$/.test(t)&&(t+="px"),t},Nu=function(t){var n=Wn(t,"td[data-mce-style],th[data-mce-style]");ht(t,"data-mce-style"),E(n,(function(t){ht(t,"data-mce-style")}))},Pu={isRtl:o(!1)},Mu={isRtl:o(!0)},Bu={directionAt:function(t){return"rtl"===function(t){return"rtl"===_t(t,"direction")?"rtl":"ltr"}(t)?Mu:Pu}},ju={"border-collapse":"collapse",width:"100%"},Lu={border:"1"},Uu=function(t){return t.getParam("table_default_attributes",Lu,"object")},Fu=function(t){return t.getParam("table_default_styles",ju,"object")},Wu=function(t){return t.getParam("table_tab_navigation",!0,"boolean")},zu=function(t){return t.getParam("table_cell_advtab",!0,"boolean")},Hu=function(t){return t.getParam("table_row_advtab",!0,"boolean")},qu=function(t){return t.getParam("table_advtab",!0,"boolean")},Gu=function(t){return t.getParam("table_style_by_css",!1,"boolean")},Ku=function(t){return t.getParam("table_class_list",[],"array")},Vu=function(t){return!1===t.getParam("table_responsive_width")},Yu=function(t,n){return t.fire("newrow",{node:n})},Ju=function(t,n){return t.fire("newcell",{node:n})},Xu=function(t,n,e,r){t.fire("ObjectResizeStart",{target:n,width:e,height:r})},$u=function(t,n,e,r){t.fire("ObjectResized",{target:n,width:e,height:r})},Zu=function(t,n){var r=function(t){return"table"===it(Du(t))},o=function(t){var n=t.getParam("table_clone_elements");return y(n)?h.some(n.split(/[ ,]/)):Array.isArray(n)?h.some(n):h.none()}(t),i=function(n,e,r,i){return function(u,a){Nu(u);var c=i(),l=Tt.fromDom(t.getDoc()),f=oo(Bu.directionAt),s=De(r,l,o);return e(u)?n(c,u,a,s,f).bind((function(n){return E(n.newRows(),(function(n){Yu(t,n.dom())})),E(n.newCells(),(function(n){Ju(t,n.dom())})),n.cursor().map((function(n){var e=t.dom.createRng();return e.setStart(n.dom(),0),e.setEnd(n.dom(),0),e}))})):h.none()}};return{deleteRow:i(Au.eraseRows,(function(n){var e=uo(n);return!1===r(t)||e.rows()>1}),e,n),deleteColumn:i(Au.eraseColumns,(function(n){var e=uo(n);return!1===r(t)||e.columns()>1}),e,n),insertRowsBefore:i(Au.insertRowsBefore,f,e,n),insertRowsAfter:i(Au.insertRowsAfter,f,e,n),insertColumnsBefore:i(Au.insertColumnsBefore,f,Wr,n),insertColumnsAfter:i(Au.insertColumnsAfter,f,Wr,n),mergeCells:i(Au.mergeCells,f,e,n),unmergeCells:i(Au.unmergeCells,f,e,n),pasteRowsBefore:i(Au.pasteRowsBefore,f,e,n),pasteRowsAfter:i(Au.pasteRowsAfter,f,e,n),pasteCells:i(Au.pasteCells,f,e,n)}},Qu=function(t,n,e){var r=ee(t),o=ue.generate(r);return ri(o,n).map((function(t){var n=Xo(o,e,!1).slice(t[0].row(),t[t.length-1].row()+t[t.length-1].rowspan()),r=Zo(n,e);return mo(r)}))},ta=tinymce.util.Tools.resolve("tinymce.util.Tools"),na=function(t,n,e){e&&t.formatter.apply("align"+e,{},n)},ea=function(t,n,e){e&&t.formatter.apply("valign"+e,{},n)},ra=function(t,n){ta.each("left center right".split(" "),(function(e){t.formatter.remove("align"+e,{},n)}))},oa=function(t,n){ta.each("top middle bottom".split(" "),(function(e){t.formatter.remove("valign"+e,{},n)}))},ia=function(t,n,e){var r;return r=function(n,r){for(var o=0;o<r.length;o++){var i=t.getStyle(r[o],e);if(void 0===n&&(n=i),n!==i)return""}return n}(r,t.select("td,th",n))},ua=function(t,n){var e=function(n){return wt(n,"rgb")?t.toHex(n):n};return{borderstyle:Nt(Tt.fromDom(n),"border-style").getOr(""),bordercolor:Nt(Tt.fromDom(n),"border-color").map(e).getOr(""),backgroundcolor:Nt(Tt.fromDom(n),"background-color").map(e).getOr("")}},aa=function(t,n,e,r,o){var i={};return ta.each(t.split(" "),(function(t){r.formatter.matchNode(o,n+t)&&(i[e]=t)})),i[e]||(i[e]=""),i},ca=u(aa,"left center right"),la=u(aa,"top middle bottom"),fa=function(t,n,e){return function t(e,r){return r=r||[],ta.each(e,(function(e){var o={text:e.text||e.title};e.menu?o.menu=t(e.menu):(o.value=e.value,n&&n(o)),r.push(o)})),r}(t,e||[])},sa=function(t){var n=t[0],e=t.slice(1),r=W(n);return E(e,(function(t){E(r,(function(e){H(t,(function(t,r,o){var i=n[e];""!==i&&e===r&&i!==t&&(n[e]="")}))}))})),n},da=function(){return{title:"Advanced",name:"advanced",items:[{name:"borderstyle",type:"selectbox",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}]}},ma=function(t,n,e){var r=t.dom;return ao({width:r.getStyle(n,"width")||r.getAttrib(n,"width"),height:r.getStyle(n,"height")||r.getAttrib(n,"height"),cellspacing:r.getStyle(n,"border-spacing")||r.getAttrib(n,"cellspacing"),cellpadding:r.getAttrib(n,"cellpadding")||ia(t.dom,n,"padding"),border:function(n,e){var r=Nt(Tt.fromDom(e),"border-width");return Gu(t)&&r.isSome()?r.getOr(""):n.getAttrib(e,"border")||ia(t.dom,e,"border-width")||ia(t.dom,e,"border")}(r,n),caption:!!r.select("caption",n)[0],class:r.getAttrib(n,"class","")},ca("align","align",t,n),e?ua(r,n):{})},pa=function(t,n,e){var r=t.dom;return ao({height:r.getStyle(n,"height")||r.getAttrib(n,"height"),scope:r.getAttrib(n,"scope"),class:r.getAttrib(n,"class",""),align:"",type:n.parentNode.nodeName.toLowerCase()},ca("align","align",t,n),e?ua(r,n):{})},ga=function(t,n,e){var r=t.dom;return ao({width:r.getStyle(n,"width")||r.getAttrib(n,"width"),height:r.getStyle(n,"height")||r.getAttrib(n,"height"),scope:r.getAttrib(n,"scope"),celltype:n.nodeName.toLowerCase(),class:r.getAttrib(n,"class","")},ca("align","halign",t,n),la("valign","valign",t,n),e?ua(r,n):{})},ha=function(t,n){var e,r,o,i=Fu(t),u=Uu(t),a=t.dom,c=n?function(t){var n=function(n){return wt(n,"rgb")?t.toHex(n):n},e=K(i,"border-style").getOr(""),r=K(i,"border-color").getOr(""),o=K(i,"background-color").getOr("");return{borderstyle:e,bordercolor:n(r),backgroundcolor:n(o)}}(a):{};return ao({},{height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:""},i,u,c,(o=i["border-width"],Gu(t)&&o?{border:o}:K(u,"border").fold((function(){return{}}),(function(t){return{border:t}}))),(e=K(i,"border-spacing").or(K(u,"cellspacing")).fold((function(){return{}}),(function(t){return{cellspacing:t}})),r=K(i,"border-padding").or(K(u,"cellpadding")).fold((function(){return{}}),(function(t){return{cellpadding:t}})),ao({},e,r)))},va=[{name:"width",type:"input",label:"Width"},{name:"height",type:"input",label:"Height"},{name:"celltype",type:"selectbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"selectbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"selectbox",label:"H Align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"selectbox",label:"V Align",items:[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}]}],ba=function(t){return function(t){var n=function(t){return t.getParam("table_cell_class_list",[],"array")}(t),e=fa(n,(function(n){n.value&&(n.textStyle=function(){return t.formatter.getCssText({block:"tr",classes:[n.value]})})}));return n.length>0?h.some({name:"class",type:"selectbox",label:"Class",items:e}):h.none()}(t).fold((function(){return va}),(function(t){return va.concat(t)}))},ya={normal:function(t,n){return{setAttrib:function(e,r){t.setAttrib(n,e,r)},setStyle:function(e,r){t.setStyle(n,e,r)}}},ifTruthy:function(t,n){return{setAttrib:function(e,r){r&&t.setAttrib(n,e,r)},setStyle:function(e,r){r&&t.setStyle(n,e,r)}}}},wa=function(t,n){t.setAttrib("scope",n.scope),t.setAttrib("class",n.class),t.setStyle("width",Iu(n.width)),t.setStyle("height",Iu(n.height))},xa=function(t,n){t.setStyle("background-color",n.backgroundcolor),t.setStyle("border-color",n.bordercolor),t.setStyle("border-style",n.borderstyle)},Ca=function(t,n,e){var r=t.dom,o=e.celltype&&n[0].nodeName.toLowerCase()!==e.celltype?r.rename(n[0],e.celltype):n[0],i=ya.normal(r,o);wa(i,e),zu(t)&&xa(i,e),ra(t,o),oa(t,o),e.halign&&na(t,o,e.halign),e.valign&&ea(t,o,e.valign)},Sa=function(t,n,e){var r=t.dom;ta.each(n,(function(n){e.celltype&&n.nodeName.toLowerCase()!==e.celltype&&(n=r.rename(n,e.celltype));var o=ya.ifTruthy(r,n);wa(o,e),zu(t)&&xa(o,e),e.halign&&na(t,n,e.halign),e.valign&&ea(t,n,e.valign)}))},Ta=function(t,n,e){var r=e.getData();e.close(),t.undoManager.transact((function(){(1===n.length?Ca:Sa)(t,n,r),t.focus()}))},Oa=function(t){var n,e=[];if(e=t.dom.select("td[data-mce-selected],th[data-mce-selected]"),n=t.dom.getParent(t.selection.getStart(),"td,th"),!e.length&&n&&e.push(n),n=n||e[0]){var r=ta.map(e,(function(n){return ga(t,n,zu(t))})),o=sa(r),i={type:"tabpanel",tabs:[{title:"General",name:"general",items:ba(t)},da()]},a={type:"panel",items:[{type:"grid",columns:2,items:ba(t)}]};t.windowManager.open({title:"Cell Properties",size:"normal",body:zu(t)?i:a,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:o,onSubmit:u(Ta,t,e)})}},Ra=[{type:"selectbox",name:"type",label:"Row type",items:[{text:"Header",value:"thead"},{text:"Body",value:"tbody"},{text:"Footer",value:"tfoot"}]},{type:"selectbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],Aa=function(t){return function(t){var n=function(t){return t.getParam("table_row_class_list",[],"array")}(t),e=fa(n,(function(n){n.value&&(n.textStyle=function(){return t.formatter.getCssText({block:"tr",classes:[n.value]})})}));return n.length>0?h.some({name:"class",type:"selectbox",label:"Class",items:e}):h.none()}(t).fold((function(){return Ra}),(function(t){return Ra.concat(t)}))},Da=function(t,n,e,r){var o=t.dom,i=r.getData();r.close();var u=1===n.length?ya.normal:ya.ifTruthy;t.undoManager.transact((function(){ta.each(n,(function(n){i.type!==n.parentNode.nodeName.toLowerCase()&&function(t,n,e){var r=t.getParent(n,"table"),o=n.parentNode,i=t.select(e,r)[0];i||(i=t.create(e),r.firstChild?"CAPTION"===r.firstChild.nodeName?t.insertAfter(i,r.firstChild):r.insertBefore(i,r.firstChild):r.appendChild(i)),i.appendChild(n),o.hasChildNodes()||t.remove(o)}(t.dom,n,i.type);var r=u(o,n);r.setAttrib("scope",i.scope),r.setAttrib("class",i.class),r.setStyle("height",Iu(i.height)),Hu(t)&&function(t,n){t.setStyle("background-color",n.backgroundcolor),t.setStyle("border-color",n.bordercolor),t.setStyle("border-style",n.borderstyle)}(r,i),i.align!==e.align&&(ra(t,n),na(t,n,i.align))})),t.focus()}))},Ea=function(t){var n,e,r=t.dom,o=[];if((n=r.getParent(t.selection.getStart(),"table"))&&(e=r.getParent(t.selection.getStart(),"td,th"),ta.each(n.rows,(function(t){ta.each(t.cells,(function(n){if((r.getAttrib(n,"data-mce-selected")||n===e)&&o.indexOf(t)<0)return o.push(t),!1}))})),o[0])){var i=ta.map(o,(function(n){return pa(t,n,Hu(t))})),a=sa(i),c={type:"tabpanel",tabs:[{title:"General",name:"general",items:Aa(t)},da()]},l={type:"panel",items:[{type:"grid",columns:2,items:Aa(t)}]};t.windowManager.open({title:"Row Properties",size:"normal",body:Hu(t)?c:l,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:a,onSubmit:u(Da,t,o,a)})}},ka=Object.prototype.hasOwnProperty,_a=(io=function(t,n){return n},function(){for(var t=new Array(arguments.length),n=0;n<t.length;n++)t[n]=arguments[n];if(0===t.length)throw new Error("Can't merge zero objects");for(var e={},r=0;r<t.length;r++){var o=t[r];for(var i in o)ka.call(o,i)&&(e[i]=io(e[i],o[i]))}return e}),Ia=tinymce.util.Tools.resolve("tinymce.Env"),Na={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},percentages:!0},Pa=function(t,n,e,r,o){void 0===o&&(o=Na);var i=Tt.fromTag("table");kt(i,o.styles),mt(i,o.attributes);var u=Tt.fromTag("tbody");wn(i,u);for(var a=[],c=0;c<t;c++){for(var l=Tt.fromTag("tr"),f=0;f<n;f++){var s=c<e||f<r?Tt.fromTag("th"):Tt.fromTag("td");f<r&&dt(s,"scope","row"),c<e&&dt(s,"scope","col"),wn(s,Tt.fromTag("br")),o.percentages&&Et(s,"width",100/n+"%"),wn(l,s)}a.push(l)}return Sn(u,a),i},Ma=function(t,n){t.selection.select(n.dom(),!0),t.selection.collapse(!0)},Ba=function(t,n,e){var r,o=Fu(t),i={styles:o,attributes:Uu(t),percentages:(r=o.width,y(r)&&-1!==r.indexOf("%")&&!Vu(t))},a=Pa(e,n,0,0,i);dt(a,"data-mce-id","__mce");var c=function(t){var n=Tt.fromTag("div"),e=Tt.fromDom(t.dom().cloneNode(!0));return wn(n,e),function(t){return t.dom().innerHTML}(n)}(a);return t.insertContent(c),Kn(Du(t),'table[data-mce-id="__mce"]').map((function(n){return Vu(t)&&Et(n,"width",_t(n,"width")),ht(n,"data-mce-id"),function(t,n){E(Wn(n,"tr"),(function(n){Yu(t,n.dom()),E(Wn(n,"th,td"),(function(n){Ju(t,n.dom())}))}))}(t,n),function(t,n){Kn(n,"td,th").each(u(Ma,t))}(t,n),n.dom()})).getOr(null)},ja=function(t,n,e){var r=e?[{type:"input",name:"cols",label:"Cols"},{type:"input",name:"rows",label:"Rows"}]:[],o=function(t){return t.getParam("table_appearance_options",!0,"boolean")}(t)?[{type:"input",name:"cellspacing",label:"Cell spacing"},{type:"input",name:"cellpadding",label:"Cell padding"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],i=n?[{type:"selectbox",name:"class",label:"Class",items:fa(Ku(t),(function(n){n.value&&(n.textStyle=function(){return t.formatter.getCssText({block:"table",classes:[n.value]})})}))}]:[];return r.concat([{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}]).concat(o).concat([{type:"selectbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}]).concat(i)},La=function t(n,e,r,o){if("TD"===e.tagName||"TH"===e.tagName)y(r)?n.setStyle(e,r,o):n.setStyle(e,r);else if(e.children)for(var i=0;i<e.children.length;i++)t(n,e.children[i],r,o)},Ua=function(t,n,e){var r,o=t.dom,i=e.getData();e.close(),""===i.class&&delete i.class,t.undoManager.transact((function(){if(!n){var e=parseInt(i.cols,10)||1,u=parseInt(i.rows,10)||1;n=Ba(t,e,u)}!function(t,n,e){var r,o=t.dom,i={},u={};if(i.class=e.class,u.height=Iu(e.height),o.getAttrib(n,"width")&&!Gu(t)?i.width=(r=e.width)?r.replace(/px$/,""):"":u.width=Iu(e.width),Gu(t)?(u["border-width"]=Iu(e.border),u["border-spacing"]=Iu(e.cellspacing)):(i.border=e.border,i.cellpadding=e.cellpadding,i.cellspacing=e.cellspacing),Gu(t)&&n.children)for(var a=0;a<n.children.length;a++)La(o,n.children[a],{"border-width":Iu(e.border),padding:Iu(e.cellpadding)}),qu(t)&&La(o,n.children[a],{"border-color":e.bordercolor});qu(t)&&(u["background-color"]=e.backgroundcolor,u["border-color"]=e.bordercolor,u["border-style"]=e.borderstyle),i.style=o.serializeStyle(_a(Fu(t),u)),o.setAttribs(n,_a(Uu(t),i))}(t,n,i),(r=o.select("caption",n)[0])&&!i.caption&&o.remove(r),!r&&i.caption&&((r=o.create("caption")).innerHTML=Ia.ie?"Â ":'<br data-mce-bogus="1"/>',n.insertBefore(r,n.firstChild)),""===i.align?ra(t,n):na(t,n,i.align),t.focus(),t.addVisual()}))},Fa=function(t,n){var e,r=t.dom,o=ha(t,qu(t));!1===n?(e=r.getParent(t.selection.getStart(),"table"))?o=ma(t,e,qu(t)):qu(t)&&(o.borderstyle="",o.bordercolor="",o.backgroundcolor=""):(o.cols="1",o.rows="1",qu(t)&&(o.borderstyle="",o.bordercolor="",o.backgroundcolor=""));var i=Ku(t).length>0;i&&o.class&&(o.class=o.class.replace(/\s*mce\-item\-table\s*/g,""));var a={type:"grid",columns:2,items:ja(t,i,n)},c=qu(t)?{type:"tabpanel",tabs:[{title:"General",name:"general",items:[a]},da()]}:{type:"panel",items:[a]};t.windowManager.open({title:"Table Properties",size:"normal",body:c,onSubmit:u(Ua,t,e),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:o})},Wa=function(t){return function(n){return h.from(n.dom.getParent(n.selection.getStart(),t)).map(Tt.fromDom)}},za=Wa("th,td"),Ha=Wa("th,td,caption"),qa=ta.each,Ga={registerCommands:function(t,n,r,o,i){var a=_u(t),l=function(t){return ne.table(t,a)},f=function(t){return{width:Eu(t.dom()),height:Eu(t.dom())}},s=function(n){za(t).each((function(e){l(e).each((function(i){var u=yr.forMenu(o,i,e),a=f(i);n(i,u).each((function(n){!function(t,n,e){var r=f(e);n.width===r.width&&n.height===r.height||(Xu(t,e.dom(),n.width,n.height),$u(t,e.dom(),r.width,r.height))}(t,a,i),t.selection.setRng(n),t.focus(),r.clear(i),Nu(i)}))}))}))},d=function(n){return za(t).map((function(n){return l(n).bind((function(r){var i=Tt.fromDom(t.getDoc()),u=yr.forMenu(o,r,n),a=De(e,i,h.none());return Qu(r,u,a)}))}))},m=function(n){i.get().each((function(e){var i=D(e,(function(t){return Ce(t)}));za(t).each((function(e){l(e).each((function(u){var a=Tt.fromDom(t.getDoc()),c=Ee(a),l=yr.pasteRows(o,u,e,i,c);n(u,l).each((function(n){t.selection.setRng(n),t.focus(),r.clear(u)}))}))}))}))};qa({mceTableSplitCells:function(){s(n.unmergeCells)},mceTableMergeCells:function(){s(n.mergeCells)},mceTableInsertRowBefore:function(){s(n.insertRowsBefore)},mceTableInsertRowAfter:function(){s(n.insertRowsAfter)},mceTableInsertColBefore:function(){s(n.insertColumnsBefore)},mceTableInsertColAfter:function(){s(n.insertColumnsAfter)},mceTableDeleteCol:function(){s(n.deleteColumn)},mceTableDeleteRow:function(){s(n.deleteRow)},mceTableCutRow:function(t){d().each((function(t){i.set(t),s(n.deleteRow)}))},mceTableCopyRow:function(t){d().each((function(t){i.set(t)}))},mceTablePasteRowBefore:function(t){m(n.pasteRowsBefore)},mceTablePasteRowAfter:function(t){m(n.pasteRowsAfter)},mceTableDelete:function(){Ha(t).each((function(n){ne.table(n,a).filter(c(a)).each((function(n){var e=Tt.fromText("");if(bn(n,e),On(n),t.dom.isEmpty(t.getBody()))t.setContent(""),t.selection.setCursorLocation();else{var r=t.dom.createRng();r.setStart(e.dom(),0),r.setEnd(e.dom(),0),t.selection.setRng(r),t.nodeChanged()}}))}))}},(function(n,e){t.addCommand(e,n)})),qa({mceInsertTable:u(Fa,t,!0),mceTableProps:u(Fa,t,!1),mceTableRowProps:u(Ea,t),mceTableCellProps:u(Oa,t)},(function(n,e){t.addCommand(e,(function(){n()}))}))}},Ka=function(t){var n=h.from(t.dom().documentElement).map(Tt.fromDom).getOr(t);return{parent:o(n),view:o(t),origin:o(zr(0,0))}},Va=function(t,n){return{parent:o(n),view:o(t),origin:o(zr(0,0))}},Ya=function(t){var n=Y.apply(null,t),e=[];return{bind:function(t){if(void 0===t)throw new Error("Event bind error: undefined handler");e.push(t)},unbind:function(t){e=k(e,(function(n){return n!==t}))},trigger:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var o=n.apply(null,t);E(e,(function(t){t(o)}))}}},Ja={create:function(t){return{registry:q(t,(function(t){return{bind:t.bind,unbind:t.unbind}})),trigger:q(t,(function(t){return t.trigger}))}}},Xa=function(t,n){return function(e){if(t(e)){var i=Tt.fromDom(e.target),u=function(){e.stopPropagation()},a=function(){e.preventDefault()},c=r(a,u),l=function(t,n,e,r,i,u,a){return{target:o(t),x:o(n),y:o(e),stop:r,prevent:i,kill:u,raw:o(a)}}(i,e.clientX,e.clientY,u,a,c,e);n(l)}}},$a=function(t,n,e,r){return function(t,n,e,r,o){var i=Xa(e,r);return t.dom().addEventListener(n,i,o),{unbind:u(Za,t,n,i,o)}}(t,n,e,r,!1)},Za=function(t,n,e,r){t.dom().removeEventListener(n,e,r)},Qa=o(!0),tc=function(t,n,e){return $a(t,n,Qa,e)},nc={resolve:Ro("ephox-dragster").resolve},ec=nu(["compare","extract","mutate","sink"]),rc=nu(["element","start","stop","destroy"]),oc=nu(["forceDrop","drop","move","delayDrop"]),ic=ec({compare:function(t,n){return zr(n.left()-t.left(),n.top()-t.top())},extract:function(t){return h.some(zr(t.x(),t.y()))},sink:function(t,n){var e=function(t){var n=_a({layerClass:nc.resolve("blocker")},t),e=Tt.fromTag("div");dt(e,"role","presentation"),kt(e,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),bo(e,nc.resolve("blocker")),bo(e,n.layerClass);return{element:function(){return e},destroy:function(){On(e)}}}(n),r=tc(e.element(),"mousedown",t.forceDrop),o=tc(e.element(),"mouseup",t.drop),i=tc(e.element(),"mousemove",t.move),u=tc(e.element(),"mouseout",t.delayDrop);return rc({element:e.element,start:function(t){wn(t,e.element())},stop:function(){On(e.element())},destroy:function(){e.destroy(),o.unbind(),i.unbind(),u.unbind(),r.unbind()}})},mutate:function(t,n){t.mutate(n.left(),n.top())}});function uc(){var t=h.none(),n=Ja.create({move:Ya(["info"])});return{onEvent:function(e,r){r.extract(e).each((function(e){(function(n,e){var r=t.map((function(t){return n.compare(t,e)}));return t=h.some(e),r})(r,e).each((function(t){n.trigger.move(t)}))}))},reset:function(){t=h.none()},events:n.registry}}function ac(){var t={onEvent:e,reset:e},n=uc(),r=t;return{on:function(){r.reset(),r=n},off:function(){r.reset(),r=t},isOn:function(){return r===n},onEvent:function(t,n){r.onEvent(t,n)},events:n.events}}var cc=function(n,e,r){var o,i,u,a=!1,c=Ja.create({start:Ya([]),stop:Ya([])}),l=ac(),f=function(){m.stop(),l.isOn()&&(l.off(),c.trigger.stop())},s=(o=f,i=200,u=null,{cancel:function(){null!==u&&(t.clearTimeout(u),u=null)},throttle:function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];null!==u&&t.clearTimeout(u),u=t.setTimeout((function(){o.apply(null,n),u=null}),i)}});l.events.move.bind((function(t){e.mutate(n,t.info())}));var d=function(t){return function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];a&&t.apply(null,n)}},m=e.sink(oc({forceDrop:f,drop:d(f),move:d((function(t){s.cancel(),l.onEvent(t,e)})),delayDrop:d(s.throttle)}),r);return{element:m.element,go:function(t){m.start(t),l.on(),c.trigger.start()},on:function(){a=!0},off:function(){a=!1},destroy:function(){m.destroy()},events:c.registry}},lc=function(t,n){void 0===n&&(n={});var e=void 0!==n.mode?n.mode:ic;return cc(t,e,n)},fc=function(){var t=Ja.create({drag:Ya(["xDelta","yDelta","target"])}),n=h.none(),e=function(){var t=Ja.create({drag:Ya(["xDelta","yDelta"])});return{mutate:function(n,e){t.trigger.drag(n,e)},events:t.registry}}();e.events.drag.bind((function(e){n.each((function(n){t.trigger.drag(e.xDelta(),e.yDelta(),n)}))}));return{assign:function(t){n=h.some(t)},get:function(){return n},mutate:e.mutate,events:t.registry}},sc=function(t){return"true"===pt(t,"contenteditable")},dc=Do.resolve("resizer-bar-dragging"),mc=function(t,n,e){var r=fc(),o=lc(r,{}),i=h.none(),a=function(t,n){return h.from(pt(t,n))};r.events.drag.bind((function(t){a(t.target(),"data-row").each((function(n){var e=Mi.getInt(t.target(),"top");Et(t.target(),"top",e+t.yDelta()+"px")})),a(t.target(),"data-column").each((function(n){var e=Mi.getInt(t.target(),"left");Et(t.target(),"left",e+t.xDelta()+"px")}))}));var c=function(t,n){return Mi.getInt(t,n)-parseInt(pt(t,"data-initial-"+n),10)};o.events.stop.bind((function(){r.get().each((function(r){i.each((function(o){a(r,"data-row").each((function(t){var n=c(r,"top");ht(r,"data-initial-top"),p.trigger.adjustHeight(o,n,parseInt(t,10))})),a(r,"data-column").each((function(t){var n=c(r,"left");ht(r,"data-initial-left"),p.trigger.adjustWidth(o,n,parseInt(t,10))})),Lo(t,o,e,n)}))}))}));var l=function(n,e){p.trigger.startAdjust(),r.assign(n),dt(n,"data-initial-"+e,parseInt(_t(n,e),10)),bo(n,dc),Et(n,"opacity","0.2"),o.go(t.parent())},f=tc(t.parent(),"mousedown",(function(t){zo(t.target())&&l(t.target(),"top"),Ho(t.target())&&l(t.target(),"left")})),s=function(n){return an(n,t.view())},d=function(t){return Vn(t,"table",s).filter((function(t){return function(t,n){return Vn(t,"[contenteditable]",n)}(t,s).exists(sc)}))},m=tc(t.view(),"mouseover",(function(r){d(r.target()).fold((function(){Ot(r.target())&&Wo(t)}),(function(r){i=h.some(r),Lo(t,r,e,n)}))})),p=Ja.create({adjustHeight:Ya(["table","delta","row"]),adjustWidth:Ya(["table","delta","column"]),startAdjust:Ya([])});return{destroy:function(){f.unbind(),m.unbind(),o.destroy(),Wo(t)},refresh:function(r){Lo(t,r,e,n)},on:o.on,off:o.off,hideBars:u(Uo,t),showBars:u(Fo,t),events:p.registry}};var pc=function(t,n){return t.inline?Va(Du(t),function(){var t=Tt.fromTag("div");return kt(t,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),wn(Rt(),t),t}()):Ka(Tt.fromDom(t.getDoc()))},gc=function(t,n){t.inline&&On(n.parent())},hc=function(t,n){return Eu(t.dom())/Eu(n.dom())*100+"%"},vc=function(t){var n,e,r=h.none(),o=h.none(),i=h.none(),u=/(\d+(\.\d+)?)%/,a=function(t){return"TABLE"===t.nodeName},c=function(n){var e=t.dom.getStyle(n,"width")||t.dom.getAttrib(n,"width");return h.from(e).filter((function(t){return t.length>0}))},l=function(){return o};return t.on("init",(function(){var n=oo(Bu.directionAt),e=pc(t);if(i=h.some(e),function(t){var n=t.getParam("object_resizing",!0);return y(n)?"table"===n:n}(t)&&function(t){return t.getParam("table_resize_bars",!0,"boolean")}(t)){var u=function(t,n){var e=eo.height,r=mc(t,n,e),o=Ja.create({beforeResize:Ya(["table"]),afterResize:Ya(["table"]),startDrag:Ya([])});return r.events.adjustHeight.bind((function(t){o.trigger.beforeResize(t.table());var n=e.delta(t.delta(),t.table());Zi.adjustHeight(t.table(),n,t.row(),e),o.trigger.afterResize(t.table())})),r.events.startAdjust.bind((function(t){o.trigger.startDrag()})),r.events.adjustWidth.bind((function(t){o.trigger.beforeResize(t.table());var e=n.delta(t.delta(),t.table());Zi.adjustWidth(t.table(),e,t.column(),n),o.trigger.afterResize(t.table())})),{on:r.on,off:r.off,hideBars:r.hideBars,showBars:r.showBars,destroy:r.destroy,events:o.registry}}(e,n);u.on(),u.events.startDrag.bind((function(n){r=h.some(t.selection.getRng())})),u.events.beforeResize.bind((function(n){var e=n.table().dom();Xu(t,e,Eu(e),ku(e))})),u.events.afterResize.bind((function(n){var e=n.table(),o=e.dom();Nu(e),r.each((function(n){t.selection.setRng(n),t.focus()})),$u(t,o,Eu(o),ku(o)),t.undoManager.add()})),o=h.some(u)}})),t.on("ObjectResizeStart",(function(r){var o=r.target;if(a(o)){var i=c(o).map((function(t){return u.test(t)})).getOr(!1);i&&Vu(t)?function(t){Et(Tt.fromDom(t),"width",Eu(t).toString()+"px")}(o):!i&&function(t){return!0===t.getParam("table_responsive_width")}(t)&&function(t){var n=Tt.fromDom(t);sn(n).map((function(t){return hc(n,t)})).each((function(t){Et(n,"width",t),E(Wn(n,"tr"),(function(t){E(gn(t),(function(n){Et(n,"width",hc(n,t))}))}))}))}(o),n=r.width,e=c(o).getOr("")}})),t.on("ObjectResized",(function(r){var o=r.target;if(a(o)){var i=o;if(u.test(e)){var c=parseFloat(u.exec(e)[1]),l=r.width*c/n;t.dom.setStyle(i,"width",l+"%")}else{var f=[];ta.each(i.rows,(function(n){ta.each(n.cells,(function(n){var e=t.dom.getStyle(n,"width",!0);f.push({cell:n,width:e})}))})),ta.each(f,(function(n){t.dom.setStyle(n.cell,"width",n.width),t.dom.setAttrib(n.cell,"width",null)}))}}})),t.on("SwitchMode",(function(){l().each((function(n){t.readonly?n.hideBars():n.showBars()}))})),{lazyResize:l,lazyWire:function(){return i.getOr(Ka(Tt.fromDom(t.getBody())))},destroy:function(){o.each((function(t){t.destroy()})),i.each((function(n){gc(t,n)}))}}},bc=fr([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),yc=ao({},bc,{none:function(t){return void 0===t&&(t=void 0),bc.none(t)}}),wc=function(t,n){return ne.table(t,n).bind((function(n){var e=ne.cells(n);return P(e,(function(n){return an(t,n)})).map((function(t){return{index:o(t),all:o(e)}}))}))},xc=function(t,n){return wc(t,n).fold((function(){return yc.none(t)}),(function(n){return n.index()+1<n.all().length?yc.middle(t,n.all()[n.index()+1]):yc.last(t)}))},Cc=function(t,n){return wc(t,n).fold((function(){return yc.none()}),(function(n){return n.index()-1>=0?yc.middle(t,n.all()[n.index()-1]):yc.first(t)}))},Sc={create:Y("start","soffset","finish","foffset")},Tc=fr([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Oc={before:Tc.before,on:Tc.on,after:Tc.after,cata:function(t,n,e,r){return t.fold(n,e,r)},getStart:function(t){return t.fold(i,i,i)}},Rc=fr([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Ac={domRange:Rc.domRange,relative:Rc.relative,exact:Rc.exact,exactFromRange:function(t){return Rc.exact(t.start(),t.soffset(),t.finish(),t.foffset())},getWin:function(t){var n,e=function(t){return t.match({domRange:function(t){return Tt.fromDom(t.startContainer)},relative:function(t,n){return Oc.getStart(t)},exact:function(t,n,e,r){return t}})}(t);return n=e,Tt.fromDom(n.dom().ownerDocument.defaultView)},range:Sc.create},Dc=function(t,n){t.selectNodeContents(n.dom())},Ec=function(t,n,e){var r,o=t.document.createRange();return r=o,n.fold((function(t){r.setStartBefore(t.dom())}),(function(t,n){r.setStart(t.dom(),n)}),(function(t){r.setStartAfter(t.dom())})),function(t,n){n.fold((function(n){t.setEndBefore(n.dom())}),(function(n,e){t.setEnd(n.dom(),e)}),(function(n){t.setEndAfter(n.dom())}))}(o,e),o},kc=function(t,n,e,r,o){var i=t.document.createRange();return i.setStart(n.dom(),e),i.setEnd(r.dom(),o),i},_c=function(t){return{left:o(t.left),top:o(t.top),right:o(t.right),bottom:o(t.bottom),width:o(t.width),height:o(t.height)}},Ic=fr([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Nc=function(t,n,e){return n(Tt.fromDom(e.startContainer),e.startOffset,Tt.fromDom(e.endContainer),e.endOffset)},Pc=function(t,n){return function(t,n){var e=n.ltr();return e.collapsed?n.rtl().filter((function(t){return!1===t.collapsed})).map((function(t){return Ic.rtl(Tt.fromDom(t.endContainer),t.endOffset,Tt.fromDom(t.startContainer),t.startOffset)})).getOrThunk((function(){return Nc(0,Ic.ltr,e)})):Nc(0,Ic.ltr,e)}(0,function(t,n){return n.match({domRange:function(t){return{ltr:o(t),rtl:h.none}},relative:function(n,e){return{ltr:Ct((function(){return Ec(t,n,e)})),rtl:Ct((function(){return h.some(Ec(t,e,n))}))}},exact:function(n,e,r,o){return{ltr:Ct((function(){return kc(t,n,e,r,o)})),rtl:Ct((function(){return h.some(kc(t,r,o,n,e))}))}}})}(t,n))},Mc=function(t,n){return Pc(t,n).match({ltr:function(n,e,r,o){var i=t.document.createRange();return i.setStart(n.dom(),e),i.setEnd(r.dom(),o),i},rtl:function(n,e,r,o){var i=t.document.createRange();return i.setStart(r.dom(),o),i.setEnd(n.dom(),e),i}})},Bc=function(t,n,e){return n>=t.left&&n<=t.right&&e>=t.top&&e<=t.bottom},jc=function(t,n,e,r,o){var i=function(e){var r=t.dom().createRange();return r.setStart(n.dom(),e),r.collapse(!0),r},u=se(n).length,a=function(t,n,e,r,o){if(0===o)return 0;if(n===r)return o-1;for(var i=r,u=1;u<o;u++){var a=t(u),c=Math.abs(n-a.left);if(e<=a.bottom){if(e<a.top||c>i)return u-1;i=c}}return 0}((function(t){return i(t).getBoundingClientRect()}),e,r,o.right,u);return i(a)},Lc=function(t,n,e,r){var o=t.dom().createRange(),i=gn(n);return lo(i,(function(n){return o.selectNode(n.dom()),Bc(o.getBoundingClientRect(),e,r)?Uc(t,n,e,r):h.none()}))},Uc=function(t,n,e,r){return ft(n)?function(t,n,e,r){var o=t.dom().createRange();o.selectNode(n.dom());var i=o.getClientRects();return lo(i,(function(t){return Bc(t,e,r)?h.some(t):h.none()})).map((function(o){return jc(t,n,e,r,o)}))}(t,n,e,r):Lc(t,n,e,r)},Fc=function(t,n){return n-t.left<t.right-n},Wc=function(t,n,e){var r=t.dom().createRange();return r.selectNode(n.dom()),r.collapse(e),r},zc=function(t,n,e){var r=t.dom().createRange();r.selectNode(n.dom());var o=r.getBoundingClientRect(),i=Fc(o,e);return(!0===i?ve:be)(n).map((function(n){return Wc(t,n,i)}))},Hc=function(t,n,e){var r=n.dom().getBoundingClientRect(),o=Fc(r,e);return h.some(Wc(t,n,o))},qc=function(t,n,e,r){var o=t.dom().createRange();o.selectNode(n.dom());var i=o.getBoundingClientRect();return function(t,n,e,r){var o=t.dom().createRange();o.selectNode(n.dom());var i=o.getBoundingClientRect(),u=Math.max(i.left,Math.min(i.right,e)),a=Math.max(i.top,Math.min(i.bottom,r));return Uc(t,n,u,a)}(t,n,Math.max(i.left,Math.min(i.right,e)),Math.max(i.top,Math.min(i.bottom,r)))},Gc=document.caretPositionFromPoint?function(t,n,e){return h.from(t.dom().caretPositionFromPoint(n,e)).bind((function(n){if(null===n.offsetNode)return h.none();var e=t.dom().createRange();return e.setStart(n.offsetNode,n.offset),e.collapse(),h.some(e)}))}:document.caretRangeFromPoint?function(t,n,e){return h.from(t.dom().caretRangeFromPoint(n,e))}:function(t,n,e){return Tt.fromPoint(t,n,e).bind((function(r){var o=function(){return function(t,n,e){return(0===gn(n).length?Hc:zc)(t,n,e)}(t,r,n)};return 0===gn(r).length?o():qc(t,r,n,e).orThunk(o)}))},Kc=function(t,n){var e=it(t);return"input"===e?Oc.after(t):R(["br","img"],e)?0===n?Oc.before(t):Oc.after(t):Oc.on(t,n)},Vc=function(t,n){var e=t.fold(Oc.before,Kc,Oc.after),r=n.fold(Oc.before,Kc,Oc.after);return Ac.relative(e,r)},Yc=function(t,n,e,r){var o=Kc(t,n),i=Kc(e,r);return Ac.relative(o,i)},Jc=function(t,n,e,r){var o=function(t,n,e,r){var o=fn(t).dom().createRange();return o.setStart(t.dom(),n),o.setEnd(e.dom(),r),o}(t,n,e,r),i=an(t,e)&&n===r;return o.collapsed&&!i},Xc=function(t,n){h.from(t.getSelection()).each((function(t){t.removeAllRanges(),t.addRange(n)}))},$c=function(t,n,e,r,o){var i=kc(t,n,e,r,o);Xc(t,i)},Zc=function(t,n){return Pc(t,n).match({ltr:function(n,e,r,o){$c(t,n,e,r,o)},rtl:function(n,e,r,o){var i=t.getSelection();if(i.setBaseAndExtent)i.setBaseAndExtent(n.dom(),e,r.dom(),o);else if(i.extend)try{!function(t,n,e,r,o,i){n.collapse(e.dom(),r),n.extend(o.dom(),i)}(0,i,n,e,r,o)}catch(u){$c(t,r,o,n,e)}else $c(t,r,o,n,e)}})},Qc=function(t){var n=Ac.getWin(t).dom(),e=function(t,e,r,o){return kc(n,t,e,r,o)},r=function(t){return t.match({domRange:function(t){var n=Tt.fromDom(t.startContainer),e=Tt.fromDom(t.endContainer);return Yc(n,t.startOffset,e,t.endOffset)},relative:Vc,exact:Yc})}(t);return Pc(n,r).match({ltr:e,rtl:e})},tl=function(t){var n=Tt.fromDom(t.anchorNode),e=Tt.fromDom(t.focusNode);return Jc(n,t.anchorOffset,e,t.focusOffset)?h.some(Sc.create(n,t.anchorOffset,e,t.focusOffset)):function(t){if(t.rangeCount>0){var n=t.getRangeAt(0),e=t.getRangeAt(t.rangeCount-1);return h.some(Sc.create(Tt.fromDom(n.startContainer),n.startOffset,Tt.fromDom(e.endContainer),e.endOffset))}return h.none()}(t)},nl=function(t,n){var e=function(t,n){var e=t.document.createRange();return Dc(e,n),e}(t,n);Xc(t,e)},el=function(t){return function(t){return h.from(t.getSelection()).filter((function(t){return t.rangeCount>0})).bind(tl)}(t).map((function(t){return Ac.exact(t.start(),t.soffset(),t.finish(),t.foffset())}))},rl=function(t,n){return function(t){var n=t.getClientRects(),e=n.length>0?n[0]:t.getBoundingClientRect();return e.width>0||e.height>0?h.some(e).map(_c):h.none()}(Mc(t,n))},ol=function(t,n,e){return function(t,n,e){var r=Tt.fromDom(t.document);return Gc(r,n,e).map((function(t){return Sc.create(Tt.fromDom(t.startContainer),t.startOffset,Tt.fromDom(t.endContainer),t.endOffset)}))}(t,n,e)},il=tinymce.util.Tools.resolve("tinymce.util.VK"),ul=function(t,n,e,r){return fl(t,n,xc(e),r)},al=function(t,n,e,r){return fl(t,n,Cc(e),r)},cl=function(t,n){var e=Ac.exact(n,0,n,0);return Qc(e)},ll=function(t,n){var e,r=Wn(n,"tr");return(e=r,0===e.length?h.none():h.some(e[e.length-1])).bind((function(t){return Kn(t,"td,th").map((function(t){return cl(0,t)}))}))},fl=function(t,n,e,r,o){return e.fold(h.none,h.none,(function(t,n){return ve(n).map((function(t){return cl(0,t)}))}),(function(e){return ne.table(e,n).bind((function(n){var o=yr.noMenu(e);return t.undoManager.transact((function(){r.insertRowsAfter(n,o)})),ll(0,n)}))}))},sl=["table","li","dl"],dl={handle:function(t,n,e,r){if(t.keyCode===il.TAB){var o=Du(n),i=function(t){var n=it(t);return an(t,o)||R(sl,n)},u=n.selection.getRng();if(u.collapsed){var a=Tt.fromDom(u.startContainer);ne.cell(a,i).each((function(o){t.preventDefault(),(t.shiftKey?al:ul)(n,i,o,e,r).each((function(t){n.selection.setRng(t)}))}))}}}},ml={create:Y("selection","kill")},pl=function(t,n,e,r){return{start:o(Oc.on(t,n)),finish:o(Oc.on(e,r))}},gl={convertToRange:function(t,n){var e=Mc(t,n);return Sc.create(Tt.fromDom(e.startContainer),e.startOffset,Tt.fromDom(e.endContainer),e.endOffset)},makeSitus:pl},hl=function(t,n,e,r,o){return an(e,r)?h.none():ir.identify(e,r,n).bind((function(n){var r=n.boxes().getOr([]);return r.length>0?(o(t,r,n.start(),n.finish()),h.some(ml.create(h.some(gl.makeSitus(e,0,e,pe(e))),!0))):h.none()}))},vl={sync:function(t,n,e,r,o,i,u){return an(e,o)&&r===i?h.none():Vn(e,"td,th",n).bind((function(e){return Vn(o,"td,th",n).bind((function(r){return hl(t,n,e,r,u)}))}))},detect:hl,update:function(t,n,e,r,o){return ir.shiftSelection(r,t,n,o.firstSelectedSelector(),o.lastSelectedSelector()).map((function(t){return o.clear(e),o.selectRange(e,t.boxes(),t.start(),t.finish()),t.boxes()}))}},bl=Y("item","mode"),yl=function(t,n,e,r){return void 0===r&&(r=wl),t.property().parent(n).map((function(t){return bl(t,r)}))},wl=function(t,n,e,r){return void 0===r&&(r=xl),e.sibling(t,n).map((function(t){return bl(t,r)}))},xl=function t(n,e,r,o){void 0===o&&(o=t);var i=n.property().children(e);return r.first(i).map((function(t){return bl(t,o)}))},Cl=[{current:yl,next:wl,fallback:h.none()},{current:wl,next:xl,fallback:h.some(yl)},{current:xl,next:xl,fallback:h.some(wl)}],Sl=function(){return{sibling:function(t,n){return t.query().prevSibling(n)},first:function(t){return t.length>0?h.some(t[t.length-1]):h.none()}}},Tl=function(){return{sibling:function(t,n){return t.query().nextSibling(n)},first:function(t){return t.length>0?h.some(t[0]):h.none()}}},Ol=function t(n,e,r,o,i,u){return function t(n,e,r,o,i){return void 0===i&&(i=Cl),N(i,(function(t){return t.current===r})).bind((function(r){return r.current(n,e,o,r.next).orThunk((function(){return r.fallback.bind((function(r){return t(n,e,r,o)}))}))}))}(n,e,o,i).bind((function(e){return u(e.item())?h.none():r(e.item())?h.some(e.item()):t(n,e.item(),r,e.mode(),i,u)}))},Rl=function(t){return function(n){return 0===t.property().children(n).length}},Al=function(t,n,e,r){return Ol(t,n,e,wl,Sl(),r)},Dl=function(t,n,e,r){return Ol(t,n,e,wl,Tl(),r)},El=Ge(),kl=function(t,n){return function(t,n,e){return Al(t,n,Rl(t),e)}(El,t,n)},_l=function(t,n){return function(t,n,e){return Dl(t,n,Rl(t),e)}(El,t,n)},Il=Y("element","offset"),Nl=(Y("element","deltaOffset"),Y("element","start","finish"),Y("begin","end"),Y("element","text"),fr([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}])),Pl=function(t){return Vn(t,"tr")},Ml=ao({},Nl,{verify:function(t,n,e,r,o,i,u){return Vn(r,"td,th",u).bind((function(e){return Vn(n,"td,th",u).map((function(n){return an(e,n)?an(r,e)&&pe(e)===o?i(n):Nl.none("in same cell"):nr.sharedOne(Pl,[e,n]).fold((function(){return function(t,n,e){var r=t.getRect(n),o=t.getRect(e);return o.right>r.left&&o.left<r.right}(t,n,e)?Nl.success():i(n)}),(function(t){return i(n)}))}))})).getOr(Nl.none("default"))},cata:function(t,n,e,r,o){return t.fold(n,e,r,o)}}),Bl=(Y("ancestor","descendants","element","index"),Y("parent","children","element","index")),jl=function(t,n){return P(t,u(an,n))},Ll=function(t){return"br"===it(t)},Ul=function t(n,e,r){return e(n,r).bind((function(n){return ft(n)&&0===se(n).trim().length?t(n,e,r):h.some(n)}))},Fl=function(t,n,e,r){return function(t,n){return hn(t,n).filter(Ll).orThunk((function(){return hn(t,n-1).filter(Ll)}))}(n,e).bind((function(n){return r.traverse(n).fold((function(){return Ul(n,r.gather,t).map(r.relative)}),(function(t){return function(t){return sn(t).bind((function(n){var e=gn(n);return jl(e,t).map((function(r){return Bl(n,e,t,r)}))}))}(t).map((function(t){return Oc.on(t.parent(),t.index())}))}))}))},Wl=function(t,n,e,r){return(Ll(n)?function(t,n,e){return e.traverse(n).orThunk((function(){return Ul(n,e.gather,t)})).map(e.relative)}(t,n,r):Fl(t,n,e,r)).map((function(t){return{start:o(t),finish:o(t)}}))},zl=function(t){return Ml.cata(t,(function(t){return h.none()}),(function(){return h.none()}),(function(t){return h.some(Il(t,0))}),(function(t){return h.some(Il(t,pe(t)))}))},Hl=tt(["left","top","right","bottom"],[]),ql={nu:Hl,moveUp:function(t,n){return Hl({left:t.left(),top:t.top()-n,right:t.right(),bottom:t.bottom()-n})},moveDown:function(t,n){return Hl({left:t.left(),top:t.top()+n,right:t.right(),bottom:t.bottom()+n})},moveBottomTo:function(t,n){var e=t.bottom()-t.top();return Hl({left:t.left(),top:n-e,right:t.right(),bottom:n})},moveTopTo:function(t,n){var e=t.bottom()-t.top();return Hl({left:t.left(),top:n,right:t.right(),bottom:n+e})},getTop:function(t){return t.top()},getBottom:function(t){return t.bottom()},translate:function(t,n,e){return Hl({left:t.left()+n,top:t.top()+e,right:t.right()+n,bottom:t.bottom()+e})},toString:function(t){return"("+t.left()+", "+t.top()+") -> ("+t.right()+", "+t.bottom()+")"}},Gl=function(t){return ql.nu({left:t.left,top:t.top,right:t.right,bottom:t.bottom})},Kl=function(t,n){return h.some(t.getRect(n))},Vl=function(t,n,e){return lt(n)?Kl(t,n).map(Gl):ft(n)?function(t,n,e){return e>=0&&e<pe(n)?t.getRangedRect(n,e,n,e+1):e>0?t.getRangedRect(n,e-1,n,e):h.none()}(t,n,e).map(Gl):h.none()},Yl=function(t,n){return lt(n)?Kl(t,n).map(Gl):ft(n)?t.getRangedRect(n,0,n,pe(n)).map(Gl):h.none()},Jl=fr([{none:[]},{retry:["caret"]}]),Xl=function(t,n,e){return(r=n,i=pu,zn((function(t,n){return n(t)}),Hn,r,i,u)).fold(o(!1),(function(n){return Yl(t,n).exists((function(t){return function(t,n){return t.left()<n.left()||Math.abs(n.right()-t.left())<1||t.left()>n.right()}(e,t)}))}));var r,i,u},$l={point:ql.getTop,adjuster:function(t,n,e,r,o){var i=ql.moveUp(o,5);return Math.abs(e.top()-r.top())<1?Jl.retry(i):e.bottom()<o.top()?Jl.retry(i):e.bottom()===o.top()?Jl.retry(ql.moveUp(o,1)):Xl(t,n,o)?Jl.retry(ql.translate(i,5,0)):Jl.none()},move:ql.moveUp,gather:kl},Zl={point:ql.getBottom,adjuster:function(t,n,e,r,o){var i=ql.moveDown(o,5);return Math.abs(e.bottom()-r.bottom())<1?Jl.retry(i):e.top()>o.bottom()?Jl.retry(i):e.top()===o.bottom()?Jl.retry(ql.moveDown(o,1)):Xl(t,n,o)?Jl.retry(ql.translate(i,5,0)):Jl.none()},move:ql.moveDown,gather:_l},Ql=function(t,n,e,r,o){return tf(t,n,e,n.move(r,5),o)},tf=function t(n,e,r,o,i){return 0===i?h.some(o):function(t,n,e){return t.elementFromPoint(n,e).filter((function(t){return"table"===it(t)})).isSome()}(n,o.left(),e.point(o))?Ql(n,e,r,o,i-1):n.situsFromPoint(o.left(),e.point(o)).bind((function(u){return u.start().fold(h.none,(function(u){return Yl(n,u).bind((function(a){return e.adjuster(n,u,a,r,o).fold(h.none,(function(o){return t(n,e,r,o,i-1)}))})).orThunk((function(){return h.some(o)}))}),h.none)}))},nf=function(t,n,e){var r=t.move(e,5),o=tf(n,t,e,r,100).getOr(r);return function(t,n,e){return t.point(n)>e.getInnerHeight()?h.some(t.point(n)-e.getInnerHeight()):t.point(n)<0?h.some(-t.point(n)):h.none()}(t,o,n).fold((function(){return n.situsFromPoint(o.left(),t.point(o))}),(function(e){return n.scrollBy(0,e),n.situsFromPoint(o.left(),t.point(o)-e)}))},ef={tryUp:u(nf,$l),tryDown:u(nf,Zl),ieTryUp:function(t,n){return t.situsFromPoint(n.left(),n.top()-5)},ieTryDown:function(t,n){return t.situsFromPoint(n.left(),n.bottom()+5)},getJumpSize:o(5)},rf=nn.detect(),of=function(t,n,e,r,o){return Vl(t,n,e).bind((function(n){return uf(t,o,r(n,ef.getJumpSize()))}))},uf=function(t,n,e){return rf.browser.isChrome()||rf.browser.isSafari()||rf.browser.isFirefox()||rf.browser.isEdge()?n.otherRetry(t,e):rf.browser.isIE()?n.ieRetry(t,e):h.none()},af=function(t,n,e,r,o){return Vl(t,e,r).bind((function(n){return uf(t,o,n)}))},cf=function(t,n,e){return function(t,n,e){return t.getSelection().bind((function(r){return Wl(n,r.finish(),r.foffset(),e).fold((function(){return h.some(Il(r.finish(),r.foffset()))}),(function(o){var i=t.fromSitus(o),u=Ml.verify(t,r.finish(),r.foffset(),i.finish(),i.foffset(),e.failure,n);return zl(u)}))}))}(t,n,e).bind((function(r){return function t(n,e,r,o,i,u){return 0===u?h.none():af(n,e,r,o,i).bind((function(a){var c=n.fromSitus(a),l=Ml.verify(n,r,o,c.finish(),c.foffset(),i.failure,e);return Ml.cata(l,(function(){return h.none()}),(function(){return h.some(a)}),(function(a){return an(r,a)&&0===o?of(n,r,o,ql.moveUp,i):t(n,e,a,0,i,u-1)}),(function(a){return an(r,a)&&o===pe(a)?of(n,r,o,ql.moveDown,i):t(n,e,a,pe(a),i,u-1)}))}))}(t,n,r.element(),r.offset(),e,20).map(t.fromSitus)}))},lf=nn.detect(),ff=function(t,n){return Hn(t,(function(t){return sn(t).exists((function(t){return an(t,n)}))}),e).isSome();var e},sf=function(t,n,e,r,i){return Vn(r,"td,th",n).bind((function(r){return Vn(r,"table",n).bind((function(u){return ff(i,u)?cf(t,n,e).bind((function(t){return Vn(t.finish(),"td,th",n).map((function(n){return{start:o(r),finish:o(n),range:o(t)}}))})):h.none()}))}))},df=function(t,n,e,r,o,i){return lf.browser.isIE()?h.none():i(r,n).orThunk((function(){return sf(t,n,e,r,o).map((function(t){var n=t.range();return ml.create(h.some(gl.makeSitus(n.start(),n.soffset(),n.finish(),n.foffset())),!0)}))}))},mf=function(t,n,e,r,o,i,u){return sf(t,e,r,o,i).bind((function(t){return vl.detect(n,e,t.start(),t.finish(),u)}))},pf=function(t,n){return Vn(t,"tr",n).bind((function(t){return Vn(t,"table",n).bind((function(e){var r=Wn(e,"tr");return an(t,r[0])?function(t,n,e){return Al(El,t,n,e)}(e,(function(t){return be(t).isSome()}),n).map((function(t){var n=pe(t);return ml.create(h.some(gl.makeSitus(t,n,t,n)),!0)})):h.none()}))}))},gf=function(t,n){return Vn(t,"tr",n).bind((function(t){return Vn(t,"table",n).bind((function(e){var r=Wn(e,"tr");return an(t,r[r.length-1])?function(t,n,e){return Dl(El,t,n,e)}(e,(function(t){return ve(t).isSome()}),n).map((function(t){return ml.create(h.some(gl.makeSitus(t,0,t,0)),!0)})):h.none()}))}))},hf=function(t,n){return Vn(t,"td,th",n)};var vf={down:{traverse:pn,gather:_l,relative:Oc.before,otherRetry:ef.tryDown,ieRetry:ef.ieTryDown,failure:Ml.failedDown},up:{traverse:mn,gather:kl,relative:Oc.before,otherRetry:ef.tryUp,ieRetry:ef.ieTryUp,failure:Ml.failedUp}},bf=function(t){return function(n){return n===t}},yf=bf(38),wf=bf(40),xf={ltr:{isBackward:bf(37),isForward:bf(39)},rtl:{isBackward:bf(39),isForward:bf(37)},isUp:yf,isDown:wf,isNavigation:function(t){return t>=37&&t<=40}},Cf=function(t){return{left:t.left(),top:t.top(),right:t.right(),bottom:t.bottom(),width:t.width(),height:t.height()}},Sf=(nn.detect().browser.isSafari(),function(n){return{elementFromPoint:function(t,e){return Tt.fromPoint(Tt.fromDom(n.document),t,e)},getRect:function(t){return t.dom().getBoundingClientRect()},getRangedRect:function(t,e,r,o){var i=Ac.exact(t,e,r,o);return rl(n,i).map(Cf)},getSelection:function(){return el(n).map((function(t){return gl.convertToRange(n,t)}))},fromSitus:function(t){var e=Ac.relative(t.start(),t.finish());return gl.convertToRange(n,e)},situsFromPoint:function(t,e){return ol(n,t,e).map((function(t){return pl(t.start(),t.soffset(),t.finish(),t.foffset())}))},clearSelection:function(){!function(t){t.getSelection().removeAllRanges()}(n)},setSelection:function(t){!function(t,n,e,r,o){var i=Yc(n,e,r,o);Zc(t,i)}(n,t.start(),t.soffset(),t.finish(),t.foffset())},setRelativeSelection:function(t,e){!function(t,n,e){var r=Vc(n,e);Zc(t,r)}(n,t,e)},selectContents:function(t){nl(n,t)},getInnerHeight:function(){return n.innerHeight},getScrollY:function(){var e,r,o,i;return(e=Tt.fromDom(n.document),r=void 0!==e?e.dom():t.document,o=r.body.scrollLeft||r.documentElement.scrollLeft,i=r.body.scrollTop||r.documentElement.scrollTop,zr(o,i)).top()},scrollBy:function(e,r){!function(n,e,r){(void 0!==r?r.dom():t.document).defaultView.scrollBy(n,e)}(e,r,Tt.fromDom(n.document))}}}),Tf=Y("rows","cols"),Of={mouse:function(t,n,e,r){var o=function(t,n,e,r){var o=h.none(),i=function(){o=h.none()};return{mousedown:function(t){r.clear(n),o=hf(t.target(),e)},mouseover:function(i){o.each((function(o){r.clear(n),hf(i.target(),e).each((function(i){ir.identify(o,i,e).each((function(e){var u=e.boxes().getOr([]);(u.length>1||1===u.length&&!an(o,i))&&(r.selectRange(n,u,e.start(),e.finish()),t.selectContents(i))}))}))}))},mouseup:function(t){o.each(i)}}}(Sf(t),n,e,r);return{mousedown:o.mousedown,mouseover:o.mouseover,mouseup:o.mouseup}},keyboard:function(t,n,e,r){var o=Sf(t),i=function(){return r.clear(n),h.none()};return{keydown:function(t,a,c,l,f,s){var d=t.raw(),m=d.which,p=!0===d.shiftKey;return ir.retrieve(n,r.selectedSelector()).fold((function(){return xf.isDown(m)&&p?u(mf,o,n,e,vf.down,l,a,r.selectRange):xf.isUp(m)&&p?u(mf,o,n,e,vf.up,l,a,r.selectRange):xf.isDown(m)?u(df,o,e,vf.down,l,a,gf):xf.isUp(m)?u(df,o,e,vf.up,l,a,pf):h.none}),(function(t){var e=function(e){return function(){return lo(e,(function(e){return vl.update(e.rows(),e.cols(),n,t,r)})).fold((function(){return ir.getEdges(n,r.firstSelectedSelector(),r.lastSelectedSelector()).map((function(t){var e=xf.isDown(m)||s.isForward(m)?Oc.after:Oc.before;return o.setRelativeSelection(Oc.on(t.first(),0),e(t.table())),r.clear(n),ml.create(h.none(),!0)}))}),(function(t){return h.some(ml.create(h.none(),!0))}))}};return xf.isDown(m)&&p?e([Tf(1,0)]):xf.isUp(m)&&p?e([Tf(-1,0)]):s.isBackward(m)&&p?e([Tf(0,-1),Tf(-1,0)]):s.isForward(m)&&p?e([Tf(0,1),Tf(1,0)]):xf.isNavigation(m)&&!1===p?i:h.none}))()},keyup:function(t,o,i,u,a){return ir.retrieve(n,r.selectedSelector()).fold((function(){var c=t.raw(),l=c.which;return!1===(!0===c.shiftKey)?h.none():xf.isNavigation(l)?vl.sync(n,e,o,i,u,a,r.selectRange):h.none()}),h.none)}}}},Rf=function(t,n){E(n,(function(n){!function(t,n){go(t)?t.dom().classList.remove(n):vo(t,n);yo(t)}(t,n)}))},Af={byClass:function(t){var n,e,r=(n=t.selected(),function(t){bo(t,n)}),o=(e=[t.selected(),t.lastSelected(),t.firstSelected()],function(t){Rf(t,e)}),i=function(n){var e=Wn(n,t.selectedSelector());E(e,o)};return{clear:i,selectRange:function(n,e,o,u){i(n),E(e,r),bo(o,t.firstSelected()),bo(u,t.lastSelected())},selectedSelector:t.selectedSelector,firstSelectedSelector:t.firstSelectedSelector,lastSelectedSelector:t.lastSelectedSelector}},byAttr:function(t){var n=function(n){ht(n,t.selected()),ht(n,t.firstSelected()),ht(n,t.lastSelected())},e=function(n){dt(n,t.selected(),"1")},r=function(e){var r=Wn(e,t.selectedSelector());E(r,n)};return{clear:r,selectRange:function(n,o,i,u){r(n),E(o,e),dt(i,t.firstSelected(),"1"),dt(u,t.lastSelected(),"1")},selectedSelector:t.selectedSelector,firstSelectedSelector:t.firstSelectedSelector,lastSelectedSelector:t.lastSelectedSelector}}},Df=function(t){return!1===wo(Tt.fromDom(t.target),"ephox-snooker-resizer-bar")};var Ef=function(t){return{get:function(){var n=Du(t);return ur(n,lr.selectedSelector()).fold((function(){return void 0===t.selection.getStart()?dr.none():dr.single(t.selection)}),(function(t){return dr.multiple(t)}))}}},kf=function(t,e){var r=n(h.none()),o=n([]),i=function(){return Ha(t).bind((function(t){return ne.table(t).map((function(n){return"caption"===it(t)?yr.notCell(t):yr.forMenu(e,n,t)}))}))},u=function(){r.set(Ct(i)()),E(o.get(),(function(t){return t()}))},a=function(t,n){var e=function(){return r.get().fold((function(){t.setDisabled(!0)}),(function(e){t.setDisabled(n(e))}))};return e(),o.set(o.get().concat([e])),function(){o.set(k(o.get(),(function(t){return t!==e})))}};return t.on("NodeChange",u),{onSetupTable:function(t){return a(t,(function(t){return!1}))},onSetupCellOrRow:function(t){return a(t,(function(t){return"caption"===it(t.element())}))},onSetupMergeable:function(t){return a(t,(function(t){return t.mergable().isNone()}))},onSetupUnmergeable:function(t){return a(t,(function(t){return t.unmergable().isNone()}))},resetTargets:u,targets:function(){return r.get()}}},_f={addButtons:function(t,n){t.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",fetch:function(t){return t("inserttable tableprops deletetable | cell row column")}});var e=function(n){return function(){return t.execCommand(n)}};t.ui.registry.addButton("tableprops",{tooltip:"Table properties",onAction:e("mceTableProps"),icon:"table",onSetup:n.onSetupTable}),t.ui.registry.addButton("tabledelete",{tooltip:"Delete table",onAction:e("mceTableDelete"),icon:"table-delete-table",onSetup:n.onSetupTable}),t.ui.registry.addButton("tablecellprops",{tooltip:"Cell properties",onAction:e("mceTableCellProps"),icon:"table-cell-properties",onSetup:n.onSetupCellOrRow}),t.ui.registry.addButton("tablemergecells",{tooltip:"Merge cells",onAction:e("mceTableMergeCells"),icon:"table-merge-cells",onSetup:n.onSetupMergeable}),t.ui.registry.addButton("tablesplitcells",{tooltip:"Split cell",onAction:e("mceTableSplitCells"),icon:"table-split-cells",onSetup:n.onSetupUnmergeable}),t.ui.registry.addButton("tableinsertrowbefore",{tooltip:"Insert row before",onAction:e("mceTableInsertRowBefore"),icon:"table-insert-row-above",onSetup:n.onSetupCellOrRow}),t.ui.registry.addButton("tableinsertrowafter",{tooltip:"Insert row after",onAction:e("mceTableInsertRowAfter"),icon:"table-insert-row-after",onSetup:n.onSetupCellOrRow}),t.ui.registry.addButton("tabledeleterow",{tooltip:"Delete row",onAction:e("mceTableDeleteRow"),icon:"table-delete-row",onSetup:n.onSetupCellOrRow}),t.ui.registry.addButton("tablerowprops",{tooltip:"Row properties",onAction:e("mceTableRowProps"),icon:"table-row-properties",onSetup:n.onSetupCellOrRow}),t.ui.registry.addButton("tableinsertcolbefore",{tooltip:"Insert column before",onAction:e("mceTableInsertColBefore"),icon:"table-insert-column-before",onSetup:n.onSetupCellOrRow}),t.ui.registry.addButton("tableinsertcolafter",{tooltip:"Insert column after",onAction:e("mceTableInsertColAfter"),icon:"table-insert-column-after",onSetup:n.onSetupCellOrRow}),t.ui.registry.addButton("tabledeletecol",{tooltip:"Delete column",onAction:e("mceTableDeleteCol"),icon:"table-delete-column",onSetup:n.onSetupCellOrRow}),t.ui.registry.addButton("tablecutrow",{tooltip:"Cut row",onAction:e("mceTableCutRow"),icon:"temporary-placeholder",onSetup:n.onSetupCellOrRow}),t.ui.registry.addButton("tablecopyrow",{tooltip:"Copy row",onAction:e("mceTableCopyRow"),icon:"temporary-placeholder",onSetup:n.onSetupCellOrRow}),t.ui.registry.addButton("tablepasterowbefore",{tooltip:"Paste row before",onAction:e("mceTablePasteRowBefore"),icon:"temporary-placeholder",onSetup:n.onSetupCellOrRow}),t.ui.registry.addButton("tablepasterowafter",{tooltip:"Paste row after",onAction:e("mceTablePasteRowAfter"),icon:"temporary-placeholder",onSetup:n.onSetupCellOrRow}),t.ui.registry.addButton("tableinsertdialog",{tooltip:"Insert table",onAction:e("mceInsertTable"),icon:"table"})},addToolbars:function(t){var n=function(t){return t.getParam("table_toolbar","tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol")}(t);n.length>0&&t.ui.registry.addContextToolbar("table",{predicate:function(n){return t.dom.is(n,"table")&&t.getBody().contains(n)},items:n,scope:"node",position:"node"})}},If={addMenuItems:function(t,n){var e=function(n){return function(){return t.execCommand(n)}},r=function(n){var e=n.numRows,r=n.numColumns;t.undoManager.transact((function(){Ba(t,r,e)})),t.addVisual()},o={text:"Table properties",onSetup:n.onSetupTable,onAction:e("mceTableProps")},i={text:"Delete table",icon:"table-delete-table",onSetup:n.onSetupTable,onAction:e("mceTableDelete")},u=[{type:"menuitem",text:"Insert row before",icon:"table-insert-row-above",onAction:e("mceTableInsertRowBefore"),onSetup:n.onSetupCellOrRow},{type:"menuitem",text:"Insert row after",icon:"table-insert-row-after",onAction:e("mceTableInsertRowAfter"),onSetup:n.onSetupCellOrRow},{type:"menuitem",text:"Delete row",icon:"table-delete-row",onAction:e("mceTableDeleteRow"),onSetup:n.onSetupCellOrRow},{type:"menuitem",text:"Row properties",icon:"table-row-properties",onAction:e("mceTableRowProps"),onSetup:n.onSetupCellOrRow},{type:"separator"},{type:"menuitem",text:"Cut row",onAction:e("mceTableCutRow"),onSetup:n.onSetupCellOrRow},{type:"menuitem",text:"Copy row",onAction:e("mceTableCopyRow"),onSetup:n.onSetupCellOrRow},{type:"menuitem",text:"Paste row before",onAction:e("mceTablePasteRowBefore"),onSetup:n.onSetupCellOrRow},{type:"menuitem",text:"Paste row after",onAction:e("mceTablePasteRowAfter"),onSetup:n.onSetupCellOrRow}],a={type:"nestedmenuitem",text:"Row",getSubmenuItems:function(){return u}},c=[{type:"menuitem",text:"Insert column before",icon:"table-insert-column-before",onAction:e("mceTableInsertColBefore"),onSetup:n.onSetupCellOrRow},{type:"menuitem",text:"Insert column after",icon:"table-insert-column-after",onAction:e("mceTableInsertColAfter"),onSetup:n.onSetupCellOrRow},{type:"menuitem",text:"Delete column",icon:"table-delete-column",onAction:e("mceTableDeleteCol"),onSetup:n.onSetupCellOrRow}],l={type:"nestedmenuitem",text:"Column",getSubmenuItems:function(){return c}},f=[{type:"menuitem",text:"Cell properties",icon:"table-cell-properties",onAction:e("mceTableCellProps"),onSetup:n.onSetupCellOrRow},{type:"menuitem",text:"Merge cells",icon:"table-merge-cells",onAction:e("mceTableMergeCells"),onSetup:n.onSetupMergeable},{type:"menuitem",text:"Split cell",icon:"table-split-cells",onAction:e("mceTableSplitCells"),onSetup:n.onSetupUnmergeable}],s={type:"nestedmenuitem",text:"Cell",getSubmenuItems:function(){return f}};return!1===function(t){return t.getParam("table_grid",!0,"boolean")}(t)?t.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:e("mceInsertTable")}):t.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:function(){return[{type:"fancymenuitem",fancytype:"inserttable",onAction:r}]}}),t.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:e("mceInsertTable")}),t.ui.registry.addMenuItem("tableprops",o),t.ui.registry.addMenuItem("deletetable",i),t.ui.registry.addNestedMenuItem("row",a),t.ui.registry.addNestedMenuItem("column",l),t.ui.registry.addNestedMenuItem("cell",s),t.ui.registry.addContextMenu("table",{update:function(){return n.resetTargets(),n.targets().fold((function(){return""}),(function(t){return"caption"===it(t.element())?"tableprops deletetable":"cell row column | tableprops deletetable"}))}}),{rowItems:u,columnItems:c,cellItems:f}}},Nf=function(t,n,e,r,o){return{insertTable:function(n,e){return Ba(t,n,e)},setClipboardRows:function(t){return function(t,n){var e=D(t,Tt.fromDom);n.set(h.from(e))}(t,n)},getClipboardRows:function(){return function(t){return t.get().fold((function(){}),(function(t){return D(t,(function(t){return t.dom()}))}))}(n)},resizeHandler:e,menuItems:o,selectionTargets:r}};function Pf(t){var i=vc(t),u=function(t,n){var i=tt(["mousedown","mouseover","mouseup","keyup","keydown"],[]),u=h.none(),a=Af.byAttr(lr);return t.on("init",(function(c){var l=t.getWin(),f=Du(t),s=_u(t),d=Of.mouse(l,f,s,a),m=Of.keyboard(l,f,s,a),p=function(n,e){(function(t){return!0===t.raw().shiftKey})(n)&&(e.kill()&&n.kill(),e.selection().each((function(n){var e=Ac.relative(n.start(),n.finish()),r=Mc(l,e);t.selection.setRng(r)})))},g=function(n){var e=y(n);if(e.raw().shiftKey&&xf.isNavigation(e.raw().which)){var r=t.selection.getRng(),o=Tt.fromDom(r.startContainer),i=Tt.fromDom(r.endContainer);m.keyup(e,o,r.startOffset,i,r.endOffset).each((function(t){p(e,t)}))}},v=function(e){var r=y(e);n().each((function(t){t.hideBars()}));var o=t.selection.getRng(),i=Tt.fromDom(t.selection.getStart()),u=Tt.fromDom(o.startContainer),a=Tt.fromDom(o.endContainer),c=Bu.directionAt(i).isRtl()?xf.rtl:xf.ltr;m.keydown(r,u,o.startOffset,a,o.endOffset,c).each((function(t){p(r,t)})),n().each((function(t){t.showBars()}))},b=function(t){return t.hasOwnProperty("x")&&t.hasOwnProperty("y")},y=function(t){var n=Tt.fromDom(t.target),e=function(){t.stopPropagation()},i=function(){t.preventDefault()},u=r(i,e);return{target:o(n),x:o(b(t)?t.x:null),y:o(b(t)?t.y:null),stop:e,prevent:i,kill:u,raw:o(t)}},w=function(t){return 0===t.button},x=function(t){w(t)&&Df(t)&&d.mousedown(y(t))},C=function(t){var n;void 0!==(n=t).buttons&&0==(1&n.buttons)||!Df(t)||d.mouseover(y(t))},S=function(t){w(t)&&Df(t)&&d.mouseup(y(t))};t.on("mousedown",x),t.on("mouseover",C),t.on("mouseup",S),t.on("keyup",g),t.on("keydown",v),t.on("NodeChange",(function(){var n=t.selection,r=Tt.fromDom(n.getStart()),o=Tt.fromDom(n.getEnd());nr.sharedOne(ne.table,[r,o]).fold((function(){a.clear(f)}),e)})),u=h.some(i({mousedown:x,mouseover:C,mouseup:S,keyup:g,keydown:v}))})),{clear:a.clear,destroy:function(){u.each((function(t){}))}}}(t,i.lazyResize),a=Zu(t,i.lazyWire),c=Ef(t),l=kf(t,c),f=n(h.none());Ga.registerCommands(t,a,u,c,f),wr.registerEvents(t,c,a,u);var s=If.addMenuItems(t,l);return _f.addButtons(t,l),_f.addToolbars(t),t.on("PreInit",(function(){t.serializer.addTempAttr(lr.firstSelected()),t.serializer.addTempAttr(lr.lastSelected())})),Wu(t)&&t.on("keydown",(function(n){dl.handle(n,t,a,i.lazyWire)})),t.on("remove",(function(){i.destroy(),u.destroy()})),Nf(t,f,i,l,s)}v.add("table",Pf)}(window)},"vn/0":function(t,n,e){(function(t){e("Kz6e"),e("n7j8"),e("rzGZ"),e("Dq+y"),e("8npG"),e("E5k/"),e("q/PY"),e("y7hu"),e("wZFJ"),e("AqHK"),e("sC2a"),e("OeI1"),e("zGcK"),e("HXzo"),e("HQhv"),e("YbXK"),e("cFtU"),e("sc67"),e("DrhF"),e("pJf4"),function(n){"use strict";var e,r,o,i,u,a=tinymce.util.Tools.resolve("tinymce.PluginManager"),c=tinymce.util.Tools.resolve("tinymce.util.VK"),l=function(t){return function(n){return function(t){if(null===t)return"null";var n=typeof t;return"object"===n&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"===n&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":n}(n)===t}},f=l("string"),s=l("array"),d=l("boolean"),m=l("function"),p=function(t){var n=t.getParam("link_assume_external_targets",!1);return d(n)&&n?1:!f(n)||"http"!==n&&"https"!==n?0:n},g=function(t){return t.getParam("link_context_toolbar",!1,"boolean")},h=function(t){return t.getParam("link_list")},v=function(t){return t.getParam("default_link_target")},b=function(t){return t.getParam("target_list",!0)},y=function(t){return t.getParam("rel_list",[],"array")},w=function(t){return t.getParam("link_class_list",[],"array")},x=function(t){return t.getParam("link_title",!0,"boolean")},C=function(t){return t.getParam("allow_unsafe_link_target",!1,"boolean")},S=function(t){return t.getParam("link_quicklink",!1,"boolean")},T=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),O=tinymce.util.Tools.resolve("tinymce.Env"),R=function(t){if(!O.ie||O.ie>10){var e=n.document.createElement("a");e.target="_blank",e.href=t,e.rel="noreferrer noopener";var r=n.document.createEvent("MouseEvents");r.initMouseEvent("click",!0,!0,n.window,0,0,0,0,0,!1,!1,!1,!1,0,null),function(t,e){n.document.body.appendChild(t),t.dispatchEvent(e),n.document.body.removeChild(t)}(e,r)}else{var o=n.window.open("","_blank");if(o){o.opener=null;var i=o.document;i.open(),i.write('<meta http-equiv="refresh" content="0; url='+T.DOM.encode(t)+'">'),i.close()}}},A=function(){},D=function(t){return function(){return t}},E=D(!1),k=D(!0),_=E,I=k,N=function(){return P},P=(i={fold:function(t,n){return t()},is:_,isSome:_,isNone:I,getOr:o=function(t){return t},getOrThunk:r=function(t){return t()},getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:function(){return null},getOrUndefined:function(){},or:o,orThunk:r,map:N,ap:N,each:function(){},bind:N,flatten:N,exists:_,forall:I,filter:N,equals:e=function(t){return t.isNone()},equals_:e,toArray:function(){return[]},toString:D("none()")},Object.freeze&&Object.freeze(i),i),M=function t(n){var e=function(){return n},r=function(){return i},o=function(t){return t(n)},i={fold:function(t,e){return e(n)},is:function(t){return n===t},isSome:I,isNone:_,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:r,orThunk:r,map:function(e){return t(e(n))},ap:function(e){return e.fold(N,(function(e){return t(e(n))}))},each:function(t){t(n)},bind:o,flatten:e,exists:o,forall:o,filter:function(t){return t(n)?i:P},equals:function(t){return t.is(n)},equals_:function(t,e){return t.fold(_,(function(t){return e(n,t)}))},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return i},B=M,j=N,L=function(t){return null==t?P:M(t)},U=Array.prototype.slice,F=void 0===(u=Array.prototype.indexOf)?function(t,n){return z(t,n)}:function(t,n){return u.call(t,n)},W=function(t,n){for(var e=0,r=t.length;e<r;e++){n(t[e],e,t)}},z=function(t,n){for(var e=0,r=t.length;e<r;++e)if(t[e]===n)return e;return-1},H=Array.prototype.push,q=function(t){for(var n=[],e=0,r=t.length;e<r;++e){if(!s(t[e]))throw new Error("Arr.flatten item "+e+" was not an array, input: "+t);H.apply(n,t[e])}return n},G=function(t,n){var e=function(t,n){for(var e=t.length,r=new Array(e),o=0;o<e;o++){var i=t[o];r[o]=n(i,o,t)}return r}(t,n);return q(e)},K=(m(Array.from)&&Array.from,tinymce.util.Tools.resolve("tinymce.util.Tools")),V=function(t){return/^\w+:/i.test(t)},Y=function(t,n){var e=["noopener"],r=t?t.split(/\s+/):[],o=function(t){return t.filter((function(t){return-1===K.inArray(e,t)}))},i=n?function(t){return(t=o(t)).length>0?t.concat(e):e}(r):o(r);return i.length>0?function(t){return K.trim(t.sort().join(" "))}(i):""},J=function(t,n){return n=n||t.selection.getNode(),$(n)?t.dom.select("a[href]",n)[0]:t.dom.getParent(n,"a[href]")},X=function(t){return t&&"A"===t.nodeName&&!!t.href},$=function(t){return t&&"FIGURE"===t.nodeName&&/\bimage\b/i.test(t.className)},Z=function(t){return function(t,n,e){return W(t,(function(t){e=n(e,t)})),e}(["title","rel","class","target"],(function(n,e){return t[e].each((function(t){n[e]=t.length>0?t:null})),n}),{href:t.href})},Q=function(t,n){var e=t.dom.select("img",n)[0];if(e){var r=t.dom.getParents(e,"a[href]",n)[0];r&&(r.parentNode.insertBefore(e,r),t.dom.remove(r))}},tt=function(t,n,e){var r=t.dom.select("img",n)[0];if(r){var o=t.dom.create("a",e);r.parentNode.insertBefore(o,r),o.appendChild(r)}},nt=function(t,n,e){t.undoManager.transact((function(){var r=t.selection.getNode(),o=J(t,r),i=Z(e);if(!(y(t).length>0)&&!1===C(t)){var u=Y(i.rel,"_blank"===i.target);i.rel=u||null}L(i.target).isNone()&&(i.target=v(t)),i.href=function(t,n){return"http"!==n&&"https"!==n||V(t)?t:n+"://"+t}(i.href,p(t)),e.href===n.href&&n.attach(),o?(t.focus(),function(t,n,e,r){e.each((function(t){n.hasOwnProperty("innerText")?n.innerText=t:n.textContent=t})),t.dom.setAttribs(n,r),t.selection.select(n)}(t,o,e.text,i)):function(t,n,e,r){$(n)?tt(t,n,r):e.fold((function(){t.execCommand("mceInsertLink",!1,r)}),(function(n){t.insertContent(t.dom.createHTML("a",r,t.dom.encode(n)))}))}(t,r,e.text,i)}))},et=function(t){t.undoManager.transact((function(){var n=t.selection.getNode();if($(n))Q(t,n);else{var e=t.dom.getParent(n,"a[href]",t.getBody());e&&t.dom.remove(e,!0)}t.focus()}))},rt=X,ot=function(t){return K.grep(t,X).length>0},it=function(t){var n=t.getAttribute("data-mce-href");return n||t.getAttribute("href")},ut=function(t){return!(/</.test(t)&&(!/^<a [^>]+>[^<]+<\/a>$/.test(t)||-1===t.indexOf("href=")))},at=J,ct=function(t,n){return function(t){return t.replace(/\uFEFF/g,"")}(n?n.innerText||n.textContent:t.getContent({format:"text"}))},lt=Y,ft=V,st=function(t){for(var n=[],e=function(t){n.push(t)},r=0;r<t.length;r++)t[r].each(e);return n},dt=function(t,n){for(var e=0;e<t.length;e++){var r=n(t[e],e);if(r.isSome())return r}return j()},mt=function(t){return f(t.value)?t.value:""},pt=function(t){return void 0===t&&(t=mt),function(n){return L(n).map((function(n){return function(t,n){var e=[];return K.each(t,(function(t){var r=f(t.text)?t.text:f(t.title)?t.title:"";if(void 0!==t.menu);else{var o=n(t);e.push({text:r,value:o})}})),e}(n,t)}))}},gt={sanitize:function(t){return pt(mt)(t)},sanitizeWith:pt,createUi:function(t,n){return function(e){return{name:t,type:"selectbox",label:n,items:e}}},getValue:mt},ht=function(t,n,e,r){var o=r[n],i=t.length>0;return void 0!==o?function(t,n){return dt(n,(function(n){return B(n).filter((function(n){return n.value===t}))}))}(o,e).map((function(n){return{url:{value:n.value,meta:{text:i?t:n.text,attach:A}},text:i?t:n.text}})):j()},vt=function(t,n){var e=function t(n){var e=n,r=function(){return e};return{get:r,set:function(t){e=t},clone:function(){return t(r())}}}(t.text),r=function(t,r){var o,i,u=(o=n,i=r.name,"link"===i?o.catalogs.link:"anchor"===i?o.catalogs.anchor:j()).getOr([]);return ht(e.get(),r.name,u,t)};return{onChange:function(t,n){return"url"===n.name?function(t){if(e.get().length<=0){var n=void 0!==t.url.meta.text?t.url.meta.text:t.url.value;return B({text:n})}return j()}(t()):(o=["anchor","link"],i=n.name,F(o,i)>-1?r(t(),n):"text"===n.name?(e.set(t().text),j()):j());var o,i}}},bt=function(){return(bt=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t}).apply(this,arguments)},yt={},wt={exports:yt};!function(n,e,r,o){!function(o){if("object"==typeof e&&void 0!==r)r.exports=o();else if("function"==typeof n&&n.amd)n([],o);else{("undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:this).EphoxContactWrapper=o()}}((function(){return function t(n,e,r){function i(a,c){if(!e[a]){if(!n[a]){var l="function"==typeof o&&o;if(!c&&l)return l(a,!0);if(u)return u(a,!0);var f=new Error("Cannot find module '"+a+"'");throw f.code="MODULE_NOT_FOUND",f}var s=e[a]={exports:{}};n[a][0].call(s.exports,(function(t){return i(n[a][1][t]||t)}),s,s.exports,t,n,e,r)}return e[a].exports}for(var u="function"==typeof o&&o,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(t,n,e){var r,o,i=n.exports={};function u(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function c(t){if(r===setTimeout)return setTimeout(t,0);if((r===u||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(n){try{return r.call(null,t,0)}catch(n){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:u}catch(t){r=u}try{o="function"==typeof clearTimeout?clearTimeout:a}catch(t){o=a}}();var l,f=[],s=!1,d=-1;function m(){s&&l&&(s=!1,l.length?f=l.concat(f):d=-1,f.length&&p())}function p(){if(!s){var t=c(m);s=!0;for(var n=f.length;n;){for(l=f,f=[];++d<n;)l&&l[d].run();d=-1,n=f.length}l=null,s=!1,function(t){if(o===clearTimeout)return clearTimeout(t);if((o===a||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(t);try{o(t)}catch(n){try{return o.call(null,t)}catch(n){return o.call(this,t)}}}(t)}}function g(t,n){this.fun=t,this.array=n}function h(){}i.nextTick=function(t){var n=new Array(arguments.length-1);if(arguments.length>1)for(var e=1;e<arguments.length;e++)n[e-1]=arguments[e];f.push(new g(t,n)),1!==f.length||s||c(p)},g.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=h,i.addListener=h,i.once=h,i.off=h,i.removeListener=h,i.removeAllListeners=h,i.emit=h,i.prependListener=h,i.prependOnceListener=h,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],2:[function(t,n,e){(function(t){!function(e){var r=setTimeout;function o(){}function i(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],s(t,this)}function u(t,n){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,i._immediateFn((function(){var e=1===t._state?n.onFulfilled:n.onRejected;if(null!==e){var r;try{r=e(t._value)}catch(o){return void c(n.promise,o)}a(n.promise,r)}else(1===t._state?a:c)(n.promise,t._value)}))):t._deferreds.push(n)}function a(t,n){try{if(n===t)throw new TypeError("A promise cannot be resolved with itself.");if(n&&("object"==typeof n||"function"==typeof n)){var e=n.then;if(n instanceof i)return t._state=3,t._value=n,void l(t);if("function"==typeof e)return void s((r=e,o=n,function(){r.apply(o,arguments)}),t)}t._state=1,t._value=n,l(t)}catch(u){c(t,u)}var r,o}function c(t,n){t._state=2,t._value=n,l(t)}function l(t){2===t._state&&0===t._deferreds.length&&i._immediateFn((function(){t._handled||i._unhandledRejectionFn(t._value)}));for(var n=0,e=t._deferreds.length;n<e;n++)u(t,t._deferreds[n]);t._deferreds=null}function f(t,n,e){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof n?n:null,this.promise=e}function s(t,n){var e=!1;try{t((function(t){e||(e=!0,a(n,t))}),(function(t){e||(e=!0,c(n,t))}))}catch(r){if(e)return;e=!0,c(n,r)}}i.prototype.catch=function(t){return this.then(null,t)},i.prototype.then=function(t,n){var e=new this.constructor(o);return u(this,new f(t,n,e)),e},i.all=function(t){var n=Array.prototype.slice.call(t);return new i((function(t,e){if(0===n.length)return t([]);var r=n.length;function o(i,u){try{if(u&&("object"==typeof u||"function"==typeof u)){var a=u.then;if("function"==typeof a)return void a.call(u,(function(t){o(i,t)}),e)}n[i]=u,0==--r&&t(n)}catch(c){e(c)}}for(var i=0;i<n.length;i++)o(i,n[i])}))},i.resolve=function(t){return t&&"object"==typeof t&&t.constructor===i?t:new i((function(n){n(t)}))},i.reject=function(t){return new i((function(n,e){e(t)}))},i.race=function(t){return new i((function(n,e){for(var r=0,o=t.length;r<o;r++)t[r].then(n,e)}))},i._immediateFn="function"==typeof t?function(n){t(n)}:function(t){r(t,0)},i._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)},i._setImmediateFn=function(t){i._immediateFn=t},i._setUnhandledRejectionFn=function(t){i._unhandledRejectionFn=t},void 0!==n&&n.exports?n.exports=i:e.Promise||(e.Promise=i)}(this)}).call(this,t("timers").setImmediate)},{timers:3}],3:[function(t,n,e){(function(n,r){var o=t("process/browser.js").nextTick,i=Function.prototype.apply,u=Array.prototype.slice,a={},c=0;function l(t,n){this._id=t,this._clearFn=n}e.setTimeout=function(){return new l(i.call(setTimeout,window,arguments),clearTimeout)},e.setInterval=function(){return new l(i.call(setInterval,window,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t.close()},l.prototype.unref=l.prototype.ref=function(){},l.prototype.close=function(){this._clearFn.call(window,this._id)},e.enroll=function(t,n){clearTimeout(t._idleTimeoutId),t._idleTimeout=n},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var n=t._idleTimeout;n>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),n))},e.setImmediate="function"==typeof n?n:function(t){var n=c++,r=!(arguments.length<2)&&u.call(arguments,1);return a[n]=!0,o((function(){a[n]&&(r?t.apply(null,r):t.call(null),e.clearImmediate(n))})),n},e.clearImmediate="function"==typeof r?r:function(t){delete a[t]}}).call(this,t("timers").setImmediate,t("timers").clearImmediate)},{"process/browser.js":1,timers:3}],4:[function(t,n,e){var r=t("promise-polyfill"),o="undefined"!=typeof window?window:Function("return this;")();n.exports={boltExport:o.Promise||r}},{"promise-polyfill":2}]},{},[4])(4)}))}(void 0,yt,wt,void 0);var xt=wt.exports.boltExport,Ct=function t(e){var r=j(),o=[],i=function(t){u()?c(t):o.push(t)},u=function(){return r.isSome()},a=function(t){W(t,c)},c=function(t){r.each((function(e){n.setTimeout((function(){t(e)}),0)}))};return e((function(t){r=B(t),a(o),o=[]})),{get:i,map:function(n){return t((function(t){i((function(e){t(n(e))}))}))},isReady:u}},St=Ct,Tt=function(t){n.setTimeout((function(){throw t}),0)},Ot=function t(n){var e=function(t){n().then(t,Tt)};return{map:function(e){return t((function(){return n().then(e)}))},bind:function(e){return t((function(){return n().then((function(t){return e(t).toPromise()}))}))},anonBind:function(e){return t((function(){return n().then((function(){return e.toPromise()}))}))},toLazy:function(){return St(e)},toCached:function(){var e=null;return t((function(){return null===e&&(e=n()),e}))},toPromise:n,get:e}},Rt=function(t){return Ot((function(){return new xt(t)}))},At=function(t){return Ot((function(){return xt.resolve(t)}))},Dt=tinymce.util.Tools.resolve("tinymce.util.Delay"),Et=function(t){var n=t.href;return n.indexOf("@")>0&&-1===n.indexOf("//")&&-1===n.indexOf("mailto:")?B({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:function(t){return bt({},t,{href:"mailto:"+n})}}):j()},kt=function(t){return function(n){var e=n.href;return 1===t&&!ft(e)||0===t&&/^\s*www[\.|\d\.]/i.test(e)?B({message:"The URL you entered seems to be an external link. Do you want to add the required http:// prefix?",preprocess:function(t){return bt({},t,{href:"http://"+e})}}):j()}},_t=function(t,n,e){return dt([Et,kt(n)],(function(t){return t(e)})).fold((function(){return At(e)}),(function(n){return Rt((function(r){!function(t,n,e){var r=t.selection.getRng();Dt.setEditorTimeout(t,(function(){t.windowManager.confirm(n,(function(n){t.selection.setRng(r),e(n)}))}))}(t,n.message,(function(t){r(t?n.preprocess(e):e)}))}))}))},It=function(t){var n=t.dom.select("a:not([href])"),e=G(n,(function(t){var n=t.name||t.id;return n?[{text:n,value:"#"+n}]:[]}));return e.length>0?B([{text:"None",value:""}].concat(e)):j()},Nt=function(t){var n=w(t);return n.length>0?gt.sanitize(n):j()},Pt=tinymce.util.Tools.resolve("tinymce.util.XHR"),Mt=function(t){var n=function(n){return t.convertURL(n.value||n.url,"href")},e=h(t);return Rt((function(t){f(e)?Pt.send({url:e,success:function(n){return t(function(t){try{return B(JSON.parse(t))}catch(n){return j()}}(n))},error:function(n){return t(j())}}):m(e)?e((function(n){return t(B(n))})):t(L(e))})).map((function(t){return t.bind(gt.sanitizeWith(n)).map((function(t){return t.length>0?[{text:"None",value:""}].concat(t):t}))}))},Bt=function(t,n){var e=y(t);if(e.length>0){var r=n.is("_blank");return(!1===C(t)?gt.sanitizeWith((function(t){return lt(gt.getValue(t),r)})):gt.sanitize)(e)}return j()},jt=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],Lt=function(t){var n=b(t);return s(n)?gt.sanitize(n).orThunk((function(){return B(jt)})):!1===n?j():B(jt)},Ut=function(t,n,e){var r=t.getAttrib(n,e);return null!==r&&r.length>0?B(r):j()},Ft=function(t,n){return Mt(t).map((function(e){var r=function(t,n){var e=t.dom,r=ut(t.selection.getContent())?B(ct(t.selection,n)):j(),o=n?B(e.getAttrib(n,"href")):j(),i=n?L(e.getAttrib(n,"target")):j(),u=Ut(e,n,"rel"),a=Ut(e,n,"class");return{url:o,text:r,title:Ut(e,n,"title"),target:i,rel:u,linkClass:a}}(t,n);return{anchor:r,catalogs:{targets:Lt(t),rels:Bt(t,r.target),classes:Nt(t),anchor:It(t),link:e},optNode:L(n),flags:{titleEnabled:x(t)}}}))},Wt=function(t){(function(t){var n=at(t);return Ft(t,n)})(t).map((function(n){var e=function(t,n,e){return function(r){var o=r.getData();if(!o.url.value)return et(t),void r.close();var i=function(t){return L(o[t]).filter((function(e){return!n.anchor[t].is(e)}))},u={href:o.url.value,text:i("text"),target:i("target"),rel:i("rel"),class:i("linkClass"),title:i("title")},a={href:o.url.value,attach:void 0!==o.url.meta&&o.url.meta.attach?o.url.meta.attach:function(){}};_t(t,e,u).get((function(n){nt(t,a,n)})),r.close()}}(t,n,p(t));return function(t,n,e){var r=t.anchor.text.map((function(){return{name:"text",type:"input",label:"Text to display"}})).toArray(),o=t.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],i=function(t,n){return{url:{value:t.anchor.url.getOr(""),meta:{attach:function(){},text:t.anchor.url.fold((function(){return""}),(function(){return t.anchor.text.getOr("")})),original:{value:t.anchor.url.getOr("")}}},text:t.anchor.text.getOr(""),title:t.anchor.title.getOr(""),anchor:t.anchor.url.getOr(""),link:t.anchor.url.getOr(""),rel:t.anchor.rel.getOr(""),target:t.anchor.target.or(n).getOr(""),linkClass:t.anchor.linkClass.getOr("")}}(t,L(v(e))),u=vt(i,t),a=t.catalogs;return{title:"Insert/Edit Link",size:"normal",body:{type:"panel",items:q([[{name:"url",type:"urlinput",filetype:"file",label:"URL"}],r,o,st([a.anchor.map(gt.createUi("anchor","Anchors")),a.rels.map(gt.createUi("rel","Rel")),a.targets.map(gt.createUi("target","Open link in...")),a.link.map(gt.createUi("link","Link list")),a.classes.map(gt.createUi("linkClass","Class"))])])},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:i,onChange:function(t,n){var e=n.name;u.onChange(t.getData,{name:e}).each((function(n){t.setData(n)}))},onSubmit:n}}(n,e,t)})).get((function(n){t.windowManager.open(n)}))},zt=function(t,n){return t.dom.getParent(n,"a[href]")},Ht=function(t){return zt(t,t.selection.getStart())},qt=function(t,n){if(n){var e=it(n);if(/^#/.test(e)){var r=t.$(e);r.length&&t.selection.scrollIntoView(r[0],!0)}else R(n.href)}},Gt={openDialog:function(t){return function(){Wt(t)}},gotoSelectedLink:function(t){return function(){qt(t,Ht(t))}},leftClickedOnAHref:function(t){return function(n){var e,r,o;return!!(g(t)&&rt(n)&&3===(o=(r=(e=t.selection).getRng()).startContainer).nodeType&&e.isCollapsed()&&r.startOffset>0&&r.startOffset<o.data.length)}},setupGotoLinks:function(t){t.on("click",(function(n){var e=zt(t,n.target);e&&c.metaKeyPressed(n)&&(n.preventDefault(),qt(t,e))})),t.on("keydown",(function(n){var e=Ht(t);e&&13===n.keyCode&&function(t){return!0===t.altKey&&!1===t.shiftKey&&!1===t.ctrlKey&&!1===t.metaKey}(n)&&(n.preventDefault(),qt(t,e))}))},toggleActiveState:function(t){return function(n){var e=function(e){return n.setActive(!t.readonly&&!!at(t,e.element))};return t.on("NodeChange",e),function(){return t.off("NodeChange",e)}}},toggleEnabledState:function(t){return function(n){n.setDisabled(!ot(t.dom.getParents(t.selection.getStart())));var e=function(t){return n.setDisabled(!ot(t.parents))};return t.on("NodeChange",e),function(){return t.off("NodeChange",e)}}}},Kt={register:function(t){t.addCommand("mceLink",(function(){S(t)?t.fire("contexttoolbar-show",{toolbarKey:"quicklink"}):Gt.openDialog(t)()}))}},Vt={setup:function(t){t.addShortcut("Meta+K","",(function(){t.execCommand("mceLink")}))}},Yt={setupButtons:function(t){t.ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",onAction:Gt.openDialog(t),onSetup:Gt.toggleActiveState(t)}),t.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:function(){return et(t)},onSetup:Gt.toggleEnabledState(t)})},setupMenuItems:function(t){t.ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:Gt.gotoSelectedLink(t),onSetup:Gt.toggleEnabledState(t)}),t.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onAction:Gt.openDialog(t)}),t.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:function(){return et(t)},onSetup:Gt.toggleEnabledState(t)})},setupContextMenu:function(t){t.ui.registry.addContextMenu("link",{update:function(n){return ot(t.dom.getParents(n,"a"))?"link unlink openlink":"link"}})},setupContextToolbars:function(t){var n=function(n){var e=t.selection.getNode();return n.setDisabled(!at(t,e)),function(){}};t.ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:Gt.toggleActiveState(t)},label:"Link",predicate:function(n){return!!at(t,n)&&g(t)},initValue:function(){var n=at(t);return n?it(n):""},commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:function(n){var e=t.selection.getNode();return n.setActive(!!at(t,e)),Gt.toggleActiveState(t)(n)},onAction:function(n){var e=at(t),r=n.getValue();if(e)t.dom.setAttrib(e,"href",r),function(t){t.selection.collapse(!1)}(t),n.hide();else{var o={href:r,attach:function(){}},i=ut(t.selection.getContent())?B(ct(t.selection,e)).filter((function(t){return t.length>0})).or(L(r)):j();nt(t,o,{href:r,text:i,title:j(),rel:j(),target:j(),class:j()}),n.hide()}}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:n,onAction:function(n){et(t),n.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:n,onAction:function(n){Gt.gotoSelectedLink(t)(),n.hide()}}]})}};a.add("link",(function(t){Yt.setupButtons(t),Yt.setupMenuItems(t),Yt.setupContextMenu(t),Yt.setupContextToolbars(t),Gt.setupGotoLinks(t),Kt.register(t),Vt.setup(t)}))}(window)}).call(this,e("yLpj"))},zdkC:function(t,n,e){(function(t){e("OeI1"),e("HQhv"),e("sC2a"),e("AqHK"),e("n7j8"),e("rzGZ"),e("Dq+y"),e("8npG"),e("E5k/"),e("YbXK"),e("cFtU"),e("wZFJ"),e("pJf4"),e("DrhF"),function(n){"use strict";var e,r,o,i,u=tinymce.util.Tools.resolve("tinymce.PluginManager"),a=function(){},c=function(t){return function(){return t}},l=function(t){return t},f=c(!1),s=c(!0),d=f,m=s,p=function(){return g},g=(i={fold:function(t,n){return t()},is:d,isSome:d,isNone:m,getOr:o=function(t){return t},getOrThunk:r=function(t){return t()},getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:function(){return null},getOrUndefined:function(){},or:o,orThunk:r,map:p,ap:p,each:function(){},bind:p,flatten:p,exists:d,forall:m,filter:p,equals:e=function(t){return t.isNone()},equals_:e,toArray:function(){return[]},toString:c("none()")},Object.freeze&&Object.freeze(i),i),h=function t(n){var e=function(){return n},r=function(){return i},o=function(t){return t(n)},i={fold:function(t,e){return e(n)},is:function(t){return n===t},isSome:m,isNone:d,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:r,orThunk:r,map:function(e){return t(e(n))},ap:function(e){return e.fold(p,(function(e){return t(e(n))}))},each:function(t){t(n)},bind:o,flatten:e,exists:o,forall:o,filter:function(t){return t(n)?i:g},equals:function(t){return t.is(n)},equals_:function(t,e){return t.fold(d,(function(t){return e(n,t)}))},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return i},v={some:h,none:p,from:function(t){return null==t?g:h(t)}},b=function(t){return function(n){return function(t){if(null===t)return"null";var n=typeof t;return"object"===n&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"===n&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":n}(n)===t}},y=b("string"),w=b("object"),x=b("array"),C=b("boolean"),S=b("function"),T=Array.prototype.slice,O=Array.prototype.push,R=function(t){for(var n=[],e=0,r=t.length;e<r;++e){if(!x(t[e]))throw new Error("Arr.flatten item "+e+" was not an array, input: "+t);O.apply(n,t[e])}return n},A=(S(Array.from)&&Array.from,function(){return(A=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t}).apply(this,arguments)}),D={},E={exports:D};!function(n,e,r,o){!function(o){if("object"==typeof e&&void 0!==r)r.exports=o();else if("function"==typeof n&&n.amd)n([],o);else{("undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:this).EphoxContactWrapper=o()}}((function(){return function t(n,e,r){function i(a,c){if(!e[a]){if(!n[a]){var l="function"==typeof o&&o;if(!c&&l)return l(a,!0);if(u)return u(a,!0);var f=new Error("Cannot find module '"+a+"'");throw f.code="MODULE_NOT_FOUND",f}var s=e[a]={exports:{}};n[a][0].call(s.exports,(function(t){return i(n[a][1][t]||t)}),s,s.exports,t,n,e,r)}return e[a].exports}for(var u="function"==typeof o&&o,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(t,n,e){var r,o,i=n.exports={};function u(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function c(t){if(r===setTimeout)return setTimeout(t,0);if((r===u||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(n){try{return r.call(null,t,0)}catch(n){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:u}catch(t){r=u}try{o="function"==typeof clearTimeout?clearTimeout:a}catch(t){o=a}}();var l,f=[],s=!1,d=-1;function m(){s&&l&&(s=!1,l.length?f=l.concat(f):d=-1,f.length&&p())}function p(){if(!s){var t=c(m);s=!0;for(var n=f.length;n;){for(l=f,f=[];++d<n;)l&&l[d].run();d=-1,n=f.length}l=null,s=!1,function(t){if(o===clearTimeout)return clearTimeout(t);if((o===a||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(t);try{o(t)}catch(n){try{return o.call(null,t)}catch(n){return o.call(this,t)}}}(t)}}function g(t,n){this.fun=t,this.array=n}function h(){}i.nextTick=function(t){var n=new Array(arguments.length-1);if(arguments.length>1)for(var e=1;e<arguments.length;e++)n[e-1]=arguments[e];f.push(new g(t,n)),1!==f.length||s||c(p)},g.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=h,i.addListener=h,i.once=h,i.off=h,i.removeListener=h,i.removeAllListeners=h,i.emit=h,i.prependListener=h,i.prependOnceListener=h,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],2:[function(t,n,e){(function(t){!function(e){var r=setTimeout;function o(){}function i(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],s(t,this)}function u(t,n){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,i._immediateFn((function(){var e=1===t._state?n.onFulfilled:n.onRejected;if(null!==e){var r;try{r=e(t._value)}catch(o){return void c(n.promise,o)}a(n.promise,r)}else(1===t._state?a:c)(n.promise,t._value)}))):t._deferreds.push(n)}function a(t,n){try{if(n===t)throw new TypeError("A promise cannot be resolved with itself.");if(n&&("object"==typeof n||"function"==typeof n)){var e=n.then;if(n instanceof i)return t._state=3,t._value=n,void l(t);if("function"==typeof e)return void s((r=e,o=n,function(){r.apply(o,arguments)}),t)}t._state=1,t._value=n,l(t)}catch(u){c(t,u)}var r,o}function c(t,n){t._state=2,t._value=n,l(t)}function l(t){2===t._state&&0===t._deferreds.length&&i._immediateFn((function(){t._handled||i._unhandledRejectionFn(t._value)}));for(var n=0,e=t._deferreds.length;n<e;n++)u(t,t._deferreds[n]);t._deferreds=null}function f(t,n,e){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof n?n:null,this.promise=e}function s(t,n){var e=!1;try{t((function(t){e||(e=!0,a(n,t))}),(function(t){e||(e=!0,c(n,t))}))}catch(r){if(e)return;e=!0,c(n,r)}}i.prototype.catch=function(t){return this.then(null,t)},i.prototype.then=function(t,n){var e=new this.constructor(o);return u(this,new f(t,n,e)),e},i.all=function(t){var n=Array.prototype.slice.call(t);return new i((function(t,e){if(0===n.length)return t([]);var r=n.length;function o(i,u){try{if(u&&("object"==typeof u||"function"==typeof u)){var a=u.then;if("function"==typeof a)return void a.call(u,(function(t){o(i,t)}),e)}n[i]=u,0==--r&&t(n)}catch(c){e(c)}}for(var i=0;i<n.length;i++)o(i,n[i])}))},i.resolve=function(t){return t&&"object"==typeof t&&t.constructor===i?t:new i((function(n){n(t)}))},i.reject=function(t){return new i((function(n,e){e(t)}))},i.race=function(t){return new i((function(n,e){for(var r=0,o=t.length;r<o;r++)t[r].then(n,e)}))},i._immediateFn="function"==typeof t?function(n){t(n)}:function(t){r(t,0)},i._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)},i._setImmediateFn=function(t){i._immediateFn=t},i._setUnhandledRejectionFn=function(t){i._unhandledRejectionFn=t},void 0!==n&&n.exports?n.exports=i:e.Promise||(e.Promise=i)}(this)}).call(this,t("timers").setImmediate)},{timers:3}],3:[function(t,n,e){(function(n,r){var o=t("process/browser.js").nextTick,i=Function.prototype.apply,u=Array.prototype.slice,a={},c=0;function l(t,n){this._id=t,this._clearFn=n}e.setTimeout=function(){return new l(i.call(setTimeout,window,arguments),clearTimeout)},e.setInterval=function(){return new l(i.call(setInterval,window,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t.close()},l.prototype.unref=l.prototype.ref=function(){},l.prototype.close=function(){this._clearFn.call(window,this._id)},e.enroll=function(t,n){clearTimeout(t._idleTimeoutId),t._idleTimeout=n},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var n=t._idleTimeout;n>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),n))},e.setImmediate="function"==typeof n?n:function(t){var n=c++,r=!(arguments.length<2)&&u.call(arguments,1);return a[n]=!0,o((function(){a[n]&&(r?t.apply(null,r):t.call(null),e.clearImmediate(n))})),n},e.clearImmediate="function"==typeof r?r:function(t){delete a[t]}}).call(this,t("timers").setImmediate,t("timers").clearImmediate)},{"process/browser.js":1,timers:3}],4:[function(t,n,e){var r=t("promise-polyfill"),o="undefined"!=typeof window?window:Function("return this;")();n.exports={boltExport:o.Promise||r}},{"promise-polyfill":2}]},{},[4])(4)}))}(void 0,D,E,void 0);var k=E.exports.boltExport,_=function t(e){var r=v.none(),o=[],i=function(t){u()?c(t):o.push(t)},u=function(){return r.isSome()},a=function(t){!function(t,n){for(var e=0,r=t.length;e<r;e++){n(t[e],e,t)}}(t,c)},c=function(t){r.each((function(e){n.setTimeout((function(){t(e)}),0)}))};return e((function(t){r=v.some(t),a(o),o=[]})),{get:i,map:function(n){return t((function(t){i((function(e){t(n(e))}))}))},isReady:u}},I=_,N=function(t){n.setTimeout((function(){throw t}),0)},P=function t(n){var e=function(t){n().then(t,N)};return{map:function(e){return t((function(){return n().then(e)}))},bind:function(e){return t((function(){return n().then((function(t){return e(t).toPromise()}))}))},anonBind:function(e){return t((function(){return n().then((function(){return e.toPromise()}))}))},toLazy:function(){return I(e)},toCached:function(){var e=null;return t((function(){return null===e&&(e=n()),e}))},toPromise:n,get:e}},M=function(t){return P((function(){return new k(t)}))},B=function(t){return P((function(){return k.resolve(t)}))},j=function t(n){return{is:function(t){return n===t},isValue:s,isError:f,getOr:c(n),getOrThunk:c(n),getOrDie:c(n),or:function(e){return t(n)},orThunk:function(e){return t(n)},fold:function(t,e){return e(n)},map:function(e){return t(e(n))},mapError:function(e){return t(n)},each:function(t){t(n)},bind:function(t){return t(n)},exists:function(t){return t(n)},forall:function(t){return t(n)},toOption:function(){return v.some(n)}}},L=function t(n){return{is:f,isValue:f,isError:s,getOr:l,getOrThunk:function(t){return t()},getOrDie:function(){return(t=String(n),function(){throw new Error(t)})();var t},or:function(t){return t},orThunk:function(t){return t()},fold:function(t,e){return t(n)},map:function(e){return t(n)},mapError:function(e){return t(e(n))},each:a,bind:function(e){return t(n)},exists:f,forall:s,toOption:v.none}},U=j,F=L,W=function t(e){return A({},e,{toCached:function(){return t(e.toCached())},bindFuture:function(n){return t(e.bind((function(t){return t.fold((function(t){return B(F(t))}),(function(t){return n(t)}))})))},bindResult:function(n){return t(e.map((function(t){return t.bind(n)})))},mapResult:function(n){return t(e.map((function(t){return t.map(n)})))},mapError:function(n){return t(e.map((function(t){return t.mapError(n)})))},foldResult:function(t,n){return e.map((function(e){return e.fold(t,n)}))},withTimeout:function(r,o){return t(M((function(t){var i=!1,u=n.setTimeout((function(){i=!0,t(F(o()))}),r);e.get((function(e){i||(n.clearTimeout(u),t(e))}))})))}})},z=function(t){return W(M(t))},H=z,q=Object.prototype.hasOwnProperty,G=function(t){return function(){for(var n=new Array(arguments.length),e=0;e<n.length;e++)n[e]=arguments[e];if(0===n.length)throw new Error("Can't merge zero objects");for(var r={},o=0;o<n.length;o++){var i=n[o];for(var u in i)q.call(i,u)&&(r[u]=t(r[u],i[u]))}return r}},K=G((function(t,n){return w(t)&&w(n)?K(t,n):n})),V=G((function(t,n){return n})),Y=function(t){var n=t.imageList.map((function(t){return{name:"images",type:"selectbox",label:"Image list",items:t}})),e=t.classList.map((function(t){return{name:"classes",type:"selectbox",label:"Class",items:t}}));return R([[{name:"src",type:"urlinput",filetype:"image",label:"Source"}],n.toArray(),t.hasDescription?[{name:"alt",type:"input",label:"Image description"}]:[],t.hasImageTitle?[{name:"title",type:"input",label:"Image title"}]:[],t.hasDimensions?[{name:"dimensions",type:"sizeinput"}]:[],[{type:"grid",columns:2,items:R([e.toArray(),t.hasImageCaption?[{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[]])}]])},J=function(t){return{title:"General",name:"general",items:Y(t)}},X=Y,$=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Z=tinymce.util.Tools.resolve("tinymce.util.Promise"),Q=tinymce.util.Tools.resolve("tinymce.util.XHR"),tt=function(t){return t.getParam("images_upload_url","","string")},nt=function(t){return t.getParam("images_upload_handler",void 0,"function")},et={hasDimensions:function(t){return t.getParam("image_dimensions",!0,"boolean")},hasUploadTab:function(t){return t.getParam("image_uploadtab",!0,"boolean")},hasAdvTab:function(t){return t.getParam("image_advtab",!1,"boolean")},getPrependUrl:function(t){return t.getParam("image_prepend_url","","string")},getClassList:function(t){return t.getParam("image_class_list")},hasDescription:function(t){return t.getParam("image_description",!0,"boolean")},hasImageTitle:function(t){return t.getParam("image_title",!1,"boolean")},hasImageCaption:function(t){return t.getParam("image_caption",!1,"boolean")},getImageList:function(t){return t.getParam("image_list",!1)},hasUploadUrl:function(t){return!!tt(t)},hasUploadHandler:function(t){return!!nt(t)},getUploadUrl:tt,getUploadHandler:nt,getUploadBasePath:function(t){return t.getParam("images_upload_base_path",void 0,"string")},getUploadCredentials:function(t){return t.getParam("images_upload_credentials",!1,"boolean")}},rt=function(t,n){return Math.max(parseInt(t,10),parseInt(n,10))},ot=function(t,e){var r=n.document.createElement("img"),o=function(t){r.parentNode&&r.parentNode.removeChild(r),e(t)};r.onload=function(){var t=rt(r.width,r.clientWidth),n=rt(r.height,r.clientHeight);o(U({width:t,height:n}))},r.onerror=function(){o(F("Failed to get image dimensions for: "+t))};var i=r.style;i.visibility="hidden",i.position="fixed",i.bottom=i.left="0px",i.width=i.height="auto",n.document.body.appendChild(r),r.src=t},it=function(t){return t&&(t=t.replace(/px$/,"")),t},ut=function(t){return t.length>0&&/^[0-9]+$/.test(t)&&(t+="px"),t},at=function(t){if(t.margin){var n=String(t.margin).split(" ");switch(n.length){case 1:t["margin-top"]=t["margin-top"]||n[0],t["margin-right"]=t["margin-right"]||n[0],t["margin-bottom"]=t["margin-bottom"]||n[0],t["margin-left"]=t["margin-left"]||n[0];break;case 2:t["margin-top"]=t["margin-top"]||n[0],t["margin-right"]=t["margin-right"]||n[1],t["margin-bottom"]=t["margin-bottom"]||n[0],t["margin-left"]=t["margin-left"]||n[1];break;case 3:t["margin-top"]=t["margin-top"]||n[0],t["margin-right"]=t["margin-right"]||n[1],t["margin-bottom"]=t["margin-bottom"]||n[2],t["margin-left"]=t["margin-left"]||n[1];break;case 4:t["margin-top"]=t["margin-top"]||n[0],t["margin-right"]=t["margin-right"]||n[1],t["margin-bottom"]=t["margin-bottom"]||n[2],t["margin-left"]=t["margin-left"]||n[3]}delete t.margin}return t},ct=function(t,n){var e=et.getImageList(t);"string"==typeof e?Q.send({url:e,success:function(t){n(JSON.parse(t))}}):"function"==typeof e?e(n):n(e)},lt=function(t,n,e){var r=function(){e.onload=e.onerror=null,t.selection&&(t.selection.select(e),t.nodeChanged())};e.onload=function(){n.width||n.height||!et.hasDimensions(t)||t.dom.setAttribs(e,{width:String(e.clientWidth),height:String(e.clientHeight)}),r()},e.onerror=r},ft=function(t){return new Z((function(e,r){var o=new n.FileReader;o.onload=function(){e(o.result)},o.onerror=function(){r(o.error.message)},o.readAsDataURL(t)}))},st=function(t){return"IMG"===t.nodeName&&(t.hasAttribute("data-mce-object")||t.hasAttribute("data-mce-placeholder"))},dt=$.DOM,mt=function(t){return t.style.marginLeft&&t.style.marginRight&&t.style.marginLeft===t.style.marginRight?it(t.style.marginLeft):""},pt=function(t){return t.style.marginTop&&t.style.marginBottom&&t.style.marginTop===t.style.marginBottom?it(t.style.marginTop):""},gt=function(t){return t.style.borderWidth?it(t.style.borderWidth):""},ht=function(t,n){return t.hasAttribute(n)?t.getAttribute(n):""},vt=function(t,n){return t.style[n]?t.style[n]:""},bt=function(t){return null!==t.parentNode&&"FIGURE"===t.parentNode.nodeName},yt=function(t,n,e){t.setAttribute(n,e)},wt=function(t){bt(t)?function(t){var n=t.parentNode;dt.insertAfter(t,n),dt.remove(n)}(t):function(t){var n=dt.create("figure",{class:"image"});dt.insertAfter(n,t),n.appendChild(t),n.appendChild(dt.create("figcaption",{contentEditable:"true"},"Caption")),n.contentEditable="false"}(t)},xt=function(t,n){var e=t.getAttribute("style"),r=n(null!==e?e:"");r.length>0?(t.setAttribute("style",r),t.setAttribute("data-mce-style",r)):t.removeAttribute("style")},Ct=function(t,n){return function(t,e,r){t.style[e]?(t.style[e]=ut(r),xt(t,n)):yt(t,e,r)}},St=function(t,n){return t.style[n]?it(t.style[n]):ht(t,n)},Tt=function(t,n){var e=ut(n);t.style.marginLeft=e,t.style.marginRight=e},Ot=function(t,n){var e=ut(n);t.style.marginTop=e,t.style.marginBottom=e},Rt=function(t,n){var e=ut(n);t.style.borderWidth=e},At=function(t,n){t.style.borderStyle=n},Dt=function(t){return"FIGURE"===t.nodeName},Et=function(t,e){var r=n.document.createElement("img");return yt(r,"style",e.style),(mt(r)||""!==e.hspace)&&Tt(r,e.hspace),(pt(r)||""!==e.vspace)&&Ot(r,e.vspace),(gt(r)||""!==e.border)&&Rt(r,e.border),(function(t){return vt(t,"borderStyle")}(r)||""!==e.borderStyle)&&At(r,e.borderStyle),t(r.getAttribute("style"))},kt=function(t,n){return{src:ht(n,"src"),alt:ht(n,"alt"),title:ht(n,"title"),width:St(n,"width"),height:St(n,"height"),class:ht(n,"class"),style:t(ht(n,"style")),caption:bt(n),hspace:mt(n),vspace:pt(n),border:gt(n),borderStyle:vt(n,"borderStyle")}},_t=function(t,n,e,r,o){e[r]!==n[r]&&o(t,r,e[r])},It=function(t,n){return function(e,r,o){t(e,o),xt(e,n)}},Nt=function(t,n,e){var r=kt(t,e);_t(e,r,n,"caption",(function(t,n,e){return wt(t)})),_t(e,r,n,"src",yt),_t(e,r,n,"alt",yt),_t(e,r,n,"title",yt),_t(e,r,n,"width",Ct(0,t)),_t(e,r,n,"height",Ct(0,t)),_t(e,r,n,"class",yt),_t(e,r,n,"style",It((function(t,n){return yt(t,"style",n)}),t)),_t(e,r,n,"hspace",It(Tt,t)),_t(e,r,n,"vspace",It(Ot,t)),_t(e,r,n,"border",It(Rt,t)),_t(e,r,n,"borderStyle",It(At,t))},Pt=function(t,n){var e=t.dom.styles.parse(n),r=at(e),o=t.dom.styles.parse(t.dom.styles.serialize(r));return t.dom.styles.serialize(o)},Mt=function(t){var n=t.selection.getNode(),e=t.dom.getParent(n,"figure.image");return e?t.dom.select("img",e)[0]:n&&("IMG"!==n.nodeName||st(n))?null:n},Bt=function(t,n){var e=t.dom,r=e.getParent(n.parentNode,(function(n){return t.schema.getTextBlockElements()[n.nodeName]}),t.getBody());return r?e.split(r,n):n},jt=function(t,e){var r=function(t,e){var r=n.document.createElement("img");if(Nt(t,V(e,{caption:!1}),r),yt(r,"alt",e.alt),e.caption){var o=dt.create("figure",{class:"image"});return o.appendChild(r),o.appendChild(dt.create("figcaption",{contentEditable:"true"},"Caption")),o.contentEditable="false",o}return r}((function(n){return Pt(t,n)}),e);t.dom.setAttrib(r,"data-mce-id","__mcenew"),t.focus(),t.selection.setContent(r.outerHTML);var o=t.dom.select('*[data-mce-id="__mcenew"]')[0];if(t.dom.setAttrib(o,"data-mce-id",null),Dt(o)){var i=Bt(t,o);t.selection.select(i)}else t.selection.select(o)},Lt=function(t,n){var e=Mt(t);e?n.src?function(t,n){var e=Mt(t);if(Nt((function(n){return Pt(t,n)}),n,e),function(t,n){t.dom.setAttrib(n,"src",n.getAttribute("src"))}(t,e),Dt(e.parentNode)){var r=e.parentNode;Bt(t,r),t.selection.select(e.parentNode)}else t.selection.select(e),lt(t,n,e)}(t,n):function(t,n){if(n){var e=t.dom.is(n.parentNode,"figure.image")?n.parentNode:n;t.dom.remove(e),t.focus(),t.nodeChanged(),t.dom.isEmpty(t.getBody())&&(t.setContent(""),t.selection.setCursorLocation())}}(t,e):n.src&&jt(t,n)},Ut=tinymce.util.Tools.resolve("tinymce.util.Tools"),Ft=function(t){return y(t.value)?t.value:""},Wt=function(t){return void 0===t&&(t=Ft),function(n){return n?v.from(n).map((function(n){return function t(n,e){var r=[];return Ut.each(n,(function(n){var o=y(n.text)?n.text:y(n.title)?n.title:"";if(void 0!==n.menu){var i=t(n.menu,e);r.push({text:o,items:i})}else{var u=e(n);r.push({text:o,value:u})}})),r}(n,t)})):v.none()}},zt=function t(n,e){return function(t,n){for(var e=0;e<t.length;e++){var r=n(t[e],e);if(r.isSome())return r}return v.none()}(n,(function(n){return function(t){return Object.prototype.hasOwnProperty.call(t,"items")}(n)?t(n.items,e):n.value===e?v.some(n):v.none()}))},Ht=Wt,qt=function(t){return Wt(Ft)(t)},Gt=function(t,n){return t.bind((function(t){return zt(t,n)}))},Kt=function(t,n){return t?t.replace(/\/$/,"")+"/"+n.replace(/^\//,""):n};function Vt(t){var e=function(e,r,o,i){var u,a;(u=new n.XMLHttpRequest).open("POST",t.url),u.withCredentials=t.credentials,u.upload.onprogress=function(t){i(t.loaded/t.total*100)},u.onerror=function(){o("Image upload failed due to a XHR Transport error. Code: "+u.status)},u.onload=function(){var n;u.status<200||u.status>=300?o("HTTP Error: "+u.status):(n=JSON.parse(u.responseText))&&"string"==typeof n.location?r(Kt(t.basePath,n.location)):o("Invalid JSON: "+u.responseText)},(a=new n.FormData).append("file",e.blob(),e.filename()),u.send(a)};return t=Ut.extend({credentials:!1,handler:e},t),{upload:function(n){return t.url||t.handler!==e?function(t,n){return new Z((function(e,r){try{n(t,e,r,a)}catch(o){r(o.message)}}))}(n,t.handler):Z.reject("Upload url missing from the settings.")}}}var Yt=function(t){return{title:"Advanced",name:"advanced",items:[{type:"input",label:"Style",name:"style"},{type:"grid",columns:2,items:[{type:"input",label:"Vertical space",name:"vspace"},{type:"input",label:"Horizontal space",name:"hspace"},{type:"input",label:"Border width",name:"border"},{type:"selectbox",name:"borderstyle",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]}]}},Jt=function(t){var n=Ht((function(n){return t.convertURL(n.value||n.url,"src")})),e=M((function(e){ct(t,(function(t){e(n(t).map((function(t){return R([[{text:"None",value:""}],t])})))}))})),r=qt(et.getClassList(t)),o=et.hasAdvTab(t),i=et.hasUploadTab(t),u=et.hasUploadUrl(t),a=et.hasUploadHandler(t),c=function(t){var n=Mt(t);return n?kt((function(n){return Pt(t,n)}),n):{src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:""}}(t),l=et.hasDescription(t),f=et.hasImageTitle(t),s=et.hasDimensions(t),d=et.hasImageCaption(t),m=et.getUploadUrl(t),p=et.getUploadBasePath(t),g=et.getUploadCredentials(t),h=et.getUploadHandler(t),b=v.some(et.getPrependUrl(t)).filter((function(t){return y(t)&&t.length>0}));return e.map((function(t){return{image:c,imageList:t,classList:r,hasAdvTab:o,hasUploadTab:i,hasUploadUrl:u,hasUploadHandler:a,hasDescription:l,hasImageTitle:f,hasDimensions:s,hasImageCaption:d,url:m,basePath:p,credentials:g,handler:h,prependURL:b}}))},Xt=function(t){return{title:"Upload",name:"upload",items:[{type:"dropzone",name:"fileinput"}]}},$t=function(t){return{src:{value:t.src,meta:{}},images:t.src,alt:t.alt,title:t.title,dimensions:{width:t.width,height:t.height},classes:t.class,caption:t.caption,style:t.style,vspace:t.vspace,border:t.border,hspace:t.hspace,borderstyle:t.borderStyle,fileinput:[]}},Zt=function(t){return{src:t.src.value,alt:t.alt,title:t.title,width:t.dimensions.width,height:t.dimensions.height,class:t.classes,style:t.style,caption:t.caption,hspace:t.hspace,vspace:t.vspace,border:t.border,borderStyle:t.borderstyle}},Qt=function(t,n){var e=n.getData();(function(t,n){return/^(?:[a-zA-Z]+:)?\/\//.test(n)?v.none():t.prependURL.bind((function(t){return n.substring(0,t.length)!==t?v.some(t+n):v.none()}))})(t,e.src.value).each((function(t){n.setData({src:{value:t,meta:e.src.meta}})}))},tn=function(t,n){var e=n.getData(),r=e.src.meta;if(void 0!==r){var o=K({},e);!function(t,n,e){t.hasDescription&&y(e.alt)&&(n.alt=e.alt),t.hasImageTitle&&y(e.title)&&(n.title=e.title),t.hasDimensions&&(y(e.width)&&(n.dimensions.width=e.width),y(e.height)&&(n.dimensions.height=e.height)),y(e.class)&&Gt(t.classList,e.class).each((function(t){n.classes=t.value})),t.hasImageCaption&&C(e.caption)&&(n.caption=e.caption),t.hasAdvTab&&(y(e.vspace)&&(n.vspace=e.vspace),y(e.border)&&(n.border=e.border),y(e.hspace)&&(n.hspace=e.hspace),y(e.borderstyle)&&(n.borderstyle=e.borderstyle))}(t,o,r),n.setData(o)}},nn=function(t,n,e,r){Qt(n,r),tn(n,r),function(t,n,e,r){var o=r.getData(),i=o.src.value,u=o.src.meta||{};u.width||u.height||!n.hasDimensions||t.imageSize(i).get((function(t){t.each((function(t){e.open&&r.setData({dimensions:t})}))}))}(t,n,e,r),function(t,n,e){var r=e.getData(),o=Gt(t.imageList,r.src.value);n.prevImage=o,e.setData({images:o.map((function(t){return t.value})).getOr("")})}(n,e,r)},en=function(t,n,e){var r=at(t(e.style)),o=K({},e);return o.vspace=function(t){return t["margin-top"]&&t["margin-bottom"]&&t["margin-top"]===t["margin-bottom"]?it(String(t["margin-top"])):""}(r),o.hspace=function(t){return t["margin-right"]&&t["margin-left"]&&t["margin-right"]===t["margin-left"]?it(String(t["margin-right"])):""}(r),o.border=function(t){return t["border-width"]?it(String(t["border-width"])):""}(r),o.borderstyle=function(t){return t["border-style"]?String(t["border-style"]):""}(r),o.style=function(t,n,e){return n(t(n(e)))}(t,n,r),o},rn=function(t,e,r,o){var i,u=o.getData();o.block("Uploading image"),(i=u.fileinput,0===i.length?v.none():v.some(i[0])).fold((function(){o.unblock()}),(function(i){var u=n.URL.createObjectURL(i),a=Vt({url:e.url,basePath:e.basePath,credentials:e.credentials,handler:e.handler}),c=function(){o.unblock(),n.URL.revokeObjectURL(u)};ft(i).then((function(n){var l=t.createBlobCache(i,u,n);a.upload(l).then((function(n){o.setData({src:{value:n,meta:{}}}),o.showTab("general"),nn(t,e,r,o),c()})).catch((function(n){c(),t.alertErr(o,n)}))}))}))},on=function(t,n,e){return function(r,o){"src"===o.name?nn(t,n,e,r):"images"===o.name?function(t,n,e,r){var o=r.getData(),i=Gt(n.imageList,o.images);i.each((function(t){""===o.alt||e.prevImage.map((function(t){return t.text===o.alt})).getOr(!1)?""===t.value?r.setData({src:t,alt:e.prevAlt}):r.setData({src:t,alt:t.text}):r.setData({src:t})})),e.prevImage=i,nn(t,n,e,r)}(t,n,e,r):"alt"===o.name?e.prevAlt=r.getData().alt:"style"===o.name?function(t,n){var e=n.getData(),r=en(t.parseStyle,t.serializeStyle,e);n.setData(r)}(t,r):"vspace"===o.name||"hspace"===o.name||"border"===o.name||"borderstyle"===o.name?function(t,n,e){var r=K($t(n.image),e.getData()),o=Et(t.normalizeCss,Zt(r));e.setData({style:o})}(t,n,r):"fileinput"===o.name&&rn(t,n,e,r)}},un=function(t){return function(){t.open=!1}},an=function(t){return t.hasAdvTab||t.hasUploadUrl||t.hasUploadHandler?{type:"tabpanel",tabs:R([[J(t)],t.hasAdvTab?[Yt(t)]:[],t.hasUploadTab&&(t.hasUploadUrl||t.hasUploadHandler)?[Xt(t)]:[]])}:{type:"panel",items:X(t)}},cn=function(t){return function(n){var e=function(t){return{prevImage:Gt(t.imageList,t.image.src),prevAlt:t.image.alt,open:!0}}(n);return{title:"Insert/Edit Image",size:"normal",body:an(n),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:$t(n.image),onSubmit:t.onSubmit(n),onChange:on(t,n,e),onClose:un(e)}}},ln=function(t){return function(n){return function(e){var r=K($t(n.image),e.getData());t.undoManager.transact((function(){Lt(t,Zt(r))})),t.editorUpload.uploadImagesAuto(),e.close()}}},fn=function(t){return function(n){return H((function(e){ot(t.documentBaseURI.toAbsolute(n),(function(t){var n=t.map((function(t){return{width:String(t.width),height:String(t.height)}}));e(n)}))}))}},sn=function(t){return function(n,e,r){return t.editorUpload.blobCache.create({blob:n,blobUri:e,name:n.name?n.name.replace(/\.[^\.]+$/,""):null,base64:r.split(",")[1]})}},dn=function(t){return function(n,e){t.windowManager.alert(e,n.close)}},mn=function(t){return function(n){return Pt(t,n)}},pn=function(t){return function(n){return t.dom.parseStyle(n)}},gn=function(t){return function(n,e){return t.dom.serializeStyle(n,e)}},hn=function(t){var n={onSubmit:ln(t),imageSize:fn(t),createBlobCache:sn(t),alertErr:dn(t),normalizeCss:mn(t),parseStyle:pn(t),serializeStyle:gn(t)};return{open:function(){return Jt(t).map(cn(n)).get((function(n){t.windowManager.open(n)}))}}},vn={register:function(t){t.addCommand("mceImage",hn(t).open)}},bn=function(t){var n=t.attr("class");return n&&/\bimage\b/.test(n)},yn=function(t){return function(n){for(var e=n.length,r=function(n){n.attr("contenteditable",t?"true":null)};e--;){var o=n[e];bn(o)&&(o.attr("contenteditable",t?"false":null),Ut.each(o.getAll("figcaption"),r))}}},wn={setup:function(t){t.on("PreInit",(function(){t.parser.addNodeFilter("figure",yn(!0)),t.serializer.addNodeFilter("figure",yn(!1))}))}},xn={register:function(t){t.ui.registry.addToggleButton("image",{icon:"image",tooltip:"Insert/edit image",onAction:hn(t).open,onSetup:function(n){return t.selection.selectorChangedWithUnbind("img:not([data-mce-object],[data-mce-placeholder]),figure.image",n.setActive).unbind}}),t.ui.registry.addMenuItem("image",{icon:"image",text:"Image...",onAction:hn(t).open}),t.ui.registry.addContextMenu("image",{update:function(t){return Dt(t)||"IMG"===t.nodeName&&!st(t)?["image"]:[]}})}};u.add("image",(function(t){wn.setup(t),xn.register(t),vn.register(t)}))}(window)}).call(this,e("yLpj"))}}]);
//# sourceMappingURL=component---src-pages-editors-tinymce-js-8cc0092271c21f31b51c.js.map